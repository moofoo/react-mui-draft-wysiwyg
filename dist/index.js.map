{"version":3,"file":"index.js","sources":["../src/EditorToolbar/controls/DividerControl/index.jsx","../src/EditorToolbar/controls/core/ButtonControl.jsx","../src/store.js","../src/EditorToolbar/controls/UndoControl/index.jsx","../src/EditorToolbar/controls/RedoControl/index.jsx","../src/hooks/useEditor.js","../src/EditorToolbar/controls/core/ToggleInlineStyleButtonControl.jsx","../src/types/inlineStyles.js","../src/EditorToolbar/controls/BoldControl/index.jsx","../src/EditorToolbar/controls/ItalicControl/index.jsx","../src/EditorToolbar/controls/UnderlineControl/index.jsx","../src/EditorToolbar/controls/StrikethroughControl/index.jsx","../src/hooks/useEditorState.js","../src/hooks/useEditorFocus.js","../src/types/entities.js","../src/utils/editorStateUtils.js","../src/EditorToolbar/controls/LinkAddControl/index.jsx","../src/EditorToolbar/controls/LinkAddControl/plugin.js","../src/EditorToolbar/controls/LinkRemoveControl/index.jsx","../src/types/lang.js","../src/utils/translateUtils.js","../src/EditorToolbar/controls/core/DropdownControl.jsx","../src/EditorToolbar/controls/BlockTypeControl/index.jsx","../src/EditorToolbar/controls/core/ToggleBlockTypeButtonControl.jsx","../src/EditorToolbar/controls/UnorderedListControl/index.jsx","../src/types/blockStyles.js","../src/EditorToolbar/controls/OrderedListControl/index.jsx","../src/EditorToolbar/controls/FontFamilyControl/index.jsx","../src/EditorToolbar/controls/FontFamilyControl/plugin.js","../src/EditorToolbar/controls/TextAlignControl/index.jsx","../src/EditorToolbar/controls/TextAlignControl/plugin.js","../src/EditorToolbar/controls/FontSizeControl/index.jsx","../src/EditorToolbar/controls/FontSizeControl/plugin.js","../src/utils/colorUtils.js","../src/EditorToolbar/controls/core/ColorSelectorControl/index.jsx","../src/EditorToolbar/controls/core/ToggleInlineStyleColorSelectorControl.jsx","../src/EditorToolbar/controls/FontColorControl/index.jsx","../src/EditorToolbar/controls/FontColorControl/plugin.js","../src/EditorToolbar/controls/FontBackgroundColorControl/index.jsx","../src/EditorToolbar/controls/FontBackgroundColorControl/plugin.js","../src/EditorToolbar/controls/ImageControl/dialogs/image/ImageToUpload.jsx","../src/EditorToolbar/controls/ImageControl/dialogs/inputs/SizeInputs.jsx","../src/EditorToolbar/controls/ImageControl/dialogs/ByURLDialog.jsx","../node_modules/babel-plugin-transform-async-to-promises/helpers.js","../src/EditorToolbar/controls/ImageControl/dialogs/UploadDialog.jsx","../src/EditorToolbar/controls/ImageControl/dialogs/ResizeImageDialog.js","../src/EditorToolbar/controls/ImageControl/index.jsx","../src/EditorToolbar/controls/ImageControl/plugin.js","../src/utils/fileUtils.js","../src/types/editorToolbar.js","../src/types/config.js","../src/utils/objectUtils.js","../src/lang/translations/ca.js","../src/lang/translations/en.js","../src/lang/translations/es.js","../src/lang/languages.js","../src/utils/EditorFactories.js","../src/EditorToolbar/index.jsx","../src/lang/Translator.js","../src/conversion/toHTML/block.js","../src/conversion/toHTML/entity.js","../src/conversion/toHTML/inlineStyle.js","../src/conversion/toHTML/index.js","../src/index.jsx"],"sourcesContent":["import React from 'react';\nimport Divider from '@mui/material/Divider';\n\nfunction DividerControl() {\n    return <Divider orientation=\"vertical\" flexItem />;\n}\n\nexport default DividerControl;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport IconButton from '@mui/material/IconButton';\nimport Tooltip from '@mui/material/Tooltip';\nimport Badge from '@mui/material/Badge';\nimport makeStyles from '@mui/styles/makeStyles';\n\nconst useStyles = makeStyles({\n    badge: (props) => ({\n        background: props.badgeColor,\n    }),\n});\n\nfunction ButtonControl({\n    children,\n    onClick,\n    disabled = false,\n    active = false,\n    text = '',\n    badgeColor = null,\n    ...rest\n}) {\n    const classes = useStyles({ badgeColor });\n    return (\n        <Tooltip title={text} aria-disabled={disabled}>\n            <span>\n                <IconButton\n                    onClick={onClick}\n                    disabled={disabled}\n                    color={active ? 'primary' : 'default'}\n                    {...rest}\n                    size=\"large\">\n                    <Badge\n                        anchorOrigin={{\n                            vertical: 'top',\n                            horizontal: 'left',\n                        }}\n                        classes={{ badge: classes.badge }}\n                        overlap=\"circular\"\n                        badgeContent=\" \"\n                        invisible={badgeColor === null}\n                        variant=\"dot\">\n                        {children}\n                    </Badge>\n                </IconButton>\n            </span>\n        </Tooltip>\n    );\n}\n\nButtonControl.propTypes = {\n    children: PropTypes.any.isRequired,\n    onClick: PropTypes.func.isRequired,\n    disabled: PropTypes.bool,\n    text: PropTypes.any,\n    badgeColor: PropTypes.any,\n    active: PropTypes.bool,\n};\n\nexport default ButtonControl;\n","import create from 'zustand'\nimport shallowCompare from 'zustand/shallow'\nimport { EditorState, Modifier, RichUtils, convertFromRaw } from 'draft-js';\nimport React from 'react';\nimport memoize from 'lodash.memoize';\n\nimport { MUIEditorState } from '.';\n\nexport const useStore = create((set, get) => ({\n    editorState: MUIEditorState.createWithContent({}, convertFromRaw({\n        blocks: [\n            {\n                data: {},\n                depth: 0,\n                entityRanges: [],\n                inlineStyleRanges: [],\n                key: '1aa1a',\n                text: '',\n            },\n        ],\n        entityMap: {},\n    })),\n    ref: null,\n    onChange: null,\n    translate: function () { },\n    setEditorState: (editorState) => set(() => {\n        const { onChange } = get();\n        if (typeof onChange === 'function') {\n            onChange(editorState);\n        }\n\n        return {\n            editorState\n        }\n    }),\n    setEditorRef: (ref) => set(() => ({ ref })),\n    setOnChange: (onChange) => set(() => ({ onChange })),\n    setTranslate: (translation) => set(() => ({ translation })),\n    setStuff: (ref, onChange, translate) => set(() => ({ ref, onChange, translate }))\n}));\n\nexport const getOnChange = state => state.onChange;\nexport const editorStateSelect = state => state.editorState;\nexport const getEditorRef = state => state.ref;\nexport const getTranslate = state => state.translate;\n\nexport const useOnChange = () => useStore(getOnChange);\nexport const useEditorState = () => useStore(editorStateSelect);\nexport const useEditorRef = () => useStore(getEditorRef);\nexport const useTranslate = () => useStore(getTranslate);\n\n\n\nexport const getEditorState = () => {\n    const state = useStore.getState();\n    return state.editorState;\n}\n\nexport const useTransientState = (selector = function (state) { return state }, shallow = false) => {\n    const stateRef = React.useRef(selector(useStore.getState()) || null);\n\n    useEffect(() => useStore.subscribe(\n        selected => (stateRef.current = selected),\n        (state) => selector(state),\n        shallow ? shallowCompare : undefined\n    ), []);\n\n    return stateRef;\n}\n\n\nexport const useTransientStateLayout = (selector = function (state) { return state }, shallow = false) => {\n    const stateRef = React.useRef(selector(useStore.getState()) || null);\n\n    React.useLayoutEffect(() => useStore.subscribe(\n        selected => (stateRef.current = selected),\n        (state) => selector(state),\n        shallow ? shallowCompare : undefined\n    ), []);\n\n    return stateRef;\n}\n\nexport function useCallbackOnFrame(callback, selector = function (state) { return state }, shallow = false, timeout = 10) {\n    const timer = React.useRef({ timeout: null, selected: null });\n\n    React.useLayoutEffect(() => useStore.subscribe(\n        (selected) => {\n            if (!timer.timeout) {\n                timer.count = 1;\n            } else {\n                timer.count++;\n            }\n\n            timer.selected = selected;\n            clearTimeout(timer.timeout);\n\n            if (timer.count >= 3) {\n                timer.timeout = null;\n                callback(timer.selected);\n                return;\n            } else {\n                timer.timeout = setTimeout(() => {\n                    callback(timer.selected);\n                    timer.timeout = null;\n                }, timeout);\n            }\n        },\n        (state) => selector(state),\n        shallow ? shallowCompare : undefined\n    ));\n}\n\n\nconst stateOr = (state) => state?.editorState ? state.editorState : state;\n\nexport const getEditorStateSelection = memoize((state) => {\n    const editorState = stateOr(state);\n    return editorState.getSelection();\n}, (state) => state?.editorState ? state.editorState : state);\n\nconst getSelectionCollapsed = state => state.editorState.getSelection().isCollaped();\nexport const useSelectionCollapsed = () => useStore(getSelectionCollapsed);\n\nlet selectors = {\n    editorState: (state) => stateOr(state),\n    blockType: (state) => RichUtils.getCurrentBlockType(stateOr(state)),\n    currentContent: (state) => stateOr(state).getCurrentContent(),\n    startKey: (state) => { const selection = getEditorStateSelection(stateOr(state)); return selection ? selection.getStartKey() : null; },\n    startOffset: (state) => { const selection = getEditorStateSelection(stateOr(state)); return selection ? selection.getStartOffset() : null; },\n    endKey: (state) => { const selection = getEditorStateSelection(stateOr(state)); return selection ? selection.getEndKey() : null; },\n    endOffset: (state) => { const selection = getEditorStateSelection(stateOr(state)); return selection ? selection.getEndOffset() : null; },\n    currentInlineStyle: (state) => stateOr(state).getCurrentInlineStyle(),\n    keysAndBlock: (state) => {\n        const editorState = stateOr(state);\n\n        const selection = selectors.selection(editorState);\n        const startKey = selection.getStartKey();\n        const startOffset = selection.getStartOffset();\n        const endKey = selection.getEndKey();\n        const endOffset = selection.getEndOffset();\n\n        const currentContent = editorState.getCurrentContent();\n\n        let block = currentContent.getBlockForKey(startKey);\n\n        return {\n            startKey,\n            startOffset,\n            endKey,\n            endOffset,\n            currentContent,\n            block\n        }\n    }\n}\n\nfor (const [name, selector] of Object.entries(selectors)) {\n    selectors[name] = memoize(selector, (state) => stateOr(state))\n}\n\nselectors.selection = getEditorStateSelection;\n\nexport { selectors };\n\nexport const toggleLinkSelector = state => {\n    const selection = selectors.selection(state);\n    return selection ? RichUtils.toggleLink(state.editorState, selection, null) : null;\n}\n\nexport const useCurrentBlockType = (availableBlockTypes) => {\n    return useStore(useCallback(state => {\n        const blockType = RichUtils.getCurrentBlockType(editorState);\n        if (availableBlockTypes.find((avBlockType) => avBlockType === blockType)) return blockType;\n        return 'default';\n    }, [availableBlockTypes.toString()]));\n}\n\nexport const getBlockTypeToggle = memoize((newValue = 'normal') => {\n    const state = useStore.getState();\n    return RichUtils.toggleBlockType(\n        state.editorState,\n        newValue === 'normal' ? '' : newValue\n    );\n}, (newValue) => newValue);\n\n\nexport const hasSelectionStyle = (inlineStyle) => {\n    const state = useStore.getState();\n\n    const { startKey, startOffset, endKey, endOffset, currentContent, block } = selectors.keysAndBlock(state);\n\n    const styleRangesCallback = (block) => (start, end) => {\n        const expectedStart = block.getKey() === startKey ? startOffset : 0;\n        const expectedEnd = block.getKey() === endKey ? endOffset : block.getLength() - 1;\n        allHasTheInlineStyle = start <= expectedStart && end >= expectedEnd;\n    };\n\n    while (block && allHasTheInlineStyle) {\n        allHasTheInlineStyle = false;\n        block.findStyleRanges(\n            (character) => character.hasStyle(inlineStyle),\n            styleRangesCallback(block)\n        );\n        if (block.getKey() !== endKey) break;\n        block = currentContent.getBlockAfter(block.getKey());\n    }\n\n    return allHasTheInlineStyle;\n};\n\n\n\nexport const toggleMappedInlineStyle = memoize((styleKeys, newInlineStyle) => {\n    const state = useStore.getState();\n    const { editorState } = state;\n\n    const selection = selectors.selection(state);\n\n\n    // Turn off the other mapped inline styled in selection\n    const newContentState = styleKeys.reduce(\n        (contentState, inlineStyle) =>\n            Modifier.removeInlineStyle(contentState, selection, inlineStyle),\n        selectors.currentContent(state)\n    );\n\n    let newEditorState = EditorState.push(editorState, newContentState, 'change-inline-style');\n\n    const currentStyle = editorState.getCurrentInlineStyle();\n\n    if (selection.isCollapsed()) {\n        newEditorState = currentStyle.reduce((state, inlineStyle) => {\n            return RichUtils.toggleInlineStyle(state, inlineStyle);\n        }, newEditorState);\n    }\n    // If the inline style is being toggled on, apply it.\n    if (!currentStyle.has(newInlineStyle)) {\n        newEditorState = RichUtils.toggleInlineStyle(newEditorState, newInlineStyle);\n    }\n\n    return newEditorState;\n}, (styleKeys, inlineStyle) => styleKeys.toString() + inlineStyle);\n\nexport const getCurrentMappedInlineStyle = (styleKeys, defaultInlineStyle = null) => {\n    const state = useStore.getState();\n\n    const currentStyle = selectors.currentInlineStyle(state);\n\n    return (\n        currentStyle.find((inlineStyle) => styleKeys.includes(inlineStyle)) || defaultInlineStyle\n    );\n};\n\n\nexport const applyEntityToCurrentSelection = (entityType, mutability, entityData) => {\n    const state = useStore.getState();\n    const content = selectors.currentContent(state);\n    const contentWithEntity = content.createEntity(entityType, mutability, entityData);\n    const entityKey = contentWithEntity.getLastCreatedEntityKey();\n    const selection = selectors.selection(state);\n    const contentStateWithEntity = Modifier.applyEntity(contentWithEntity, selection, entityKey);\n    return EditorState.push(state.editorState, contentStateWithEntity, 'apply-entity');\n};\n\n\n\n/*\nfunction BlockTypeControl({ configuration, defaultConfiguration }) {\n    const editor = useEditor();\n    const editorFocus = useEditorFocus();\n\n    const options = configuration.options || defaultConfiguration.options;\n\n    const [value, setValue] = React.useState('default');\n\n    const currentBlockType = useCurrentBlockType(options.map(option => option.value));\n\n    React.useEffect(() => {\n        setValue(currentBlockType);\n    }, [currentBlockType]);\n\n    const handleChange = React.useCallback((newValue) => {\n        setValue(newValue);\n        editor.onChange(getBlockTypeToggle(newValue));\n        editorFocus();\n    }, []);\n\n    return <DropdownControl options={options} onChange={handleChange} value={value} />;\n}\n\n*/\n\n\n/*\nfunction ToggleBlockTypeButtonControl({ blockType, children, text }) {\n    const editor = useEditor();\n    const editorFocus = useEditorFocus();\n\n    const onClick = () => {\n        editor.onChange(getBlockTypeToggle(blockType));\n        editorFocus();\n    };\n\n    return (\n        <ButtonControl text={text} onClick={onClick}>\n            {children}\n        </ButtonControl>\n    );\n}\n*/","import React from 'react';\n\nimport { EditorState } from 'draft-js';\nimport ButtonControl from '../core/ButtonControl';\nimport UndoIcon from '@mui/icons-material/Undo';\n\nimport { useTranslate, useEditorRef, useEditorState, useOnChange, getEditorState} from '../../../store';\n\nfunction UndoControl() {\n\n    const onChange = useOnChange();\n    //const editorState = useEditorState();\n    const translate = useTranslate();\n    const editorRef = useEditorRef();\n\n    // const editorFocus = useEditorFocus();\n\n\n    const onClick = () => {\n    //    onChange(EditorState.undo(editorState));\n        onChange(EditorState.undo(getEditorState()));\n        editorRef.current.focus();\n    };\n\n    return (\n        <ButtonControl onClick={onClick} text={translate('controls.undo.title')}>\n            <UndoIcon />\n        </ButtonControl>\n    );\n}\n\nexport default UndoControl;\n","import React from 'react';\nimport { EditorState } from 'draft-js';\nimport ButtonControl from '../core/ButtonControl';\nimport RedoIcon from '@mui/icons-material/Redo';\nimport { useTranslate, useEditorRef, useEditorState, useOnChange, getEditorState} from '../../../store';\n\nfunction RedoControl() {\n    const onChange = useOnChange();\n    //const editorState = useEditorState();\n    const translate = useTranslate();\n    const editorRef = useEditorRef();\n\n    const onClick = () => {\n        onChange(EditorState.redo(getEditorState()));\n        editorRef.current.focus();\n    };\n\n    return (\n        <ButtonControl onClick={onClick} text={translate('controls.redo.title')}>\n            <RedoIcon />\n        </ButtonControl>\n    );\n}\n\nexport default RedoControl;\n","import React from 'react';\nimport { EditorContext } from '../index';\n\nexport default function useEditor() {\n    return React.useContext(EditorContext);\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { RichUtils } from 'draft-js';\nimport ButtonControl from './ButtonControl';\n\nimport { useEditorRef,  useOnChange, getEditorState, hasSelectionStyle, useSelectionCollapsed} from '../../../store';\n\n\nToggleInlineStyleButtonControl.propTypes = {\n    inlineStyle: PropTypes.string.isRequired,\n    children: PropTypes.any.isRequired,\n    text: PropTypes.any,\n};\n\nfunction ToggleInlineStyleButtonControl({ inlineStyle, children, text }) {\n    const editorRef = useEditorRef();\n    const isCollapsed = useSelectionCollapsed();\n    const onChange = useOnChange();\n\n    const [isActive, setIsActive] = React.useState(false);\n\n    React.useEffect(() => {\n        setIsActive(hasSelectionStyle(inlineStyle));\n    }, [inlineStyle]);\n\n    const onClick = () => {\n        const newEditorState = RichUtils.toggleInlineStyle(getEditorState(), inlineStyle);\n        onChange(newEditorState);\n        editorRef.current.focus();\n    };\n\n    return (\n        <ButtonControl\n            text={text}\n            onClick={onClick}\n            active={isActive}\n            disabled={isCollapsed}>\n            {children}\n        </ButtonControl>\n    );\n}\n\nexport default ToggleInlineStyleButtonControl;\n","export default {\n    BOLD: 'BOLD',\n    ITALIC: 'ITALIC',\n    UNDERLINE: 'UNDERLINE',\n    STRIKETHROUGH: 'STRIKETHROUGH',\n    CODE: 'CODE',\n    FONT_FAMILY: 'FONT_FAMILY',\n    FONT_SIZE: 'FONT_SIZE',\n    FONT_COLOR: 'FONT_COLOR',\n    FONT_BACKGROUND: 'FONT_BACKGROUND',\n};\n","import React from 'react';\nimport useEditor from '../../../hooks/useEditor';\nimport ToggleInlineStyleButtonControl from '../core/ToggleInlineStyleButtonControl';\nimport FormatBoldIcon from '@mui/icons-material/FormatBold';\nimport inlineStyles from '../../../types/inlineStyles';\n\nimport { useTranslate, useEditorRef, useEditorState, useOnChange, getEditorState} from '../../../store';\n\nfunction BoldControl() {\n    const translate = useTranslate();\n\n    return (\n        <ToggleInlineStyleButtonControl\n            inlineStyle={inlineStyles.BOLD}\n            text={translate('controls.bold.title')}>\n            <FormatBoldIcon />\n        </ToggleInlineStyleButtonControl>\n    );\n}\n\nexport default BoldControl;\n","import React from 'react';\nimport useEditor from '../../../hooks/useEditor';\nimport ToggleInlineStyleButtonControl from '../core/ToggleInlineStyleButtonControl';\nimport FormatItalicIcon from '@mui/icons-material/FormatItalic';\nimport inlineStyles from '../../../types/inlineStyles';\n\nfunction ItalicControl() {\n    const editor = useEditor();\n\n    return (\n        <ToggleInlineStyleButtonControl\n            inlineStyle={inlineStyles.ITALIC}\n            text={editor.translate('controls.italic.title')}>\n            <FormatItalicIcon />\n        </ToggleInlineStyleButtonControl>\n    );\n}\n\nexport default ItalicControl;\n","import React from 'react';\nimport useEditor from '../../../hooks/useEditor';\nimport ToggleInlineStyleButtonControl from '../core/ToggleInlineStyleButtonControl';\nimport FormatUnderlinedIcon from '@mui/icons-material/FormatUnderlined';\nimport inlineStyles from '../../../types/inlineStyles';\n\nfunction UnderlineControl() {\n    const editor = useEditor();\n\n    return (\n        <ToggleInlineStyleButtonControl\n            inlineStyle={inlineStyles.UNDERLINE}\n            text={editor.translate('controls.underline.title')}>\n            <FormatUnderlinedIcon />\n        </ToggleInlineStyleButtonControl>\n    );\n}\n\nexport default UnderlineControl;\n","import React from 'react';\nimport useEditor from '../../../hooks/useEditor';\nimport ToggleInlineStyleButtonControl from '../core/ToggleInlineStyleButtonControl';\nimport FormatStrikethroughIcon from '@mui/icons-material/FormatStrikethrough';\nimport inlineStyles from '../../../types/inlineStyles';\n\nfunction StrikethroughControl() {\n    const editor = useEditor();\n\n    return (\n        <ToggleInlineStyleButtonControl\n            inlineStyle={inlineStyles.STRIKETHROUGH}\n            text={editor.translate('controls.strikethrough.title')}>\n            <FormatStrikethroughIcon />\n        </ToggleInlineStyleButtonControl>\n    );\n}\n\nexport default StrikethroughControl;\n","import React from 'react';\n\nexport default function useEditorState(editor) {\n    const [state, setState] = React.useState(editor.getEditorState());\n\n    const currentState = editor.getEditorState();\n\n    React.useEffect(() => {\n        setState(currentState);\n    }, [currentState])\n\n    return state;\n}\n","import React from 'react';\nimport useEditor from './useEditor';\n\nexport default function useEditorFocus() {\n    const editor = useEditor();\n    const [changesCount, setChangesCount] = React.useState(0);\n\n    React.useEffect(() => {\n        if (changesCount > 0) editor.ref.focus();\n    }, [changesCount, editor.ref]);\n\n    return () => {\n        setChangesCount((currentChangesCount) => currentChangesCount + 1);\n    };\n}\n","export default {\n    LINK: 'LINK',\n    IMAGE: 'IMAGE',\n};\n","import { EditorState, Modifier, RichUtils } from 'draft-js';\n\nexport const toggleMappedInlineStyle = (editorState, styleKeys, newInlineStyle) => {\n    const selection = editorState.getSelection();\n\n    // Turn off the other mapped inline styled in selection\n    const newContentState = styleKeys.reduce(\n        (contentState, inlineStyle) =>\n            Modifier.removeInlineStyle(contentState, selection, inlineStyle),\n        editorState.getCurrentContent()\n    );\n\n    let newEditorState = EditorState.push(editorState, newContentState, 'change-inline-style');\n\n    const currentStyle = editorState.getCurrentInlineStyle();\n\n    if (selection.isCollapsed()) {\n        newEditorState = currentStyle.reduce((state, inlineStyle) => {\n            return RichUtils.toggleInlineStyle(state, inlineStyle);\n        }, newEditorState);\n    }\n    // If the inline style is being toggled on, apply it.\n    if (!currentStyle.has(newInlineStyle)) {\n        newEditorState = RichUtils.toggleInlineStyle(newEditorState, newInlineStyle);\n    }\n\n    return newEditorState;\n};\n\nexport const getCurrentMappedInlineStyle = (editorState, styleKeys, defaultInlineStyle = null) => {\n    const currentStyle = editorState.getCurrentInlineStyle();\n    return (\n        currentStyle.find((inlineStyle) => styleKeys.includes(inlineStyle)) || defaultInlineStyle\n    );\n};\n\nexport const hasAllSelectionTheInlineStyle = (editorState, inlineStyle) => {\n    const selection = editorState.getSelection();\n    const startKey = selection.getStartKey();\n    const startOffset = selection.getStartOffset();\n    const endKey = selection.getEndKey();\n    const endOffset = selection.getEndOffset();\n\n    const currentContent = editorState.getCurrentContent();\n\n    let block = currentContent.getBlockForKey(startKey);\n    let allHasTheInlineStyle = true;\n\n    const styleRangesCallback = (block) => (start, end) => {\n        const expectedStart = block.getKey() === startKey ? startOffset : 0;\n        const expectedEnd = block.getKey() === endKey ? endOffset : block.getLength() - 1;\n        allHasTheInlineStyle = start <= expectedStart && end >= expectedEnd;\n    };\n\n    while (block && allHasTheInlineStyle) {\n        allHasTheInlineStyle = false;\n        block.findStyleRanges(\n            (character) => character.hasStyle(inlineStyle),\n            styleRangesCallback(block)\n        );\n        if (block.getKey() !== endKey) break;\n        block = currentContent.getBlockAfter(block.getKey());\n    }\n\n    return allHasTheInlineStyle;\n};\n\nexport const getCurrentBlockType = (editorState, availableBlockTypes) => {\n    const blockType = RichUtils.getCurrentBlockType(editorState);\n    if (availableBlockTypes.find((avBlockType) => avBlockType === blockType)) return blockType;\n    return 'default';\n};\n\nexport const applyEntityToCurrentSelection = (editorState, entityType, mutability, entityData) => {\n    const content = editorState.getCurrentContent();\n    const contentWithEntity = content.createEntity(entityType, mutability, entityData);\n    const entityKey = contentWithEntity.getLastCreatedEntityKey();\n    const selection = editorState.getSelection();\n    const contentStateWithEntity = Modifier.applyEntity(contentWithEntity, selection, entityKey);\n    return EditorState.push(editorState, contentStateWithEntity, 'apply-entity');\n};\n","import React from 'react';\nimport useEditorState from '../../../hooks/useEditorState';\nimport useEditor from '../../../hooks/useEditor';\nimport useEditorFocus from '../../../hooks/useEditorFocus';\nimport ButtonControl from '../core/ButtonControl';\nimport LinkIcon from '@mui/icons-material/Link';\nimport Dialog from '@mui/material/Dialog';\nimport DialogContent from '@mui/material/DialogContent';\nimport TextField from '@mui/material/TextField';\nimport DialogActions from '@mui/material/DialogActions';\nimport Button from '@mui/material/Button';\nimport entities from '../../../types/entities';\nimport { applyEntityToCurrentSelection } from '../../../utils/editorStateUtils';\n\nfunction LinkAddControl() {\n    const editor = useEditor();\n  const editorState = useEditorState(editor);\n\n    const editorFocus = useEditorFocus();\n    const [isDialogOpened, setIsDialogOpened] = React.useState(false);\n    const [link, setLink] = React.useState('');\n    const formRef = React.createRef();\n\n    const onClick = () => {\n        setLink('');\n        setIsDialogOpened(true);\n    };\n\n    const handleCloseDialog = () => {\n        setIsDialogOpened(false);\n    };\n\n    const onChangeLink = (ev) => {\n        setLink(ev.currentTarget.value);\n    };\n\n    const handleSubmit = (ev) => {\n        ev.preventDefault();\n        if (link === '') return;\n        handleCloseDialog();\n        editor.onChange(\n            applyEntityToCurrentSelection(editorState, entities.LINK, 'MUTABLE', {\n                url: link,\n            })\n        );\n        editorFocus();\n    };\n\n    return (\n        <React.Fragment>\n            <ButtonControl\n                onClick={onClick}\n                text={editor.translate('controls.linkAdd.title')}\n                disabled={editorState.getSelection().isCollapsed()}>\n                <LinkIcon />\n            </ButtonControl>\n            <Dialog open={isDialogOpened} onClose={handleCloseDialog}>\n                <form ref={formRef} onSubmit={handleSubmit}>\n                    <DialogContent>\n                        <TextField\n                            autoFocus\n                            label={editor.translate('controls.linkAdd.labels.link')}\n                            value={link}\n                            onChange={onChangeLink}\n                            fullWidth\n                        />\n                    </DialogContent>\n                    <DialogActions>\n                        <Button type=\"button\" onClick={handleCloseDialog} color=\"primary\">\n                            {editor.translate('controls.linkAdd.actions.cancel')}\n                        </Button>\n                        <Button type=\"submit\" color=\"primary\" disabled={link === ''}>\n                            {editor.translate('controls.linkAdd.actions.add')}\n                        </Button>\n                    </DialogActions>\n                </form>\n            </Dialog>\n        </React.Fragment>\n    );\n}\n\nexport default LinkAddControl;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport useEditorState from '../../../hooks/useEditorState';\nimport useEditor from '../../../hooks/useEditor';\nimport useEditorFocus from '../../../hooks/useEditorFocus';\nimport { RichUtils, SelectionState } from 'draft-js';\nimport Link from '@mui/material/Link';\nimport entities from '../../../types/entities';\nimport Popover from '@mui/material/Popover';\nimport Button from '@mui/material/Button';\nimport ButtonGroup from '@mui/material/ButtonGroup';\nimport LaunchIcon from '@mui/icons-material/Launch';\nimport LinkOffIcon from '@mui/icons-material/LinkOff';\n\nconst linkStrategy = (contentBlock, callback, contentState) => {\n    contentBlock.findEntityRanges((character) => {\n        const entityKey = character.getEntity();\n        return entityKey !== null && contentState.getEntity(entityKey).getType() === entities.LINK;\n    }, callback);\n};\n\nlet showOptions;\nlet hideOptions;\n\nconst EditorLink = ({ contentState, entityKey, blockKey, start, end, children }) => {\n    const [anchorEl, setAnchorEl] = React.useState(null);\n    const editor = useEditor();\n\n    const editorFocus = useEditorFocus();\n    const { url } = contentState.getEntity(entityKey).getData();\n\n    showOptions = showOptions || function (setEl, ev) {\n        setEl(ev.currentTarget);\n    }.bind(null, setAnchorEl);\n\n    hideOptions = hideOptions || function (setEl) {\n        setEl(null);\n    }.bind(null, setAnchorEl);\n\n    const openLink = (ev) => {\n        ev.preventDefault();\n        ev.stopPropagation();\n        window.open(url, '_blank');\n    };\n\n    const removeLink = (ev) => {\n        ev.preventDefault();\n        ev.stopPropagation();\n        const linkSelection = SelectionState.createEmpty(blockKey).merge({\n            anchorKey: blockKey,\n            anchorOffset: start,\n            focusKey: blockKey,\n            focusOffset: end,\n        });\n\n        editor.onChange(RichUtils.toggleLink(editor.getEditorState(), linkSelection, null));\n        editorFocus();\n    };\n\n    return (\n        <React.Fragment>\n            <Link\n                href={url}\n                rel=\"noopener noreferrer\"\n                target=\"_blank\"\n                aria-label={url}\n                onClick={showOptions}>\n                {children}\n            </Link>\n            <Popover\n                open={Boolean(anchorEl)}\n                onClose={hideOptions}\n                anchorEl={anchorEl}\n                anchorOrigin={{\n                    vertical: 'bottom',\n                    horizontal: 'center',\n                }}\n                transformOrigin={{\n                    vertical: 'top',\n                    horizontal: 'center',\n                }}>\n                <ButtonGroup size=\"small\" aria-label=\"Link options\">\n                    <Button onClick={openLink} title={`Open ${url}`}>\n                        <LaunchIcon />\n                    </Button>\n                    <Button onClick={removeLink} title=\"Remove link\">\n                        <LinkOffIcon />\n                    </Button>\n                </ButtonGroup>\n            </Popover>\n        </React.Fragment>\n    );\n};\n\nEditorLink.propTypes = {\n    contentState: PropTypes.object.isRequired,\n    entityKey: PropTypes.string.isRequired,\n    blockKey: PropTypes.string.isRequired,\n    start: PropTypes.number.isRequired,\n    end: PropTypes.number.isRequired,\n    children: PropTypes.any,\n};\n\nconst linkAddPlugin = () => ({\n    decorators: [\n        {\n            strategy: linkStrategy,\n            component: EditorLink,\n        },\n    ],\n});\n\nexport default linkAddPlugin;\n","import React from 'react';\nimport useEditorState from '../../../hooks/useEditorState';\nimport useEditor from '../../../hooks/useEditor';\nimport { RichUtils } from 'draft-js';\nimport ButtonControl from '../core/ButtonControl';\nimport LinkOffIcon from '@mui/icons-material/LinkOff';\n\nfunction LinkRemoveControl() {\n    const editor = useEditor();\n  const editorState = useEditorState(editor);\n\n\n    const onClick = () => {\n        const selection = editorState.getSelection();\n        editor.onChange(RichUtils.toggleLink(editorState, selection, null));\n    };\n\n    return (\n        <ButtonControl\n            onClick={onClick}\n            text={editor.translate('controls.linkRemove.title')}\n            disabled={editorState.getSelection().isCollapsed()}>\n            <LinkOffIcon />\n        </ButtonControl>\n    );\n}\n\nexport default LinkRemoveControl;\n","export const LANG_PREFIX = 'lang::';\n","import { LANG_PREFIX } from '../types/lang';\n\nexport const translateLiteralWithPrefix = (literal, translateFn) =>\n    (typeof literal === 'string' || literal instanceof String) &&\n    literal.substr(0, LANG_PREFIX.length) === LANG_PREFIX\n        ? translateFn(literal.substr(LANG_PREFIX.length))\n        : literal;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Select from '@mui/material/Select';\nimport MenuItem from '@mui/material/MenuItem';\nimport makeStyles from '@mui/styles/makeStyles';\nimport useEditor from '../../../hooks/useEditor';\nimport { translateLiteralWithPrefix } from '../../../utils/translateUtils';\n\nconst useStyles = makeStyles((theme) => ({\n    selectControl: {\n        margin: theme.spacing(1),\n    },\n}));\n\nfunction DropdownControl({ value, onChange, options, minWidth = 120, ...rest }) {\n    const classes = useStyles();\n    const editor = useEditor();\n\n    return (\n        <Select\n            value={value}\n            onChange={(ev) => onChange(ev.target.value)}\n            className={classes.selectControl}\n            style={{ minWidth }}\n            {...rest}>\n            {options.map((option) => (\n                <MenuItem key={option.value || 'empty'} value={option.value}>\n                    {option.text ? translateLiteralWithPrefix(option.text, editor.translate) : ''}\n                </MenuItem>\n            ))}\n        </Select>\n    );\n}\n\nDropdownControl.propTypes = {\n    value: PropTypes.string.isRequired,\n    onChange: PropTypes.func.isRequired,\n    options: PropTypes.array.isRequired,\n    minWidth: PropTypes.number,\n};\n\nexport default DropdownControl;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport DropdownControl from '../core/DropdownControl';\nimport useEditor from '../../../hooks/useEditor';\nimport useEditorState from '../../../hooks/useEditorState';\nimport useEditorFocus from '../../../hooks/useEditorFocus';\nimport { RichUtils } from 'draft-js';\nimport { getCurrentBlockType } from '../../../utils/editorStateUtils';\n\nfunction BlockTypeControl({ configuration, defaultConfiguration }) {\n    const editor = useEditor();\n\n    const editorFocus = useEditorFocus();\n    const options = configuration.options || defaultConfiguration.options;\n    const [value, setValue] = React.useState('default');\n\n    React.useEffect(() => {\n        setValue(\n            getCurrentBlockType(\n                editor.getEditorState(),\n                options.map((option) => option.value)\n            )\n        );\n    }, [options.toString()]);\n\n    const handleChange = React.useCallback((newValue) => {\n        setValue(newValue);\n        const newEditorState = RichUtils.toggleBlockType(\n            editor.getEditorState(),\n            newValue === 'normal' ? '' : newValue\n        );\n        editor.onChange(newEditorState);\n        editorFocus();\n    }, []);\n\n    return <DropdownControl options={options} onChange={handleChange} value={value} />;\n}\n\nBlockTypeControl.propTypes = {\n    configuration: PropTypes.any,\n    defaultConfiguration: PropTypes.any.isRequired,\n};\n\nexport default BlockTypeControl;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport useEditor from '../../../hooks/useEditor';\nimport useEditorState from '../../../hooks/useEditorState';\nimport useEditorFocus from '../../../hooks/useEditorFocus';\nimport { RichUtils } from 'draft-js';\nimport ButtonControl from './ButtonControl';\n\nToggleBlockTypeButtonControl.propTypes = {\n    blockType: PropTypes.string.isRequired,\n    children: PropTypes.any.isRequired,\n    text: PropTypes.any,\n};\n\nfunction ToggleBlockTypeButtonControl({ blockType, children, text }) {\n    const editor = useEditor();\n\n    const editorFocus = useEditorFocus();\n\n    const onClick = () => {\n        const newEditorState = RichUtils.toggleBlockType(editor.getEditorState(), blockType);\n        editor.onChange(newEditorState);\n        editorFocus();\n    };\n\n    return (\n        <ButtonControl text={text} onClick={onClick}>\n            {children}\n        </ButtonControl>\n    );\n}\n\nexport default ToggleBlockTypeButtonControl;\n","import React from 'react';\nimport useEditor from '../../../hooks/useEditor';\nimport ToggleBlockTypeButtonControl from '../core/ToggleBlockTypeButtonControl';\nimport FormatListBulletedIcon from '@mui/icons-material/FormatListBulleted';\n\nfunction UnorderedListControl() {\n    const editor = useEditor();\n\n    return (\n        <ToggleBlockTypeButtonControl\n            blockType=\"unordered-list-item\"\n            text={editor.translate('controls.unorderedList.title')}>\n            <FormatListBulletedIcon />\n        </ToggleBlockTypeButtonControl>\n    );\n}\n\nexport default UnorderedListControl;\n","export default {\n    H1: 'header-one',\n    H2: 'header-two',\n    H3: 'header-three',\n    H4: 'header-four',\n    H5: 'header-five',\n    H6: 'header-six',\n    UL: 'unordered-list-item',\n    OL: 'ordered-list-item',\n    BLOCKQUOTE: 'blockquote',\n    CODE_BLOCK: 'code-block',\n    UNSTYLED: 'unstyled',\n    ATOMIC: 'atomic',\n};\n","import React from 'react';\nimport useEditor from '../../../hooks/useEditor';\nimport ToggleBlockTypeButtonControl from '../core/ToggleBlockTypeButtonControl';\nimport FormatListNumberedIcon from '@mui/icons-material/FormatListNumbered';\nimport blockStyles from '../../../types/blockStyles';\n\nfunction OrderedListControl() {\n    const editor = useEditor();\n\n    return (\n        <ToggleBlockTypeButtonControl\n            blockType={blockStyles.OL}\n            text={editor.translate('controls.orderedList.title')}>\n            <FormatListNumberedIcon />\n        </ToggleBlockTypeButtonControl>\n    );\n}\n\nexport default OrderedListControl;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport useEditorState from '../../../hooks/useEditorState';\nimport useEditor from '../../../hooks/useEditor';\nimport useEditorFocus from '../../../hooks/useEditorFocus';\nimport DropdownControl from '../core/DropdownControl';\nimport inlineStyles from '../../../types/inlineStyles';\nimport {\n    getCurrentMappedInlineStyle,\n    toggleMappedInlineStyle,\n} from '../../../utils/editorStateUtils';\n\nfunction FontFamilyControl({ pluginData }) {\n    const editor = useEditor();\n    const editorState = useEditorState(editor);\n    const editorFocus = useEditorFocus();\n    const [selectedFontFamilyStyle, setSelectedFontFamilyStyle] = React.useState(\n        `${inlineStyles.FONT_FAMILY}-default`\n    );\n    const styleKeys = Object.keys(pluginData.customStyleMap);\n\n    React.useEffect(() => {\n        setSelectedFontFamilyStyle(\n            getCurrentMappedInlineStyle(\n                editorState,\n                styleKeys,\n                `${inlineStyles.FONT_FAMILY}-default`\n            )\n        );\n    }, [editorState, styleKeys]);\n\n    const handleChange = (newInlineStyle) => {\n        setSelectedFontFamilyStyle(newInlineStyle);\n\n        const newEditorState = toggleMappedInlineStyle(\n            editorState,\n            styleKeys,\n            newInlineStyle\n        );\n        editor.onChange(newEditorState);\n        editorFocus();\n    };\n\n    return (\n        <DropdownControl\n            options={styleKeys.map((inlineStyle) => ({\n                value: inlineStyle,\n                text: pluginData.customStyleMap[inlineStyle].fontFamily ? (\n                    <span\n                        style={{\n                            fontFamily: pluginData.customStyleMap[inlineStyle].fontFamily,\n                        }}>\n                        {pluginData.customStyleMap[inlineStyle].fontFamily}\n                    </span>\n                ) : (\n                    'default'\n                ),\n            }))}\n            onChange={handleChange}\n            value={selectedFontFamilyStyle}\n        />\n    );\n}\n\nFontFamilyControl.propTypes = {\n    pluginData: PropTypes.any.isRequired,\n};\n\nexport default FontFamilyControl;\n","import inlineStyles from '../../../types/inlineStyles';\n\nconst fontFamilyPlugin = (configuration, defaultConfiguration) => {\n    const fontFamilies = configuration.options || defaultConfiguration.options;\n    const customStyleMap = {};\n    for (const fontFamily of fontFamilies) {\n        customStyleMap[`${inlineStyles.FONT_FAMILY}-${fontFamily}`] =\n            fontFamily === 'default'\n                ? {}\n                : {\n                      fontFamily,\n                  };\n    }\n    return { customStyleMap };\n};\n\nexport default fontFamilyPlugin;\n","import React from 'react';\nimport useEditorState from '../../../hooks/useEditorState';\nimport useEditor from '../../../hooks/useEditor';\nimport useEditorFocus from '../../../hooks/useEditorFocus';\nimport { Modifier, EditorState } from 'draft-js';\nimport FormatAlignLeftIcon from '@mui/icons-material/FormatAlignLeft';\nimport FormatAlignCenterIcon from '@mui/icons-material/FormatAlignCenter';\nimport FormatAlignRightIcon from '@mui/icons-material/FormatAlignRight';\nimport FormatAlignJustifyIcon from '@mui/icons-material/FormatAlignJustify';\nimport ButtonControl from '../core/ButtonControl';\n\nfunction TextAlignControl() {\n    const editor = useEditor();\n  const editorState = useEditorState(editor);\n\n    const editorFocus = useEditorFocus();\n    const [selectedTextAlign, setSelectedTextAlign] = React.useState(null);\n\n    React.useEffect(() => {\n        const selection = editorState.getSelection();\n        const currentBlock = editorState\n            .getCurrentContent()\n            .getBlockForKey(selection.getStartKey());\n        const blockData = currentBlock.getData();\n        if (blockData && blockData.get('textAlign')) {\n            setSelectedTextAlign(blockData.get('textAlign'));\n        } else {\n            setSelectedTextAlign(null);\n        }\n    }, [editorState]);\n\n    const toggle = (textAlign) => {\n        setSelectedTextAlign(textAlign);\n\n        const newContentState = Modifier.mergeBlockData(\n            editorState.getCurrentContent(),\n            editorState.getSelection(),\n            { textAlign }\n        );\n        editor.onChange(EditorState.push(editorState, newContentState, 'change-block-data'));\n        editorFocus();\n    };\n\n    return (\n        <React.Fragment>\n            <ButtonControl\n                active={selectedTextAlign === 'left'}\n                onClick={() => toggle('left')}\n                text={editor.translate('controls.textAlign.actions.alignLeft')}>\n                <FormatAlignLeftIcon />\n            </ButtonControl>\n            <ButtonControl\n                active={selectedTextAlign === 'center'}\n                onClick={() => toggle('center')}\n                text={editor.translate('controls.textAlign.actions.alignCenter')}>\n                <FormatAlignCenterIcon />\n            </ButtonControl>\n            <ButtonControl\n                active={selectedTextAlign === 'right'}\n                onClick={() => toggle('right')}\n                text={editor.translate('controls.textAlign.actions.alignRight')}>\n                <FormatAlignRightIcon />\n            </ButtonControl>\n            <ButtonControl\n                active={selectedTextAlign === 'justify'}\n                onClick={() => toggle('justify')}\n                text={editor.translate('controls.textAlign.actions.justify')}>\n                <FormatAlignJustifyIcon />\n            </ButtonControl>\n        </React.Fragment>\n    );\n}\n\nTextAlignControl.propTypes = {};\n\nexport default TextAlignControl;\n","const textAlignPlugin = () => ({\n    blockStyleFn: (block) => {\n        const textAlign = block.getData() ? block.getData().get('textAlign') : null;\n        if (textAlign) {\n            return `mui-editor-${textAlign}-aligned-block`;\n        }\n\n        return '';\n    },\n});\n\nexport default textAlignPlugin;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport useEditor from '../../../hooks/useEditor';\nimport useEditorFocus from '../../../hooks/useEditorFocus';\nimport DropdownControl from '../core/DropdownControl';\nimport inlineStyles from '../../../types/inlineStyles';\nimport {\n    getCurrentMappedInlineStyle,\n    toggleMappedInlineStyle,\n} from '../../../utils/editorStateUtils';\nimport useEditorState from '../../../hooks/useEditorState';\n\n\nFontSizeControl.propTypes = {\n    pluginData: PropTypes.object.isRequired,\n};\n\nfunction FontSizeControl({ pluginData }) {\n    const editor = useEditor();\n  const editorState = useEditorState(editor);\n\n    const editorFocus = useEditorFocus();\n    const [selectedFontSizeStyle, setSelectedFontSizeStyle] = React.useState(\n        `${inlineStyles.FONT_SIZE}-default`\n    );\n    const styleKeys = Object.keys(pluginData.customStyleMap);\n\n    React.useEffect(() => {\n        setSelectedFontSizeStyle(\n            getCurrentMappedInlineStyle(\n                editorState,\n                styleKeys,\n                `${inlineStyles.FONT_SIZE}-default`\n            )\n        );\n    }, [editorState, styleKeys]);\n\n    const handleChange = (newInlineStyle) => {\n        setSelectedFontSizeStyle(newInlineStyle);\n        const newEditorState = toggleMappedInlineStyle(\n            editorState,\n            styleKeys,\n            newInlineStyle\n        );\n        editor.onChange(newEditorState);\n        editorFocus();\n    };\n\n    return (\n        <DropdownControl\n            options={styleKeys.map((inlineStyle) => ({\n                text: pluginData.customStyleMap[inlineStyle].fontSize ? (\n                    <span style={{ fontSize: pluginData.customStyleMap[inlineStyle].fontSize }}>\n                        {pluginData.customStyleMap[inlineStyle].fontSize}\n                    </span>\n                ) : (\n                    'default'\n                ),\n                value: inlineStyle,\n            }))}\n            onChange={handleChange}\n            renderValue={(style) =>\n                pluginData.customStyleMap[style].fontSize ||\n                editor.translate('controls.fontSize.labels.default')\n            }\n            value={selectedFontSizeStyle}\n            minWidth={50}\n        />\n    );\n}\n\nexport default FontSizeControl;\n","import inlineStyles from '../../../types/inlineStyles';\n\nconst fontSizePlugin = (configuration, defaultConfiguration) => {\n    const fontSizes = configuration.options || defaultConfiguration.options;\n    const customStyleMap = {};\n    for (const fontSize of fontSizes) {\n        customStyleMap[`${inlineStyles.FONT_SIZE}-${fontSize}`] =\n            fontSize === 'default' ? {} : { fontSize };\n    }\n    return { customStyleMap };\n};\n\nexport default fontSizePlugin;\n","// Created by Andreas Wik\nexport const isLightOrDark = (color) => {\n    let r, g, b;\n    // Check the format of the color, HEX or RGB?\n    if (color.match(/^rgb/)) {\n        // If HEX --> store the red, green, blue values in separate variables\n        color = color.match(/^rgba?\\((\\d+),\\s*(\\d+),\\s*(\\d+)(?:,\\s*(\\d+(?:\\.\\d+)?))?\\)$/);\n\n        r = color[1];\n        g = color[2];\n        b = color[3];\n    } else {\n        // If RGB --> Convert it to HEX: http://gist.github.com/983661\n        color = +('0x' + color.slice(1).replace(color.length < 5 && /./g, '$&$&'));\n\n        r = color >> 16;\n        g = (color >> 8) & 255;\n        b = color & 255;\n    }\n\n    // HSP (Highly Sensitive Poo) equation from http://alienryderflex.com/hsp.html\n    const hsp = Math.sqrt(0.299 * (r * r) + 0.587 * (g * g) + 0.114 * (b * b));\n\n    // Using the HSP value, determine whether the color is light or dark\n    if (hsp > 127.5) {\n        return 'light';\n    } else {\n        return 'dark';\n    }\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ButtonControl from '../ButtonControl';\nimport Popover from '@mui/material/Popover';\nimport Tooltip from '@mui/material/Tooltip';\nimport FormatColorResetIcon from '@mui/icons-material/FormatColorReset';\nimport CheckIcon from '@mui/icons-material/Check';\nimport { isLightOrDark } from '../../../../utils/colorUtils';\nimport Button from '@mui/material/Button';\nimport makeStyles from '@mui/styles/makeStyles';\n\nconst useStyles = makeStyles({\n    colorRow: {\n        display: 'flex',\n        alignContent: 'center',\n        alignItems: 'center',\n        padding: 5,\n    },\n    colorItem: {\n        height: 25,\n        width: 25,\n        borderRadius: '50%',\n        margin: 3,\n        border: 'solid 1px #c4c4c4',\n        cursor: 'pointer',\n        display: 'flex',\n        alignContent: 'center',\n        alignItems: 'center',\n    },\n});\n\nfunction ColorSelectorControl({\n    selectedColor,\n    onSelectColor,\n    colors,\n    colorsPerRow = 10,\n    children,\n    ...rest\n}) {\n    const classes = useStyles();\n    const [anchorEl, setAnchorEl] = React.useState(null);\n    const menuId = Math.random().toString(36).substring(8);\n    const colorRows = [[]];\n    for (let i = 0, rowI = 0; i < colors.length; i++) {\n        if (i % colorsPerRow === 0) {\n            rowI++;\n            colorRows[rowI] = [];\n        }\n        colorRows[rowI].push(colors[i]);\n    }\n\n    const handleOpen = (ev) => {\n        setAnchorEl(ev.currentTarget);\n    };\n\n    const handleClose = () => {\n        setAnchorEl(null);\n    };\n\n    return (\n        <React.Fragment>\n            <ButtonControl\n                onClick={handleOpen}\n                aria-controls={menuId}\n                aria-haspopup=\"true\"\n                badgeColor={selectedColor ? selectedColor.color : null}\n                {...rest}>\n                {children}\n            </ButtonControl>\n            <Popover\n                id={menuId}\n                anchorEl={anchorEl}\n                anchorOrigin={{\n                    vertical: 'bottom',\n                    horizontal: 'left',\n                }}\n                transformOrigin={{\n                    vertical: 'top',\n                    horizontal: 'left',\n                }}\n                keepMounted\n                open={Boolean(anchorEl)}\n                onClose={handleClose}>\n                <React.Fragment>\n                    <Button\n                        startIcon={<FormatColorResetIcon />}\n                        fullWidth\n                        color=\"secondary\"\n                        onClick={() => {\n                            handleClose();\n                            onSelectColor(null);\n                        }}>\n                        None\n                    </Button>\n                    {colorRows.map((colorRow, colorRowI) => (\n                        <div key={`color-row-${colorRowI}`} className={classes.colorRow}>\n                            {colorRow.map((colorData) => (\n                                <Tooltip key={colorData.value} title={colorData.text}>\n                                    <div\n                                        onClick={() => {\n                                            handleClose();\n                                            onSelectColor(colorData);\n                                        }}\n                                        className={classes.colorItem}\n                                        style={{\n                                            backgroundColor: colorData.color,\n                                        }}>\n                                        {selectedColor &&\n                                        colorData.value === selectedColor.value ? (\n                                            <CheckIcon\n                                                style={{\n                                                    color:\n                                                        isLightOrDark(colorData.color) === 'dark'\n                                                            ? '#fff'\n                                                            : '#000',\n                                                }}\n                                            />\n                                        ) : null}\n                                    </div>\n                                </Tooltip>\n                            ))}\n                        </div>\n                    ))}\n                </React.Fragment>\n            </Popover>\n        </React.Fragment>\n    );\n}\n\nColorSelectorControl.propTypes = {\n    selectedColor: PropTypes.object,\n    onSelectColor: PropTypes.func.isRequired,\n    colors: PropTypes.array.isRequired,\n    colorsPerRow: PropTypes.number,\n    children: PropTypes.any,\n};\n\nexport default ColorSelectorControl;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ColorSelectorControl from '../core/ColorSelectorControl';\nimport useEditorState from '../../../hooks/useEditorState';\nimport useEditor from '../../../hooks/useEditor';\nimport useEditorFocus from '../../../hooks/useEditorFocus';\nimport {\n    getCurrentMappedInlineStyle,\n    toggleMappedInlineStyle,\n} from '../../../utils/editorStateUtils';\n\nfunction ToggleInlineStyleColorSelectorControl({\n    configuration,\n    defaultConfiguration,\n    pluginData,\n    colorCssProp,\n    inlineStyle,\n    text,\n    children,\n}) {\n    const editor = useEditor();\n    const editorState = useEditorState(editor);\n    const editorFocus = useEditorFocus();\n    const [selectedColor, setSelectedColor] = React.useState(null);\n    const options = configuration.options || defaultConfiguration.options;\n\n    React.useEffect(() => {\n        const selectededInlineStyle = getCurrentMappedInlineStyle(\n            editorState,\n            Object.keys(pluginData.customStyleMap),\n            null\n        );\n        setSelectedColor(\n            selectededInlineStyle && pluginData.customStyleMap[selectededInlineStyle]\n                ? {\n                      color: pluginData.customStyleMap[selectededInlineStyle][colorCssProp],\n                      value: selectededInlineStyle,\n                  }\n                : null\n        );\n    }, [editorState, pluginData.customStyleMap, colorCssProp]);\n\n    const handleSelectColor = (selectedColorData) => {\n        setSelectedColor(selectedColorData);\n        const newEditorState = toggleMappedInlineStyle(\n            editorState,\n            Object.keys(pluginData.customStyleMap),\n            selectedColorData ? selectedColorData.value : ''\n        );\n        editor.onChange(newEditorState);\n        editorFocus();\n    };\n\n    return (\n        <ColorSelectorControl\n            text={text}\n            onSelectColor={handleSelectColor}\n            selectedColor={selectedColor}\n            colorsPerRow={configuration.colorsPerRow || defaultConfiguration.colorsPerRow}\n            disabled={editorState.getSelection().isCollapsed()}\n            colors={options.map((option) => ({\n                text: option.text,\n                color: option.value,\n                value: `${inlineStyle}-${option.value}`,\n            }))}>\n            {children}\n        </ColorSelectorControl>\n    );\n}\n\nToggleInlineStyleColorSelectorControl.propTypes = {\n    configuration: PropTypes.object,\n    defaultConfiguration: PropTypes.object.isRequired,\n    pluginData: PropTypes.object.isRequired,\n    colorCssProp: PropTypes.string.isRequired,\n    inlineStyle: PropTypes.string.isRequired,\n    text: PropTypes.string,\n    children: PropTypes.any,\n};\n\nexport default ToggleInlineStyleColorSelectorControl;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport useEditor from '../../../hooks/useEditor';\nimport FormatColorTextIcon from '@mui/icons-material/FormatColorText';\nimport inlineStyles from '../../../types/inlineStyles';\nimport ToggleInlineStyleColorSelectorControl from '../core/ToggleInlineStyleColorSelectorControl';\n\nfunction FontColorControl({ configuration, defaultConfiguration, pluginData }) {\n    const editor = useEditor();\n\n    return (\n        <ToggleInlineStyleColorSelectorControl\n            text={editor.translate('controls.fontColor.title')}\n            configuration={configuration}\n            defaultConfiguration={defaultConfiguration}\n            inlineStyle={inlineStyles.FONT_COLOR}\n            pluginData={pluginData}\n            colorCssProp=\"color\">\n            <FormatColorTextIcon />\n        </ToggleInlineStyleColorSelectorControl>\n    );\n}\n\nFontColorControl.propTypes = {\n    configuration: PropTypes.object,\n    defaultConfiguration: PropTypes.object.isRequired,\n    pluginData: PropTypes.object.isRequired,\n};\n\nexport default FontColorControl;\n","import inlineStyles from '../../../types/inlineStyles';\n\nconst fontColorPlugin = (configuration, defaultConfiguration) => {\n    const fontColors = configuration.options || defaultConfiguration.options;\n    const customStyleMap = {};\n    for (const fontColor of fontColors) {\n        customStyleMap[`${inlineStyles.FONT_COLOR}-${fontColor.value}`] = {\n            color: fontColor.value,\n        };\n    }\n    return { customStyleMap };\n};\n\nexport default fontColorPlugin;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport useEditor from '../../../hooks/useEditor';\nimport BorderColorIcon from '@mui/icons-material/BorderColor';\nimport inlineStyles from '../../../types/inlineStyles';\nimport ToggleInlineStyleColorSelectorControl from '../core/ToggleInlineStyleColorSelectorControl';\n\nfunction FontBackgroundColorControl({ configuration, defaultConfiguration, pluginData }) {\n    const editor = useEditor();\n\n    return (\n        <ToggleInlineStyleColorSelectorControl\n            text={editor.translate('controls.fontBackgroundColor.title')}\n            configuration={configuration}\n            defaultConfiguration={defaultConfiguration}\n            inlineStyle={inlineStyles.FONT_BACKGROUND}\n            pluginData={pluginData}\n            colorCssProp=\"backgroundColor\">\n            <BorderColorIcon />\n        </ToggleInlineStyleColorSelectorControl>\n    );\n}\n\nFontBackgroundColorControl.propTypes = {\n    configuration: PropTypes.object,\n    defaultConfiguration: PropTypes.object.isRequired,\n    pluginData: PropTypes.object.isRequired,\n};\n\nexport default FontBackgroundColorControl;\n","import inlineStyles from '../../../types/inlineStyles';\n\nconst fontBackgroundColorPlugin = (configuration, defaultConfiguration) => {\n    const fontBgs = configuration.options || defaultConfiguration.options;\n    const customStyleMap = {};\n    for (const fontBg of fontBgs) {\n        customStyleMap[`${inlineStyles.FONT_BACKGROUND}-${fontBg.value}`] = {\n            backgroundColor: fontBg.value,\n        };\n    }\n    return { customStyleMap };\n};\n\nexport default fontBackgroundColorPlugin;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport makeStyles from '@mui/styles/makeStyles';\n\nconst useStyles = makeStyles((theme) => ({\n    imgWrapper: {\n        maxWidth: '100%',\n        maxHeight: 300,\n        overflow: 'auto',\n        marginTop: theme.spacing(2),\n        marginBottom: theme.spacing(2),\n    },\n}));\n\nfunction ImageToUpload({ width, height, src }) {\n    const classes = useStyles();\n\n    return (\n        <div className={classes.imgWrapper}>\n            <img alt=\"\" width={width} height={height} src={src} />\n        </div>\n    );\n}\n\nImageToUpload.propTypes = {\n    width: PropTypes.number.isRequired,\n    height: PropTypes.number.isRequired,\n    src: PropTypes.string.isRequired,\n};\n\nexport default ImageToUpload;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport useEditor from '../../../../../hooks/useEditor';\nimport Grid from '@mui/material/Grid';\nimport TextField from '@mui/material/TextField';\nimport IconButton from '@mui/material/IconButton';\nimport LockOpenIcon from '@mui/icons-material/LockOpen';\nimport LockIcon from '@mui/icons-material/Lock';\n\nfunction SizeInputs({\n    originalWidth,\n    originalHeight,\n    width,\n    height,\n    onChangeWidth,\n    onChangeHeight,\n}) {\n    const editor = useEditor();\n    const [maintainAspectRatio, setMaintainAspectRatio] = React.useState(true);\n    const aspectRatio = originalWidth / originalHeight;\n\n    const handleChangeWidth = (ev) => {\n        ev.stopPropagation();\n        const value = ev.currentTarget.value;\n        const w = value === '' || isNaN(value) ? 0 : parseInt(value);\n        onChangeWidth(w);\n        if (maintainAspectRatio) {\n            onChangeHeight(Math.round(w / aspectRatio));\n        }\n    };\n\n    const handleChangeHeight = (ev) => {\n        ev.stopPropagation();\n        const value = ev.currentTarget.value;\n        const h = value === '' || isNaN(value) ? 0 : parseInt(value);\n        onChangeHeight(h);\n        if (maintainAspectRatio) {\n            onChangeWidth(Math.round(h * aspectRatio));\n        }\n    };\n\n    const handleClickAspectRatio = () => {\n        const newMaintainAspectRatio = !maintainAspectRatio;\n        setMaintainAspectRatio(newMaintainAspectRatio);\n        if (newMaintainAspectRatio) {\n            onChangeHeight(Math.round(width / aspectRatio));\n        }\n    };\n\n    return (\n        <Grid container direction=\"row\" justifyContent=\"flex-end\" alignItems=\"center\" spacing={2}>\n            <Grid item>\n                <TextField\n                    type=\"number\"\n                    label={editor.translate('controls.image.labels.width')}\n                    size=\"small\"\n                    value={width}\n                    onChange={handleChangeWidth}\n                    onClick={(ev) => ev.stopPropagation()}\n                    style={{ maxWidth: 90 }}\n                />\n            </Grid>\n            <Grid item>\n                <IconButton onClick={handleClickAspectRatio} size=\"small\">\n                    {maintainAspectRatio ? <LockIcon /> : <LockOpenIcon />}\n                </IconButton>\n            </Grid>\n            <Grid item>\n                <TextField\n                    type=\"number\"\n                    label={editor.translate('controls.image.labels.height')}\n                    size=\"small\"\n                    value={height}\n                    onChange={handleChangeHeight}\n                    onClick={(ev) => ev.stopPropagation()}\n                    style={{ maxWidth: 90 }}\n                />\n            </Grid>\n        </Grid>\n    );\n}\n\nSizeInputs.propTypes = {\n    originalWidth: PropTypes.number.isRequired,\n    originalHeight: PropTypes.number.isRequired,\n    width: PropTypes.number.isRequired,\n    height: PropTypes.number.isRequired,\n    onChangeWidth: PropTypes.func.isRequired,\n    onChangeHeight: PropTypes.func.isRequired,\n};\n\nexport default SizeInputs;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport useEditor from '../../../../hooks/useEditor';\nimport DialogContent from '@mui/material/DialogContent';\nimport TextField from '@mui/material/TextField';\nimport DialogActions from '@mui/material/DialogActions';\nimport Button from '@mui/material/Button';\nimport Dialog from '@mui/material/Dialog';\nimport Grid from '@mui/material/Grid';\nimport CircularProgress from '@mui/material/CircularProgress';\nimport Typography from '@mui/material/Typography';\nimport ImageToUpload from './image/ImageToUpload';\nimport SizeInputs from './inputs/SizeInputs';\n\nfunction ByUrlDialog({ open, onClose, onSubmit }) {\n    const editor = useEditor();\n    const [imageURL, setImageURL] = React.useState('');\n    const [imageWidth, setImageWidth] = React.useState(0);\n    const [imageOriginalWidth, setImageOriginalWidth] = React.useState(0);\n    const [imageHeight, setImageHeight] = React.useState(0);\n    const [imageOriginalHeight, setImageOriginalHeight] = React.useState(0);\n    const [isUploading, setIsUploading] = React.useState(false);\n    const [isValidImage, setIsValidImage] = React.useState(false);\n    const [hasError, setHasError] = React.useState(false);\n    const [changeTimeout, setChangeTimeout] = React.useState(null);\n\n    const handleSubmit = (ev) => {\n        ev.preventDefault();\n        onSubmit({ imageURL, imageWidth, imageHeight });\n    };\n\n    const resetForm = () => {\n        setIsValidImage(false);\n        setImageURL('');\n    };\n\n    const handleURLChange = (url) => {\n        setImageURL(url);\n        if (changeTimeout) {\n            clearTimeout(changeTimeout);\n            setChangeTimeout(null);\n        }\n\n        if (url === '') {\n            setHasError(false);\n            setIsValidImage(false);\n            return;\n        }\n\n        const to = setTimeout(() => {\n            setIsUploading(true);\n            // eslint-disable-next-line no-undef\n            const image = new Image();\n            image.onload = function () {\n                setImageWidth(this.width);\n                setImageOriginalWidth(this.width);\n                setImageHeight(this.height);\n                setImageOriginalHeight(this.height);\n                setIsUploading(false);\n                setIsValidImage(true);\n                setHasError(false);\n            };\n            image.onerror = function () {\n                setIsUploading(false);\n                setIsValidImage(false);\n                setHasError(true);\n            };\n            image.src = url;\n            setChangeTimeout(null);\n        }, 1000);\n        setChangeTimeout(to);\n    };\n\n    let content = null;\n\n    if (isUploading) content = <CircularProgress />;\n    else if (isValidImage && imageURL)\n        content = <ImageToUpload src={imageURL} height={imageHeight} width={imageWidth} />;\n    else if (hasError && !isValidImage && imageURL)\n        content = (\n            <Typography variant=\"subtitle1\" color=\"error\" gutterBottom>\n                {editor.translate('controls.image.errorMessages.notValidImage')}\n            </Typography>\n        );\n\n    return (\n        <Dialog\n            open={open}\n            onClose={onClose}\n            TransitionProps={{\n                onEnter: resetForm\n            }}>\n            <form onSubmit={handleSubmit}>\n                <DialogContent>\n                    {isValidImage && imageURL !== '' && (\n                        <SizeInputs\n                            width={imageWidth}\n                            onChangeHeight={setImageHeight}\n                            height={imageHeight}\n                            originalWidth={imageOriginalWidth}\n                            originalHeight={imageOriginalHeight}\n                            onChangeWidth={setImageWidth}\n                        />\n                    )}\n                    <Grid container alignItems=\"center\" justifyContent=\"center\">\n                        {content}\n                    </Grid>\n                    <TextField\n                        autoFocus\n                        label={editor.translate('controls.image.labels.url')}\n                        value={imageURL}\n                        onChange={(ev) => handleURLChange(ev.currentTarget.value)}\n                        fullWidth\n                    />\n                </DialogContent>\n                <DialogActions>\n                    <Button type=\"button\" onClick={onClose} color=\"primary\">\n                        {editor.translate('controls.image.actions.cancel')}\n                    </Button>\n                    <Button type=\"submit\" color=\"primary\" disabled={!isValidImage}>\n                        {editor.translate('controls.image.actions.add')}\n                    </Button>\n                </DialogActions>\n            </form>\n        </Dialog>\n    );\n}\n\nByUrlDialog.propTypes = {\n    open: PropTypes.bool.isRequired,\n    onClose: PropTypes.func.isRequired,\n    onSubmit: PropTypes.func.isRequired,\n};\n\nexport default ByUrlDialog;\n","// A type of promise-like that resolves synchronously and supports only one observer\nexport const _Pact = /*#__PURE__*/(function() {\n\tfunction _Pact() {}\n\t_Pact.prototype.then = function(onFulfilled, onRejected) {\n\t\tconst result = new _Pact();\n\t\tconst state = this.s;\n\t\tif (state) {\n\t\t\tconst callback = state & 1 ? onFulfilled : onRejected;\n\t\t\tif (callback) {\n\t\t\t\ttry {\n\t\t\t\t\t_settle(result, 1, callback(this.v));\n\t\t\t\t} catch (e) {\n\t\t\t\t\t_settle(result, 2, e);\n\t\t\t\t}\n\t\t\t\treturn result;\n\t\t\t} else {\n\t\t\t\treturn this;\n\t\t\t}\n\t\t}\n\t\tthis.o = function(_this) {\n\t\t\ttry {\n\t\t\t\tconst value = _this.v;\n\t\t\t\tif (_this.s & 1) {\n\t\t\t\t\t_settle(result, 1, onFulfilled ? onFulfilled(value) : value);\n\t\t\t\t} else if (onRejected) {\n\t\t\t\t\t_settle(result, 1, onRejected(value));\n\t\t\t\t} else {\n\t\t\t\t\t_settle(result, 2, value);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t_settle(result, 2, e);\n\t\t\t}\n\t\t};\n\t\treturn result;\n\t}\n\treturn _Pact;\n})();\n\n// Settles a pact synchronously\nexport function _settle(pact, state, value) {\n\tif (!pact.s) {\n\t\tif (value instanceof _Pact) {\n\t\t\tif (value.s) {\n\t\t\t\tif (state & 1) {\n\t\t\t\t\tstate = value.s;\n\t\t\t\t}\n\t\t\t\tvalue = value.v;\n\t\t\t} else {\n\t\t\t\tvalue.o = _settle.bind(null, pact, state);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\tif (value && value.then) {\n\t\t\tvalue.then(_settle.bind(null, pact, state), _settle.bind(null, pact, 2));\n\t\t\treturn;\n\t\t}\n\t\tpact.s = state;\n\t\tpact.v = value;\n\t\tconst observer = pact.o;\n\t\tif (observer) {\n\t\t\tobserver(pact);\n\t\t}\n\t}\n}\n\nexport function _isSettledPact(thenable) {\n\treturn thenable instanceof _Pact && thenable.s & 1;\n}\n\n// Converts argument to a function that always returns a Promise\nexport function _async(f) {\n\treturn function() {\n\t\tfor (var args = [], i = 0; i < arguments.length; i++) {\n\t\t\targs[i] = arguments[i];\n\t\t}\n\t\ttry {\n\t\t\treturn Promise.resolve(f.apply(this, args));\n\t\t} catch(e) {\n\t\t\treturn Promise.reject(e);\n\t\t}\n\t}\n}\n\n// Awaits on a value that may or may not be a Promise (equivalent to the await keyword in ES2015, with continuations passed explicitly)\nexport function _await(value, then, direct) {\n\tif (direct) {\n\t\treturn then ? then(value) : value;\n\t}\n\tif (!value || !value.then) {\n\t\tvalue = Promise.resolve(value);\n\t}\n\treturn then ? value.then(then) : value;\n}\n\n// Awaits on a value that may or may not be a Promise, then ignores it\nexport function _awaitIgnored(value, direct) {\n\tif (!direct) {\n\t\treturn value && value.then ? value.then(_empty) : Promise.resolve();\n\t}\n}\n\n// Proceeds after a value has resolved, or proceeds immediately if the value is not thenable\nexport function _continue(value, then) {\n\treturn value && value.then ? value.then(then) : then(value);\n}\n\n// Proceeds after a value has resolved, or proceeds immediately if the value is not thenable\nexport function _continueIgnored(value) {\n\tif (value && value.then) {\n\t\treturn value.then(_empty);\n\t}\n}\n\n// Asynchronously iterate through an object that has a length property, passing the index as the first argument to the callback (even as the length property changes)\nexport function _forTo(array, body, check) {\n\tvar i = -1, pact, reject;\n\tfunction _cycle(result) {\n\t\ttry {\n\t\t\twhile (++i < array.length && (!check || !check())) {\n\t\t\t\tresult = body(i);\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult.then(_cycle, reject || (reject = _settle.bind(null, pact = new _Pact(), 2)));\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (pact) {\n\t\t\t\t_settle(pact, 1, result);\n\t\t\t} else {\n\t\t\t\tpact = result;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t_settle(pact || (pact = new _Pact()), 2, e);\n\t\t}\n\t}\n\t_cycle();\n\treturn pact;\n}\n\n// Asynchronously iterate through an object's properties (including properties inherited from the prototype)\n// Uses a snapshot of the object's properties\nexport function _forIn(target, body, check) {\n\tvar keys = [];\n\tfor (var key in target) {\n\t\tkeys.push(key);\n\t}\n\treturn _forTo(keys, function(i) { return body(keys[i]); }, check);\n}\n\n// Asynchronously iterate through an object's own properties (excluding properties inherited from the prototype)\n// Uses a snapshot of the object's properties\nexport function _forOwn(target, body, check) {\n\tvar keys = [];\n\tfor (var key in target) {\n\t\tif (Object.prototype.hasOwnProperty.call(target, key)) {\n\t\t\tkeys.push(key);\n\t\t}\n\t}\n\treturn _forTo(keys, function(i) { return body(keys[i]); }, check);\n}\n\nexport const _iteratorSymbol = /*#__PURE__*/ typeof Symbol !== \"undefined\" ? (Symbol.iterator || (Symbol.iterator = Symbol(\"Symbol.iterator\"))) : \"@@iterator\";\n\n// Asynchronously iterate through an object's values\n// Uses for...of if the runtime supports it, otherwise iterates until length on a copy\nexport function _forOf(target, body, check) {\n\tif (typeof target[_iteratorSymbol] === \"function\") {\n\t\tvar iterator = target[_iteratorSymbol](), step, pact, reject;\n\t\tfunction _cycle(result) {\n\t\t\ttry {\n\t\t\t\twhile (!(step = iterator.next()).done && (!check || !check())) {\n\t\t\t\t\tresult = body(step.value);\n\t\t\t\t\tif (result && result.then) {\n\t\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresult.then(_cycle, reject || (reject = _settle.bind(null, pact = new _Pact(), 2)));\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (pact) {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t} else {\n\t\t\t\t\tpact = result;\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\t_settle(pact || (pact = new _Pact()), 2, e);\n\t\t\t}\n\t\t}\n\t\t_cycle();\n\t\tif (iterator.return) {\n\t\t\tvar _fixup = function(value) {\n\t\t\t\ttry {\n\t\t\t\t\tif (!step.done) {\n\t\t\t\t\t\titerator.return();\n\t\t\t\t\t}\n\t\t\t\t} catch(e) {\n\t\t\t\t}\n\t\t\t\treturn value;\n\t\t\t}\n\t\t\tif (pact && pact.then) {\n\t\t\t\treturn pact.then(_fixup, function(e) {\n\t\t\t\t\tthrow _fixup(e);\n\t\t\t\t});\n\t\t\t}\n\t\t\t_fixup();\n\t\t}\n\t\treturn pact;\n\t}\n\t// No support for Symbol.iterator\n\tif (!(\"length\" in target)) {\n\t\tthrow new TypeError(\"Object is not iterable\");\n\t}\n\t// Handle live collections properly\n\tvar values = [];\n\tfor (var i = 0; i < target.length; i++) {\n\t\tvalues.push(target[i]);\n\t}\n\treturn _forTo(values, function(i) { return body(values[i]); }, check);\n}\n\nexport const _asyncIteratorSymbol = /*#__PURE__*/ typeof Symbol !== \"undefined\" ? (Symbol.asyncIterator || (Symbol.asyncIterator = Symbol(\"Symbol.asyncIterator\"))) : \"@@asyncIterator\";\n\n// Asynchronously iterate on a value using it's async iterator if present, or its synchronous iterator if missing\nexport function _forAwaitOf(target, body, check) {\n\tif (typeof target[_asyncIteratorSymbol] === \"function\") {\n\t\tvar pact = new _Pact();\n\t\tvar iterator = target[_asyncIteratorSymbol]();\n\t\titerator.next().then(_resumeAfterNext).then(void 0, _reject);\n\t\treturn pact;\n\t\tfunction _resumeAfterBody(result) {\n\t\t\tif (check && check()) {\n\t\t\t\treturn _settle(pact, 1, iterator.return ? iterator.return().then(function() { return result; }) : result);\n\t\t\t}\n\t\t\titerator.next().then(_resumeAfterNext).then(void 0, _reject);\n\t\t}\n\t\tfunction _resumeAfterNext(step) {\n\t\t\tif (step.done) {\n\t\t\t\t_settle(pact, 1);\n\t\t\t} else {\n\t\t\t\tPromise.resolve(body(step.value)).then(_resumeAfterBody).then(void 0, _reject);\n\t\t\t}\n\t\t}\n\t\tfunction _reject(error) {\n\t\t\t_settle(pact, 2, iterator.return ? iterator.return().then(function() { return error; }) : error);\n\t\t}\n\t}\n\treturn Promise.resolve(_forOf(target, function(value) { return Promise.resolve(value).then(body); }, check));\n}\n\n// Asynchronously implement a generic for loop\nexport function _for(test, update, body) {\n\tvar stage;\n\tfor (;;) {\n\t\tvar shouldContinue = test();\n\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\tshouldContinue = shouldContinue.v;\n\t\t}\n\t\tif (!shouldContinue) {\n\t\t\treturn result;\n\t\t}\n\t\tif (shouldContinue.then) {\n\t\t\tstage = 0;\n\t\t\tbreak;\n\t\t}\n\t\tvar result = body();\n\t\tif (result && result.then) {\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.s;\n\t\t\t} else {\n\t\t\t\tstage = 1;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (update) {\n\t\t\tvar updateValue = update();\n\t\t\tif (updateValue && updateValue.then && !_isSettledPact(updateValue)) {\n\t\t\t\tstage = 2;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\tvar pact = new _Pact();\n\tvar reject = _settle.bind(null, pact, 2);\n\t(stage === 0 ? shouldContinue.then(_resumeAfterTest) : stage === 1 ? result.then(_resumeAfterBody) : updateValue.then(_resumeAfterUpdate)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterBody(value) {\n\t\tresult = value;\n\t\tdo {\n\t\t\tif (update) {\n\t\t\t\tupdateValue = update();\n\t\t\t\tif (updateValue && updateValue.then && !_isSettledPact(updateValue)) {\n\t\t\t\t\tupdateValue.then(_resumeAfterUpdate).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tshouldContinue = test();\n\t\t\tif (!shouldContinue || (_isSettledPact(shouldContinue) && !shouldContinue.v)) {\n\t\t\t\t_settle(pact, 1, result);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.v;\n\t\t\t}\n\t\t} while (!result || !result.then);\n\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t}\n\tfunction _resumeAfterTest(shouldContinue) {\n\t\tif (shouldContinue) {\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t} else {\n\t\t\t\t_resumeAfterBody(result);\n\t\t\t}\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n\tfunction _resumeAfterUpdate() {\n\t\tif (shouldContinue = test()) {\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t} else {\n\t\t\t\t_resumeAfterTest(shouldContinue);\n\t\t\t}\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n}\n\n// Asynchronously implement a do ... while loop\nexport function _do(body, test) {\n\tvar awaitBody;\n\tdo {\n\t\tvar result = body();\n\t\tif (result && result.then) {\n\t\t\tif (_isSettledPact(result)) {\n\t\t\t\tresult = result.v;\n\t\t\t} else {\n\t\t\t\tawaitBody = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tvar shouldContinue = test();\n\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\tshouldContinue = shouldContinue.v;\n\t\t}\n\t\tif (!shouldContinue) {\n\t\t\treturn result;\n\t\t}\n\t} while (!shouldContinue.then);\n\tconst pact = new _Pact();\n\tconst reject = _settle.bind(null, pact, 2);\n\t(awaitBody ? result.then(_resumeAfterBody) : shouldContinue.then(_resumeAfterTest)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterBody(value) {\n\t\tresult = value;\n\t\tfor (;;) {\n\t\t\tshouldContinue = test();\n\t\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\t\tshouldContinue = shouldContinue.v;\n\t\t\t}\n\t\t\tif (!shouldContinue) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (shouldContinue.then) {\n\t\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\tresult = result.v;\n\t\t\t\t} else {\n\t\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t_settle(pact, 1, result);\n\t}\n\tfunction _resumeAfterTest(shouldContinue) {\n\t\tif (shouldContinue) {\n\t\t\tdo {\n\t\t\t\tresult = body();\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tif (_isSettledPact(result)) {\n\t\t\t\t\t\tresult = result.v;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tshouldContinue = test();\n\t\t\t\tif (_isSettledPact(shouldContinue)) {\n\t\t\t\t\tshouldContinue = shouldContinue.v;\n\t\t\t\t}\n\t\t\t\tif (!shouldContinue) {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} while (!shouldContinue.then);\n\t\t\tshouldContinue.then(_resumeAfterTest).then(void 0, reject);\n\t\t} else {\n\t\t\t_settle(pact, 1, result);\n\t\t}\n\t}\n}\n\n// Asynchronously implement a switch statement\nexport function _switch(discriminant, cases) {\n\tvar dispatchIndex = -1;\n\tvar awaitBody;\n\touter: {\n\t\tfor (var i = 0; i < cases.length; i++) {\n\t\t\tvar test = cases[i][0];\n\t\t\tif (test) {\n\t\t\t\tvar testValue = test();\n\t\t\t\tif (testValue && testValue.then) {\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\t\t\t\tif (testValue === discriminant) {\n\t\t\t\t\tdispatchIndex = i;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Found the default case, set it as the pending dispatch case\n\t\t\t\tdispatchIndex = i;\n\t\t\t}\n\t\t}\n\t\tif (dispatchIndex !== -1) {\n\t\t\tdo {\n\t\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\t\twhile (!body) {\n\t\t\t\t\tdispatchIndex++;\n\t\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t\t}\n\t\t\t\tvar result = body();\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tawaitBody = true;\n\t\t\t\t\tbreak outer;\n\t\t\t\t}\n\t\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\t\tdispatchIndex++;\n\t\t\t} while (fallthroughCheck && !fallthroughCheck());\n\t\t\treturn result;\n\t\t}\n\t}\n\tconst pact = new _Pact();\n\tconst reject = _settle.bind(null, pact, 2);\n\t(awaitBody ? result.then(_resumeAfterBody) : testValue.then(_resumeAfterTest)).then(void 0, reject);\n\treturn pact;\n\tfunction _resumeAfterTest(value) {\n\t\tfor (;;) {\n\t\t\tif (value === discriminant) {\n\t\t\t\tdispatchIndex = i;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (++i === cases.length) {\n\t\t\t\tif (dispatchIndex !== -1) {\n\t\t\t\t\tbreak;\n\t\t\t\t} else {\n\t\t\t\t\t_settle(pact, 1, result);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\ttest = cases[i][0];\n\t\t\tif (test) {\n\t\t\t\tvalue = test();\n\t\t\t\tif (value && value.then) {\n\t\t\t\t\tvalue.then(_resumeAfterTest).then(void 0, reject);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdispatchIndex = i;\n\t\t\t}\n\t\t}\n\t\tdo {\n\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\twhile (!body) {\n\t\t\t\tdispatchIndex++;\n\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t}\n\t\t\tvar result = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\tdispatchIndex++;\n\t\t} while (fallthroughCheck && !fallthroughCheck());\n\t\t_settle(pact, 1, result);\n\t}\n\tfunction _resumeAfterBody(result) {\n\t\tfor (;;) {\n\t\t\tvar fallthroughCheck = cases[dispatchIndex][2];\n\t\t\tif (!fallthroughCheck || fallthroughCheck()) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdispatchIndex++;\n\t\t\tvar body = cases[dispatchIndex][1];\n\t\t\twhile (!body) {\n\t\t\t\tdispatchIndex++;\n\t\t\t\tbody = cases[dispatchIndex][1];\n\t\t\t}\n\t\t\tresult = body();\n\t\t\tif (result && result.then) {\n\t\t\t\tresult.then(_resumeAfterBody).then(void 0, reject);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t\t_settle(pact, 1, result);\n\t}\n}\n\n// Asynchronously call a function and pass the result to explicitly passed continuations\nexport function _call(body, then, direct) {\n\tif (direct) {\n\t\treturn then ? then(body()) : body();\n\t}\n\ttry {\n\t\tvar result = Promise.resolve(body());\n\t\treturn then ? result.then(then) : result;\n\t} catch (e) {\n\t\treturn Promise.reject(e);\n\t}\n}\n\n// Asynchronously call a function and swallow the result\nexport function _callIgnored(body, direct) {\n\treturn _call(body, _empty, direct);\n}\n\n// Asynchronously call a function and pass the result to explicitly passed continuations\nexport function _invoke(body, then) {\n\tvar result = body();\n\tif (result && result.then) {\n\t\treturn result.then(then);\n\t}\n\treturn then(result);\n}\n\n// Asynchronously call a function and swallow the result\nexport function _invokeIgnored(body) {\n\tvar result = body();\n\tif (result && result.then) {\n\t\treturn result.then(_empty);\n\t}\n}\n\n// Asynchronously call a function and send errors to recovery continuation\nexport function _catch(body, recover) {\n\ttry {\n\t\tvar result = body();\n\t} catch(e) {\n\t\treturn recover(e);\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(void 0, recover);\n\t}\n\treturn result;\n}\n\n// Asynchronously await a promise and pass the result to a finally continuation\nexport function _finallyRethrows(body, finalizer) {\n\ttry {\n\t\tvar result = body();\n\t} catch (e) {\n\t\treturn finalizer(true, e);\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(finalizer.bind(null, false), finalizer.bind(null, true));\n\t}\n\treturn finalizer(false, result);\n}\n\n// Asynchronously await a promise and invoke a finally continuation that always overrides the result\nexport function _finally(body, finalizer) {\n\ttry {\n\t\tvar result = body();\n\t} catch (e) {\n\t\treturn finalizer();\n\t}\n\tif (result && result.then) {\n\t\treturn result.then(finalizer, finalizer);\n\t}\n\treturn finalizer();\n}\n\n// Rethrow or return a value from a finally continuation\nexport function _rethrow(thrown, value) {\n\tif (thrown)\n\t\tthrow value;\n\treturn value;\n}\n\n// Empty function to implement break and other control flow that ignores asynchronous results\nexport function _empty() {\n}\n\n// Sentinel value for early returns in generators \nexport const _earlyReturn = /*#__PURE__*/ {};\n\n// Asynchronously call a function and send errors to recovery continuation, skipping early returns\nexport function _catchInGenerator(body, recover) {\n\treturn _catch(body, function(e) {\n\t\tif (e === _earlyReturn) {\n\t\t\tthrow e;\n\t\t}\n\t\treturn recover(e);\n\t});\n}\n\n// Asynchronous generator class; accepts the entrypoint of the generator, to which it passes itself when the generator should start\nexport const _AsyncGenerator = /*#__PURE__*/(function() {\n\tfunction _AsyncGenerator(entry) {\n\t\tthis._entry = entry;\n\t\tthis._pact = null;\n\t\tthis._resolve = null;\n\t\tthis._return = null;\n\t\tthis._promise = null;\n\t}\n\n\tfunction _wrapReturnedValue(value) {\n\t\treturn { value: value, done: true };\n\t}\n\tfunction _wrapYieldedValue(value) {\n\t\treturn { value: value, done: false };\n\t}\n\n\t_AsyncGenerator.prototype._yield = function(value) {\n\t\t// Yield the value to the pending next call\n\t\tthis._resolve(value && value.then ? value.then(_wrapYieldedValue) : _wrapYieldedValue(value));\n\t\t// Return a pact for an upcoming next/return/throw call\n\t\treturn this._pact = new _Pact();\n\t};\n\t_AsyncGenerator.prototype.next = function(value) {\n\t\t// Advance the generator, starting it if it has yet to be started\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tconst _entry = _this._entry;\n\t\t\t\tif (_entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the next call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Start the generator\n\t\t\t\t_this._entry = null;\n\t\t\t\t_this._resolve = resolve;\n\t\t\t\tfunction returnValue(value) {\n\t\t\t\t\t_this._resolve(value && value.then ? value.then(_wrapReturnedValue) : _wrapReturnedValue(value));\n\t\t\t\t\t_this._pact = null;\n\t\t\t\t\t_this._resolve = null;\n\t\t\t\t}\n\t\t\t\tvar result = _entry(_this);\n\t\t\t\tif (result && result.then) {\n\t\t\t\t\tresult.then(returnValue, function(error) {\n\t\t\t\t\t\tif (error === _earlyReturn) {\n\t\t\t\t\t\t\treturnValue(_this._return);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst pact = new _Pact();\n\t\t\t\t\t\t\t_this._resolve(pact);\n\t\t\t\t\t\t\t_this._pact = null;\n\t\t\t\t\t\t\t_this._resolve = null;\n\t\t\t\t\t\t\t_resolve(pact, 2, error);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\treturnValue(result);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Generator is started and a yield expression is pending, settle it\n\t\t\t\t_this._pact = null;\n\t\t\t\t_this._resolve = resolve;\n\t\t\t\t_settle(_pact, 1, value);\n\t\t\t}\n\t\t});\n\t};\n\t_AsyncGenerator.prototype.return = function(value) {\n\t\t// Early return from the generator if started, otherwise abandons the generator\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tif (_this._entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the return call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Generator is not started, abandon it and return the specified value\n\t\t\t\t_this._entry = null;\n\t\t\t\treturn resolve(value && value.then ? value.then(_wrapReturnedValue) : _wrapReturnedValue(value));\n\t\t\t}\n\t\t\t// Settle the yield expression with a rejected \"early return\" value\n\t\t\t_this._return = value;\n\t\t\t_this._resolve = resolve;\n\t\t\t_this._pact = null;\n\t\t\t_settle(_pact, 2, _earlyReturn);\n\t\t});\n\t};\n\t_AsyncGenerator.prototype.throw = function(error) {\n\t\t// Inject an exception into the pending yield expression\n\t\tconst _this = this;\n\t\treturn _this._promise = new Promise(function (resolve, reject) {\n\t\t\tconst _pact = _this._pact;\n\t\t\tif (_pact === null) {\n\t\t\t\tif (_this._entry === null) {\n\t\t\t\t\t// Generator is started, but not awaiting a yield expression\n\t\t\t\t\t// Abandon the throw call!\n\t\t\t\t\treturn resolve(_this._promise);\n\t\t\t\t}\n\t\t\t\t// Generator is not started, abandon it and return a rejected Promise containing the error\n\t\t\t\t_this._entry = null;\n\t\t\t\treturn reject(error);\n\t\t\t}\n\t\t\t// Settle the yield expression with the value as a rejection\n\t\t\t_this._resolve = resolve;\n\t\t\t_this._pact = null;\n\t\t\t_settle(_pact, 2, error);\n\t\t});\n\t};\n\n\t_AsyncGenerator.prototype[_asyncIteratorSymbol] = function() {\n\t\treturn this;\n\t};\n\t\n\treturn _AsyncGenerator;\n})();\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport useEditor from '../../../../hooks/useEditor';\nimport Dialog from '@mui/material/Dialog';\nimport DialogContent from '@mui/material/DialogContent';\nimport DialogActions from '@mui/material/DialogActions';\nimport Button from '@mui/material/Button';\nimport Typography from '@mui/material/Typography';\nimport CircularProgress from '@mui/material/CircularProgress';\nimport SizeInputs from './inputs/SizeInputs';\nimport ImageToUpload from './image/ImageToUpload';\nimport makeStyles from '@mui/styles/makeStyles';\n\nconst useStyles = makeStyles((theme) => ({\n    dropArea: ({ highlightDropArea }) => ({\n        width: 500,\n        height: 300,\n        boxSizing: 'border-box',\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        padding: theme.spacing(2),\n        marginTop: theme.spacing(1),\n        marginBottom: theme.spacing(2),\n        borderRadius: theme.shape.borderRadius || 4,\n        backgroundColor: highlightDropArea\n            ? theme.palette.grey[400] || '#bdbdbd'\n            : theme.palette.grey[200] || '#eeeeee',\n        border: highlightDropArea\n            ? `solid 3px ${theme.palette.grey[600] || '#757575'}`\n            : `dashed 3px ${theme.palette.grey[400] || '#bdbdbd'}`,\n        color: theme.palette.text.hint || 'rgba(0, 0, 0, 0.38)',\n        cursor: 'pointer',\n    }),\n}));\n\nfunction UploadDialog({ open, onClose, onSubmit, uploadCallback }) {\n    const editor = useEditor();\n    const [imageURL, setImageURL] = React.useState('');\n    const [imageWidth, setImageWidth] = React.useState(0);\n    const [imageOriginalWidth, setImageOriginalWidth] = React.useState(0);\n    const [imageHeight, setImageHeight] = React.useState(0);\n    const [imageOriginalHeight, setImageOriginalHeight] = React.useState(0);\n    const [isUploading, setIsUploading] = React.useState(false);\n    const [isValidImage, setIsValidImage] = React.useState(false);\n    const [hasError, setHasError] = React.useState(false);\n    const [errorMessage, setErrorMessage] = React.useState(null);\n    const [highlightDropArea, setHighlightDropArea] = React.useState(false);\n    const inputFileRef = React.createRef();\n    const classes = useStyles({ highlightDropArea });\n\n    const handleSubmit = (ev) => {\n        ev.preventDefault();\n        ev.stopPropagation();\n        onSubmit({ imageURL, imageWidth, imageHeight });\n    };\n\n    const handleClickDropArea = (ev) => {\n        ev.preventDefault();\n        inputFileRef.current.click();\n    };\n\n    const handleDragEnter = (ev) => {\n        ev.preventDefault();\n        ev.stopPropagation();\n        setHighlightDropArea(true);\n    };\n\n    const handleDragLeave = (ev) => {\n        ev.preventDefault();\n        ev.stopPropagation();\n        setHighlightDropArea(false);\n    };\n\n    const handleDragOver = (ev) => {\n        ev.preventDefault();\n        ev.stopPropagation();\n        setHighlightDropArea(true);\n    };\n\n    const handleDrop = async (ev) => {\n        ev.preventDefault();\n        ev.stopPropagation();\n        const files = ev.dataTransfer.files;\n        if (files.length > 0) await onSelectFile(files[0]);\n    };\n\n    const handleInputFileChange = async () => {\n        const files = inputFileRef.current.files;\n        if (files.length > 0) await onSelectFile(files[0]);\n    };\n\n    const onSelectFile = async (file) => {\n        setHighlightDropArea(false);\n        setIsUploading(true);\n        try {\n            const selectedImageUrl = await uploadCallback(file);\n            setImageURL(selectedImageUrl);\n            const image = new Image();\n            image.onload = function () {\n                setImageWidth(this.width);\n                setImageOriginalWidth(this.width);\n                setImageHeight(this.height);\n                setImageOriginalHeight(this.height);\n                setIsUploading(false);\n                setIsValidImage(true);\n                setHasError(false);\n            };\n            image.onerror = function () {\n                setIsUploading(false);\n                setIsValidImage(false);\n                setHasError(true);\n                setErrorMessage(null);\n            };\n            image.src = selectedImageUrl;\n        } catch (e) {\n            setIsUploading(false);\n            setIsValidImage(false);\n            setHasError(true);\n            setErrorMessage(e);\n        }\n    };\n\n    const resetForm = () => {\n        setImageURL('');\n        setIsValidImage(false);\n        setIsUploading(false);\n        setHighlightDropArea(false);\n    };\n\n    let dropAreaContent = (\n        <Typography variant=\"subtitle1\">\n            {editor.translate('controls.image.labels.dropImageHere')}\n        </Typography>\n    );\n\n    if (isUploading) {\n        dropAreaContent = <CircularProgress />;\n    } else if (isValidImage && imageURL) {\n        dropAreaContent = <ImageToUpload src={imageURL} height={imageHeight} width={imageWidth} />;\n    }\n\n    return (\n        <Dialog\n            open={open}\n            onClose={onClose}\n            TransitionProps={{\n                onEnter: resetForm\n            }}>\n            <form onSubmit={handleSubmit}>\n                <DialogContent>\n                    <input\n                        ref={inputFileRef}\n                        type=\"file\"\n                        accept=\"image/*\"\n                        onChange={handleInputFileChange}\n                        style={{ display: 'none' }}\n                    />\n                    {isValidImage && imageURL !== '' && (\n                        <SizeInputs\n                            originalWidth={imageOriginalWidth}\n                            originalHeight={imageOriginalHeight}\n                            width={imageWidth}\n                            height={imageHeight}\n                            onChangeWidth={setImageWidth}\n                            onChangeHeight={setImageHeight}\n                        />\n                    )}\n\n                    {hasError && !isValidImage && (\n                        <Typography variant=\"subtitle1\" color=\"error\" align=\"center\" gutterBottom>\n                            {errorMessage !== null\n                                ? errorMessage\n                                : editor.translate('controls.image.errorMessages.notValidImage')}\n                        </Typography>\n                    )}\n\n                    <div\n                        className={classes.dropArea}\n                        onClick={handleClickDropArea}\n                        onDragEnter={handleDragEnter}\n                        onDragLeave={handleDragLeave}\n                        onDragOver={handleDragOver}\n                        onDrop={handleDrop}>\n                        {dropAreaContent}\n                    </div>\n                </DialogContent>\n                <DialogActions>\n                    <Button type=\"button\" onClick={onClose} color=\"primary\">\n                        {editor.translate('controls.image.actions.cancel')}\n                    </Button>\n                    <Button type=\"submit\" color=\"primary\" disabled={!isValidImage}>\n                        {editor.translate('controls.image.actions.add')}\n                    </Button>\n                </DialogActions>\n            </form>\n        </Dialog>\n    );\n}\n\nUploadDialog.propTypes = {\n    open: PropTypes.bool.isRequired,\n    onClose: PropTypes.func.isRequired,\n    onSubmit: PropTypes.func.isRequired,\n    uploadCallback: PropTypes.func.isRequired,\n};\n\nexport default UploadDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport useEditor from '../../../../hooks/useEditor';\nimport Dialog from '@mui/material/Dialog';\nimport DialogContent from '@mui/material/DialogContent';\nimport SizeInputs from './inputs/SizeInputs';\nimport DialogActions from '@mui/material/DialogActions';\nimport Grid from '@mui/material/Grid';\nimport Button from '@mui/material/Button';\nimport ImageToUpload from './image/ImageToUpload';\n\nfunction ResizeImageDialog({ open, onClose, src, originalWidth, originalHeight, onSave }) {\n    const [width, setWidth] = React.useState(0);\n    const [height, setHeight] = React.useState(0);\n    const editor = useEditor();\n\n    React.useEffect(() => {\n        setWidth(originalWidth);\n        setHeight(originalHeight);\n    }, [originalWidth, originalHeight]);\n\n    const handleSubmit = (ev) => {\n        ev.preventDefault();\n        onSave(width, height);\n    };\n\n    return (\n        <Dialog open={open} onClose={onClose}>\n            <form onSubmit={handleSubmit}>\n                <DialogContent>\n                    <SizeInputs\n                        width={width}\n                        height={height}\n                        onChangeWidth={setWidth}\n                        onChangeHeight={setHeight}\n                        originalWidth={originalWidth}\n                        originalHeight={originalHeight}\n                    />\n                    <Grid container alignItems=\"center\" justifyContent=\"center\">\n                        <ImageToUpload src={src} width={width} height={height} />\n                    </Grid>\n                </DialogContent>\n                <DialogActions>\n                    <Button type=\"button\" onClick={() => onClose()}>\n                        {editor.translate('controls.image.actions.cancel')}\n                    </Button>\n                    <Button type=\"submit\">\n                        {editor.translate('controls.image.actions.resize')}\n                    </Button>\n                </DialogActions>\n            </form>\n        </Dialog>\n    );\n}\n\nResizeImageDialog.propTypes = {\n    open: PropTypes.bool.isRequired,\n    onClose: PropTypes.func.isRequired,\n    src: PropTypes.string.isRequired,\n    originalWidth: PropTypes.number.isRequired,\n    originalHeight: PropTypes.number.isRequired,\n    onSave: PropTypes.func.isRequired,\n};\n\nexport default ResizeImageDialog;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport useEditor from '../../../hooks/useEditor';\nimport useEditorFocus from '../../../hooks/useEditorFocus';\nimport ButtonControl from '../core/ButtonControl';\nimport ImageIcon from '@mui/icons-material/Image';\nimport Popover from '@mui/material/Popover';\nimport List from '@mui/material/List';\nimport ListItem from '@mui/material/ListItem';\nimport ListItemIcon from '@mui/material/ListItemIcon';\nimport ListItemText from '@mui/material/ListItemText';\nimport PublishIcon from '@mui/icons-material/Publish';\nimport LinkIcon from '@mui/icons-material/Link';\nimport entities from '../../../types/entities';\nimport useEditorState from '../../../hooks/useEditorState';\nimport { EditorState, AtomicBlockUtils } from 'draft-js';\nimport ByUrlDialog from './dialogs/ByURLDialog';\nimport UploadDialog from './dialogs/UploadDialog';\nimport ResizeImageDialog from './dialogs/ResizeImageDialog';\n\nfunction ImageControl({ configuration, defaultConfiguration }) {\n    const editor = useEditor();\n  const editorState = useEditorState(editor);\n\n    const editorFocus = useEditorFocus();\n    const menuId = Math.random().toString(36).substring(8);\n    const [anchorEl, setAnchorEl] = React.useState(null);\n    const [isUploadDialogOpened, setIsUploadDialogOpened] = React.useState(false);\n    const [isUrlDialogOpened, setIsUrlDialogOpened] = React.useState(false);\n    const uploadCallback = configuration.uploadCallback || defaultConfiguration.uploadCallback;\n\n    const imageEntityToResize = editor.resizeImageEntityKey\n        ? editorState.getCurrentContent().getEntity(editor.resizeImageEntityKey)\n        : null;\n\n    const handleSubmitImage = ({ imageURL, imageWidth, imageHeight }) => {\n        if (imageURL === '') return;\n        setIsUrlDialogOpened(false);\n        setIsUploadDialogOpened(false);\n\n        const contentState = editorState.getCurrentContent();\n        const contentStateWithEntity = contentState.createEntity(entities.IMAGE, 'IMMUTABLE', {\n            src: imageURL,\n            width: imageWidth,\n            height: imageHeight,\n        });\n        const entityKey = contentStateWithEntity.getLastCreatedEntityKey();\n        const newEditorState = EditorState.push(\n            editorState,\n            contentStateWithEntity,\n            'apply-entity'\n        );\n        editor.onChange(AtomicBlockUtils.insertAtomicBlock(newEditorState, entityKey, ' '));\n        editorFocus();\n    };\n\n    const handleResizeImage = (width, height) => {\n        editor.hideResizeImageDialog();\n        const contentState = editorState.getCurrentContent();\n        const newEditorState = EditorState.push(\n            editorState,\n            contentState.mergeEntityData(editor.resizeImageEntityKey, { width, height }),\n            'apply-entity'\n        );\n        editor.onChange(newEditorState);\n        editorFocus();\n    };\n\n    return (\n        <React.Fragment>\n            <ButtonControl\n                onClick={(ev) => setAnchorEl(ev.currentTarget)}\n                text={editor.translate('controls.image.title')}\n                aria-controls={menuId}\n                aria-haspopup=\"true\">\n                <ImageIcon />\n            </ButtonControl>\n\n            <Popover\n                id={menuId}\n                anchorEl={anchorEl}\n                anchorOrigin={{\n                    vertical: 'bottom',\n                    horizontal: 'left',\n                }}\n                transformOrigin={{\n                    vertical: 'top',\n                    horizontal: 'left',\n                }}\n                keepMounted\n                open={Boolean(anchorEl)}\n                onClose={() => setAnchorEl(null)}>\n                <List\n                    component=\"nav\"\n                    aria-label={editor.translate('controls.image.labels.insertOptions')}>\n                    <ListItem\n                        button\n                        onClick={() => {\n                            setIsUploadDialogOpened(true);\n                            setAnchorEl(null);\n                        }}>\n                        <ListItemIcon>\n                            <PublishIcon />\n                        </ListItemIcon>\n                        <ListItemText primary={editor.translate('controls.image.actions.upload')} />\n                    </ListItem>\n                    <ListItem\n                        button\n                        onClick={() => {\n                            setIsUrlDialogOpened(true);\n                            setAnchorEl(null);\n                        }}>\n                        <ListItemIcon>\n                            <LinkIcon />\n                        </ListItemIcon>\n                        <ListItemText primary={editor.translate('controls.image.actions.url')} />\n                    </ListItem>\n                </List>\n            </Popover>\n\n            <ByUrlDialog\n                onSubmit={handleSubmitImage}\n                onClose={() => setIsUrlDialogOpened(false)}\n                open={isUrlDialogOpened}\n            />\n\n            <UploadDialog\n                onSubmit={handleSubmitImage}\n                onClose={() => setIsUploadDialogOpened(false)}\n                open={isUploadDialogOpened}\n                uploadCallback={uploadCallback}\n            />\n\n            <ResizeImageDialog\n                open={editor.isResizeImageDialogVisible}\n                onClose={() => editor.hideResizeImageDialog()}\n                src={imageEntityToResize ? imageEntityToResize.getData().src : ''}\n                originalWidth={imageEntityToResize ? imageEntityToResize.getData().width : 0}\n                originalHeight={imageEntityToResize ? imageEntityToResize.getData().height : 0}\n                onSave={handleResizeImage}\n            />\n        </React.Fragment>\n    );\n}\n\nImageControl.propTypes = {\n    configuration: PropTypes.object.isRequired,\n    defaultConfiguration: PropTypes.object.isRequired,\n};\n\nexport default ImageControl;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport entities from '../../../types/entities';\nimport blockStyles from '../../../types/blockStyles';\nimport useEditorState from '../../../hooks/useEditorState';\nimport { EditorState, Modifier, SelectionState } from 'draft-js';\nimport useEditor from '../../../hooks/useEditor';\nimport useEditorFocus from '../../../hooks/useEditorFocus';\nimport Popover from '@mui/material/Popover';\nimport ButtonGroup from '@mui/material/ButtonGroup';\nimport Button from '@mui/material/Button';\nimport ImageIcon from '@mui/icons-material/Image';\nimport ArrowLeftIcon from '@mui/icons-material/ArrowLeft';\nimport ArrowRightIcon from '@mui/icons-material/ArrowRight';\nimport PhotoSizeSelectLargeIcon from '@mui/icons-material/PhotoSizeSelectLarge';\nimport DeleteIcon from '@mui/icons-material/Delete';\nimport makeStyles from '@mui/styles/makeStyles';\nimport Typography from '@mui/material/Typography';\n\nconst EditorMedia = ({ contentState, block }) => {\n    const entity = contentState.getEntity(block.getEntityAt(0));\n    const type = entity.getType();\n\n    if (type === entities.IMAGE) {\n        const { src, width = 'auto', height = 'auto' } = entity.getData();\n        return (\n            <EditorImage\n                src={src}\n                width={width}\n                height={height}\n                block={block}\n                contentState={contentState}\n            />\n        );\n    }\n\n    return null;\n};\n\nEditorMedia.propTypes = {\n    contentState: PropTypes.object.isRequired,\n    block: PropTypes.object.isRequired,\n};\n\nconst useStyles = makeStyles((theme) => ({\n    imgInfo: {\n        padding: theme.spacing(0.6),\n    },\n}));\n\nconst EditorImage = ({ src, width, height, contentState, block }) => {\n    const [anchorEl, setAnchorEl] = React.useState(null);\n    const [infoAnchorEl, setInfoAnchorEl] = React.useState(null);\n    const editor = useEditor();\n\n\n    const editorFocus = useEditorFocus();\n    const classes = useStyles();\n\n    const showOptions = (ev) => {\n        setAnchorEl(ev.currentTarget);\n        setInfoAnchorEl(ev.currentTarget);\n    };\n\n    const hideOptions = () => {\n        setAnchorEl(null);\n        setInfoAnchorEl(null);\n    };\n\n    const imageAlign = (ev, align) => {\n        ev.preventDefault();\n        ev.stopPropagation();\n        const imageSelection = SelectionState.createEmpty(block.getKey()).merge({\n            anchorKey: block.getKey(),\n            anchorOffset: 0,\n            focusKey: block.getKey(),\n            focusOffset: block.getLength(),\n        });\n\n        const newContentState = Modifier.setBlockData(contentState, imageSelection, {\n            textAlign: align,\n        });\n        editor.onChange(EditorState.push(editor.getEditorState(), newContentState, 'change-block-data'));\n        editorFocus();\n    };\n\n    const removeImage = (ev) => {\n        ev.preventDefault();\n        ev.stopPropagation();\n        const imageSelection = SelectionState.createEmpty(block.getKey()).merge({\n            anchorKey: block.getKey(),\n            anchorOffset: 0,\n            focusKey: block.getKey(),\n            focusOffset: block.getLength(),\n        });\n\n        let newContentState = Modifier.removeRange(contentState, imageSelection, 'forward');\n\n        const blockMap = newContentState.getBlockMap().delete(block.getKey());\n\n        const firstBlock = newContentState.getFirstBlock();\n\n        const selectionToStart = SelectionState.createEmpty(firstBlock.getKey()).merge({\n            anchorKey: firstBlock.getKey(),\n            anchorOffset: 0,\n            focusKey: firstBlock.getKey(),\n            focusOffset: 0,\n        });\n\n        newContentState = newContentState.merge({ blockMap, selectionAfter: selectionToStart });\n\n        editor.onChange(EditorState.push(editor.getEditorState(), newContentState, 'remove-range'));\n        editorFocus();\n    };\n\n    if (!src) return null;\n\n    return (\n        <React.Fragment>\n            <img alt={src} src={src} width={width} height={height} onClick={showOptions} />\n            <Popover\n                open={Boolean(infoAnchorEl)}\n                onClose={hideOptions}\n                anchorEl={infoAnchorEl}\n                anchorOrigin={{\n                    vertical: 'top',\n                    horizontal: 'right',\n                }}\n                transformOrigin={{\n                    vertical: 'bottom',\n                    horizontal: 'right',\n                }}>\n                <Typography color=\"textSecondary\" variant=\"body1\" className={classes.imgInfo}>\n                    {width}&nbsp;x&nbsp;{height}\n                </Typography>\n            </Popover>\n            <Popover\n                open={Boolean(anchorEl)}\n                onClose={hideOptions}\n                anchorEl={anchorEl}\n                anchorOrigin={{\n                    vertical: 'bottom',\n                    horizontal: 'center',\n                }}\n                transformOrigin={{\n                    vertical: 'top',\n                    horizontal: 'center',\n                }}>\n                <ButtonGroup\n                    size=\"small\"\n                    aria-label={editor.translate('controls.image.labels.editOptions')}>\n                    <Button\n                        onClick={(ev) => imageAlign(ev, 'left')}\n                        title={editor.translate('controls.image.actions.alignLeft')}>\n                        <ArrowLeftIcon />\n                        <ImageIcon />\n                    </Button>\n                    <Button\n                        onClick={(ev) => imageAlign(ev, 'center')}\n                        title={editor.translate('controls.image.actions.alignCenter')}>\n                        <ArrowLeftIcon />\n                        <ImageIcon />\n                        <ArrowRightIcon />\n                    </Button>\n                    <Button\n                        onClick={(ev) => imageAlign(ev, 'right')}\n                        title={editor.translate('controls.image.actions.alignRight')}>\n                        <ImageIcon />\n                        <ArrowRightIcon />\n                    </Button>\n                    <Button\n                        onClick={() => {\n                            hideOptions();\n                            editor.showResizeImageDialog(block.getEntityAt(0));\n                        }}\n                        title={editor.translate('controls.image.actions.resize')}>\n                        <PhotoSizeSelectLargeIcon />\n                    </Button>\n                    <Button\n                        onClick={removeImage}\n                        title={editor.translate('controls.image.actions.remove')}>\n                        <DeleteIcon />\n                    </Button>\n                </ButtonGroup>\n            </Popover>\n        </React.Fragment>\n    );\n};\n\nEditorImage.propTypes = {\n    src: PropTypes.string,\n    width: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n    height: PropTypes.oneOfType([PropTypes.string, PropTypes.number]).isRequired,\n    contentState: PropTypes.object.isRequired,\n    block: PropTypes.object.isRequired,\n};\n\nconst imagePlugin = () => ({\n    blockRendererFn: (block) => {\n        if (block.getType() === blockStyles.ATOMIC) {\n            return {\n                component: EditorMedia,\n                editable: false,\n            };\n        }\n    },\n});\n\nexport default imagePlugin;\n","export const fileToBase64 = (file) => {\n    return new Promise((resolve, reject) => {\n        // eslint-disable-next-line no-undef\n        const reader = new FileReader();\n        reader.onload = () => resolve(reader.result);\n        reader.onerror = () => reject(reader.error);\n        reader.readAsDataURL(file);\n    });\n};\n","import DividerControl from '../EditorToolbar/controls/DividerControl';\nimport UndoControl from '../EditorToolbar/controls/UndoControl';\nimport RedoControl from '../EditorToolbar/controls/RedoControl';\nimport BoldControl from '../EditorToolbar/controls/BoldControl';\nimport ItalicControl from '../EditorToolbar/controls/ItalicControl';\nimport UnderlineControl from '../EditorToolbar/controls/UnderlineControl';\nimport StrikethroughControl from '../EditorToolbar/controls/StrikethroughControl';\nimport LinkAddControl from '../EditorToolbar/controls/LinkAddControl';\nimport linkAddPlugin from '../EditorToolbar/controls/LinkAddControl/plugin';\nimport LinkRemoveControl from '../EditorToolbar/controls/LinkRemoveControl';\nimport BlockTypeControl from '../EditorToolbar/controls/BlockTypeControl';\nimport UnorderedListControl from '../EditorToolbar/controls/UnorderedListControl';\nimport OrderedListControl from '../EditorToolbar/controls/OrderedListControl';\nimport FontFamilyControl from '../EditorToolbar/controls/FontFamilyControl';\nimport fontFamilyPlugin from '../EditorToolbar/controls/FontFamilyControl/plugin';\nimport TextAlignControl from '../EditorToolbar/controls/TextAlignControl';\nimport textAlignPlugin from '../EditorToolbar/controls/TextAlignControl/plugin';\nimport FontSizeControl from '../EditorToolbar/controls/FontSizeControl';\nimport fontSizePlugin from '../EditorToolbar/controls/FontSizeControl/plugin';\nimport FontColorControl from '../EditorToolbar/controls/FontColorControl';\nimport fontColorPlugin from '../EditorToolbar/controls/FontColorControl/plugin';\nimport FontBackgroundColorControl from '../EditorToolbar/controls/FontBackgroundColorControl';\nimport fontBackgroundColorPlugin from '../EditorToolbar/controls/FontBackgroundColorControl/plugin';\nimport ImageControl from '../EditorToolbar/controls/ImageControl';\nimport imagePlugin from '../EditorToolbar/controls/ImageControl/plugin';\nimport { fileToBase64 } from '../utils/fileUtils';\nimport { LANG_PREFIX } from './lang';\n\nexport const toolbarControlTypes = {\n    divider: {\n        name: 'divider',\n        component: DividerControl,\n    },\n    undo: {\n        name: 'undo',\n        component: UndoControl,\n    },\n    redo: {\n        name: 'undo',\n        component: RedoControl,\n    },\n    bold: {\n        name: 'bold',\n        component: BoldControl,\n    },\n    italic: {\n        name: 'italic',\n        component: ItalicControl,\n    },\n    underline: {\n        name: 'underline',\n        component: UnderlineControl,\n    },\n    strikethrough: {\n        name: 'strikethrough',\n        component: StrikethroughControl,\n    },\n    fontColor: {\n        name: 'fontColor',\n        component: FontColorControl,\n        plugin: fontColorPlugin,\n    },\n    fontBackgroundColor: {\n        name: 'fontBackgroundColor',\n        component: FontBackgroundColorControl,\n        plugin: fontBackgroundColorPlugin,\n    },\n    linkAdd: {\n        name: 'linkAdd',\n        component: LinkAddControl,\n        plugin: linkAddPlugin,\n    },\n    linkRemove: {\n        name: 'linkRemove',\n        component: LinkRemoveControl,\n    },\n    image: {\n        name: 'image',\n        component: ImageControl,\n        plugin: imagePlugin,\n    },\n    blockType: {\n        name: 'blockType',\n        component: BlockTypeControl,\n    },\n    fontSize: {\n        name: 'fontSize',\n        component: FontSizeControl,\n        plugin: fontSizePlugin,\n    },\n    fontFamily: {\n        name: 'fontFamily',\n        component: FontFamilyControl,\n        plugin: fontFamilyPlugin,\n    },\n    textAlign: {\n        name: 'textAlign',\n        component: TextAlignControl,\n        plugin: textAlignPlugin,\n    },\n    unorderedList: {\n        name: 'unorderedList',\n        component: UnorderedListControl,\n    },\n    orderedList: {\n        name: 'orderedList',\n        component: OrderedListControl,\n    },\n};\n\nexport const defaultToolbarControls = [\n    toolbarControlTypes.undo,\n    toolbarControlTypes.redo,\n    toolbarControlTypes.divider,\n    toolbarControlTypes.bold,\n    toolbarControlTypes.italic,\n    toolbarControlTypes.underline,\n    toolbarControlTypes.strikethrough,\n    toolbarControlTypes.fontColor,\n    toolbarControlTypes.fontBackgroundColor,\n    toolbarControlTypes.divider,\n    toolbarControlTypes.linkAdd,\n    toolbarControlTypes.linkRemove,\n    toolbarControlTypes.image,\n    toolbarControlTypes.divider,\n    toolbarControlTypes.blockType,\n    toolbarControlTypes.fontSize,\n    toolbarControlTypes.fontFamily,\n    toolbarControlTypes.textAlign,\n    toolbarControlTypes.divider,\n    toolbarControlTypes.unorderedList,\n    toolbarControlTypes.orderedList,\n];\n\nconst colors = [\n    { text: 'black', value: 'rgb(0, 0, 0)' },\n    { text: 'dark grey 4', value: 'rgb(67, 67, 67)' },\n    { text: 'dark grey 3', value: 'rgb(102, 102, 102)' },\n    { text: 'dark grey 2', value: 'rgb(153, 153, 153)' },\n    { text: 'dark grey 1', value: 'rgb(183, 183, 183)' },\n    { text: 'grey', value: 'rgb(204, 204, 204)' },\n    { text: 'light grey 1', value: 'rgb(217, 217, 217)' },\n    { text: 'light grey 2', value: 'rgb(239, 239, 239)' },\n    { text: 'light grey 3', value: 'rgb(243, 243, 243)' },\n    { text: 'white', value: 'rgb(255, 255, 255)' },\n    { text: 'Red berry', value: 'rgb(152, 0, 0)' },\n    { text: 'red', value: 'rgb(255, 0, 0)' },\n    { text: 'orange', value: 'rgb(255, 153, 0)' },\n    { text: 'yellow', value: 'rgb(255, 255, 0)' },\n    { text: 'green', value: 'rgb(0, 255, 0)' },\n    { text: 'cyan', value: 'rgb(0, 255, 255)' },\n    { text: 'cornflower blue', value: 'rgb(74, 134, 232)' },\n    { text: 'blue', value: 'rgb(0, 0, 255)' },\n    { text: 'purple', value: 'rgb(153, 0, 255)' },\n    { text: 'magenta', value: 'rgb(255, 0, 255)' },\n    { text: 'light red berry 3', value: 'rgb(230, 184, 175)' },\n    { text: 'light red 3', value: 'rgb(244, 204, 204)' },\n    { text: 'light orange 3', value: 'rgb(252, 229, 205)' },\n    { text: 'light yellow 3', value: 'rgb(255, 242, 204)' },\n    { text: 'light green 3', value: 'rgb(217, 234, 211)' },\n    { text: 'light cyan 3', value: 'rgb(208, 224, 227)' },\n    { text: 'light cornflower blue 3', value: 'rgb(201, 218, 248)' },\n    { text: 'light blue 3', value: 'rgb(207, 226, 243)' },\n    { text: 'light purple 3', value: 'rgb(217, 210, 233)' },\n    { text: 'light magenta 3', value: 'rgb(234, 209, 220)' },\n    { text: 'light red berry 2', value: 'rgb(221, 126, 107)' },\n    { text: 'light red 2', value: 'rgb(234, 153, 153)' },\n    { text: 'light orange 2', value: 'rgb(249, 203, 156)' },\n    { text: 'light yellow 2', value: 'rgb(255, 229, 153)' },\n    { text: 'light green 2', value: 'rgb(182, 215, 168)' },\n    { text: 'light cyan 2', value: 'rgb(162, 196, 201)' },\n    { text: 'light cornflower blue 2', value: 'rgb(164, 194, 244)' },\n    { text: 'light blue 2', value: 'rgb(159, 197, 232)' },\n    { text: 'light purple 2', value: 'rgb(180, 167, 214)' },\n    { text: 'light magenta 2', value: 'rgb(213, 166, 189)' },\n    { text: 'light red berry 1', value: 'rgb(204, 65, 37)' },\n    { text: 'light red 1', value: 'rgb(224, 102, 102)' },\n    { text: 'light orange 1', value: 'rgb(246, 178, 107)' },\n    { text: 'light yellow 1', value: 'rgb(255, 217, 102)' },\n    { text: 'light green 1', value: 'rgb(147, 196, 125)' },\n    { text: 'light cyan 1', value: 'rgb(118, 165, 175)' },\n    { text: 'light cornflower blue 1', value: 'rgb(109, 158, 235)' },\n    { text: 'light blue 1', value: 'rgb(111, 168, 220)' },\n    { text: 'light purple 1', value: 'rgb(142, 124, 195)' },\n    { text: 'light magenta 1', value: 'rgb(194, 123, 160)' },\n    { text: 'dark red berry 1', value: 'rgb(166, 28, 0)' },\n    { text: 'dark red 1', value: 'rgb(204, 0, 0)' },\n    { text: 'dark orange 1', value: 'rgb(230, 145, 56)' },\n    { text: 'dark yellow 1', value: 'rgb(241, 194, 50)' },\n    { text: 'dark green 1', value: 'rgb(106, 168, 79)' },\n    { text: 'dark cyan 1', value: 'rgb(69, 129, 142)' },\n    { text: 'dark cornflower blue 1', value: 'rgb(60, 120, 216)' },\n    { text: 'dark blue 1', value: 'rgb(61, 133, 198)' },\n    { text: 'dark purple 1', value: 'rgb(103, 78, 167)' },\n    { text: 'dark magenta 1', value: 'rgb(166, 77, 121)' },\n    { text: 'dark red berry 2', value: 'rgb(133, 32, 12)' },\n    { text: 'dark red 2', value: 'rgb(153, 0, 0)' },\n    { text: 'dark orange 2', value: 'rgb(180, 95, 6)' },\n    { text: 'dark yellow 2', value: 'rgb(191, 144, 0)' },\n    { text: 'dark green 2', value: 'rgb(56, 118, 29)' },\n    { text: 'dark cyan 2', value: 'rgb(19, 79, 92)' },\n    { text: 'dark cornflower blue 2', value: 'rgb(17, 85, 204)' },\n    { text: 'dark blue 2', value: 'rgb(11, 83, 148)' },\n    { text: 'dark purple 2', value: 'rgb(53, 28, 117)' },\n    { text: 'dark magenta 2', value: 'rgb(116, 27, 71)' },\n    { text: 'dark red berry 3', value: 'rgb(91, 15, 0)' },\n    { text: 'dark red 3', value: 'rgb(102, 0, 0)' },\n    { text: 'dark orange 3', value: 'rgb(120, 63, 4)' },\n    { text: 'dark yellow 3', value: 'rgb(127, 96, 0)' },\n    { text: 'dark green 3', value: 'rgb(39, 78, 19)' },\n    { text: 'dark cyan 3', value: 'rgb(12, 52, 61)' },\n    { text: 'dark cornflower blue 3', value: 'rgb(28, 69, 135)' },\n    { text: 'dark blue 3', value: 'rgb(7, 55, 99)' },\n    { text: 'dark purple 3', value: 'rgb(32, 18, 77)' },\n    { text: 'dark magenta 3', value: 'rgb(76, 17, 48)' },\n];\n\nexport const defaultToolbarControlsConfiguration = {\n    blockType: {\n        options: [\n            {\n                value: 'default',\n                text: LANG_PREFIX + 'controls.blockType.labels.normal',\n            },\n            {\n                value: 'header-one',\n                text: LANG_PREFIX + 'controls.blockType.labels.header1',\n            },\n            {\n                value: 'header-two',\n                text: LANG_PREFIX + 'controls.blockType.labels.header2',\n            },\n            {\n                value: 'header-three',\n                text: LANG_PREFIX + 'controls.blockType.labels.header3',\n            },\n            {\n                value: 'header-four',\n                text: LANG_PREFIX + 'controls.blockType.labels.header4',\n            },\n            {\n                value: 'header-five',\n                text: LANG_PREFIX + 'controls.blockType.labels.header5',\n            },\n            {\n                value: 'header-six',\n                text: LANG_PREFIX + 'controls.blockType.labels.header6',\n            },\n        ],\n    },\n    image: {\n        uploadCallback: fileToBase64,\n    },\n    fontColor: {\n        colorsPerRow: 10,\n        options: colors,\n    },\n    fontBackgroundColor: {\n        colorsPerRow: 10,\n        options: colors,\n    },\n    fontSize: {\n        options: [\n            'default',\n            '8px',\n            '9px',\n            '10px',\n            '11px',\n            '12px',\n            '14px',\n            '18px',\n            '24px',\n            '30px',\n            '36px',\n            '48px',\n            '60px',\n            '72px',\n            '96px',\n        ],\n    },\n    fontFamily: {\n        options: [\n            'default',\n            'Arial',\n            'Verdana',\n            'Times New Roman',\n            'Georgia',\n            'Courier new',\n            'Lucida Console',\n        ],\n    },\n};\n","import { defaultToolbarControls, defaultToolbarControlsConfiguration } from './editorToolbar';\nimport Paper from '@mui/material/Paper';\n\n\n\n\nexport const defaultConfig = {\n    lang: 'en',\n    translations: {},\n    draftEditor: {},\n    editor: {\n        wrapperElement: Paper,\n        className: '',\n        style: {},\n    },\n    toolbar: {\n        className: '',\n        style: {},\n        visible: true,\n        position: 'top',\n        controls: defaultToolbarControls,\n        controlsConfig: defaultToolbarControlsConfiguration,\n    },\n};\n","/**\n * Simple object check.\n * @param item\n * @returns {boolean}\n */\nexport function isObject(item) {\n    return item && typeof item === 'object' && !Array.isArray(item);\n}\n\n/**\n * Deep merge two objects.\n * @param target\n * @param sources\n */\nexport function mergeDeep(target, ...sources) {\n    if (!sources.length) return target;\n    const source = sources.shift();\n\n    if (isObject(target) && isObject(source)) {\n        for (const key in source) {\n            // noinspection JSUnfilteredForInLoop\n            if (isObject(source[key])) {\n                // noinspection JSUnfilteredForInLoop\n                if (!target[key]) {\n                    // noinspection JSUnfilteredForInLoop\n                    Object.assign(target, { [key]: {} });\n                }\n                // noinspection JSUnfilteredForInLoop\n                mergeDeep(target[key], source[key]);\n            } else {\n                // noinspection JSUnfilteredForInLoop\n                Object.assign(target, { [key]: source[key] });\n            }\n        }\n    }\n\n    return mergeDeep(target, ...sources);\n}\n","export default {\n    controls: {\n        undo: {\n            title: 'Desfer',\n        },\n        redo: {\n            title: 'Refer',\n        },\n        bold: {\n            title: 'Negreta',\n        },\n        italic: {\n            title: 'Cursiva',\n        },\n        underline: {\n            title: 'Subratllat',\n        },\n        strikethrough: {\n            title: 'Ratllat',\n        },\n        code: {\n            title: 'Codi',\n        },\n        fontColor: {\n            title: 'Color de font',\n            labels: {\n                noColor: 'Sense color',\n            },\n        },\n        fontBackgroundColor: {\n            title: 'Color de resaltat del text',\n            labels: {\n                noColor: 'Sense color',\n            },\n        },\n        linkAdd: {\n            title: 'Afegir enllaç',\n            labels: {\n                link: 'Enllaç',\n            },\n            actions: {\n                add: 'Afegir',\n                cancel: 'Cancel·lar',\n            },\n        },\n        linkRemove: {\n            title: 'Eliminar enllaç',\n        },\n        image: {\n            title: 'Afegir imatge',\n            actions: {\n                upload: 'Pujar imatge',\n                url: 'Des de URL',\n                add: 'Afegir',\n                cancel: 'Cancel·lar',\n                alignLeft: \"Alinear a l'esquerra\",\n                alignCenter: 'Centrar',\n                alignRight: 'Alinear a la dreta',\n                remove: 'Eliminar imatge',\n                resize: 'Redimensionar',\n            },\n            labels: {\n                dropImageHere: 'Arrossega una imatge aquí o fes click per a pujar una',\n                width: 'Ample',\n                height: 'Alt',\n                url: 'URL',\n                insertOptions: 'Opcions de afegir imatge',\n                editOptions: \"Opcions d'imatge\",\n            },\n            errorMessages: {\n                notValidImage: 'La imatge no és vàlida',\n            },\n        },\n        blockType: {\n            title: 'Format de bloc',\n            labels: {\n                normal: 'Normal',\n                header1: 'Títol 1',\n                header2: 'Títol 2',\n                header3: 'Títol 3',\n                header4: 'Títol 4',\n                header5: 'Títol 5',\n                header6: 'Títol 6',\n            },\n        },\n        fontSize: {\n            title: 'Grandària de font',\n            labels: {\n                default: 'Per defecte',\n            },\n        },\n        fontFamily: {\n            title: 'Font',\n            labels: {\n                default: 'Per defecte',\n            },\n        },\n        textAlign: {\n            title: 'Alinear text',\n            actions: {\n                alignLeft: 'Esquerra',\n                alignCenter: 'Centre',\n                alignRight: 'Dreta',\n                justify: 'Justificar',\n            },\n        },\n        unorderedList: {\n            title: 'Vinyetes',\n        },\n        orderedList: {\n            title: 'Numeració',\n        },\n    },\n};\n","export default {\n    controls: {\n        undo: {\n            title: 'Undo',\n        },\n        redo: {\n            title: 'Redo',\n        },\n        bold: {\n            title: 'Bold',\n        },\n        italic: {\n            title: 'Italic',\n        },\n        underline: {\n            title: 'Underline',\n        },\n        strikethrough: {\n            title: 'Strike through',\n        },\n        code: {\n            title: 'Code',\n        },\n        fontColor: {\n            title: 'Font color',\n            labels: {\n                noColor: 'None',\n            },\n        },\n        fontBackgroundColor: {\n            title: 'Highlight color',\n            labels: {\n                noColor: 'None',\n            },\n        },\n        linkAdd: {\n            title: 'Add link',\n            labels: {\n                link: 'Link',\n            },\n            actions: {\n                add: 'Add',\n                cancel: 'Cancel',\n            },\n        },\n        linkRemove: {\n            title: 'Remove link',\n        },\n        image: {\n            title: 'Insert image',\n            actions: {\n                upload: 'Upload image',\n                url: 'By URL',\n                add: 'Add',\n                cancel: 'Cancel',\n                alignLeft: 'Align left',\n                alignCenter: 'Align center',\n                alignRight: 'Align right',\n                remove: 'Remove image',\n                resize: 'Resize',\n            },\n            labels: {\n                dropImageHere: 'Drop image here or click to upload',\n                width: 'Width',\n                height: 'Height',\n                url: 'URL',\n                insertOptions: 'Insert image options',\n                editOptions: 'Image options',\n            },\n            errorMessages: {\n                notValidImage: 'Not a valid image',\n            },\n        },\n        blockType: {\n            title: 'Block format',\n            labels: {\n                normal: 'Normal',\n                header1: 'Header 1',\n                header2: 'Header 2',\n                header3: 'Header 3',\n                header4: 'Header 4',\n                header5: 'Header 5',\n                header6: 'Header 6',\n            },\n        },\n        fontSize: {\n            title: 'Font size',\n            labels: {\n                default: 'default',\n            },\n        },\n        fontFamily: {\n            title: 'Font type',\n            labels: {\n                default: 'default',\n            },\n        },\n        textAlign: {\n            title: 'Align text',\n            actions: {\n                alignLeft: 'Left',\n                alignCenter: 'Center',\n                alignRight: 'Right',\n                justify: 'Justify',\n            },\n        },\n        unorderedList: {\n            title: 'Unordered list',\n        },\n        orderedList: {\n            title: 'Ordered list',\n        },\n    },\n};\n","export default {\n    controls: {\n        undo: {\n            title: 'Deshacer',\n        },\n        redo: {\n            title: 'Rehacer',\n        },\n        bold: {\n            title: 'Negrita',\n        },\n        italic: {\n            title: 'Cursiva',\n        },\n        underline: {\n            title: 'Subrayado',\n        },\n        strikethrough: {\n            title: 'Tachado',\n        },\n        code: {\n            title: 'Código',\n        },\n        fontColor: {\n            title: 'Color de fuente',\n            labels: {\n                noColor: 'Sin color',\n            },\n        },\n        fontBackgroundColor: {\n            title: 'Color de resaltado de texto',\n            labels: {\n                noColor: 'Sin color',\n            },\n        },\n        linkAdd: {\n            title: 'Añadir enlace',\n            labels: {\n                link: 'Enlace',\n            },\n            actions: {\n                add: 'Añadir',\n                cancel: 'Cancelar',\n            },\n        },\n        linkRemove: {\n            title: 'Eliminar enlace',\n        },\n        image: {\n            title: 'Insertar imagen',\n            actions: {\n                upload: 'Subir imagen',\n                url: 'Desde URL',\n                add: 'Añadir',\n                cancel: 'Cancelar',\n                alignLeft: 'Alinear a la izquierda',\n                alignCenter: 'Centrar',\n                alignRight: 'Alinear a la derecha',\n                remove: 'Eliminar imagen',\n                resize: 'Redimensionar',\n            },\n            labels: {\n                dropImageHere: 'Arrastra una imagen aquí o haz click para subir una',\n                width: 'Ancho',\n                height: 'Alto',\n                url: 'URL',\n                insertOptions: 'Opciones de insertar imagen',\n                editOptions: 'Opciones de imagen',\n            },\n            errorMessages: {\n                notValidImage: 'La imagen no es válida',\n            },\n        },\n        blockType: {\n            title: 'Formato de bloque',\n            labels: {\n                normal: 'Normal',\n                header1: 'Encabezado 1',\n                header2: 'Encabezado 2',\n                header3: 'Encabezado 3',\n                header4: 'Encabezado 4',\n                header5: 'Encabezado 5',\n                header6: 'Encabezado 6',\n            },\n        },\n        fontSize: {\n            title: 'Tamaño de fuente',\n            labels: {\n                default: 'Por defecto',\n            },\n        },\n        fontFamily: {\n            title: 'Fuente',\n            labels: {\n                default: 'Por defecto',\n            },\n        },\n        textAlign: {\n            title: 'Alinear texto',\n            actions: {\n                alignLeft: 'Izquierda',\n                alignCenter: 'Centro',\n                alignRight: 'Derecha',\n                justify: 'Justificar',\n            },\n        },\n        unorderedList: {\n            title: 'Viñetas',\n        },\n        orderedList: {\n            title: 'Numeración',\n        },\n    },\n};\n","import ca from './translations/ca';\nimport en from './translations/en';\nimport es from './translations/es';\n\nexport default { ca, en, es };\n","import React from 'react';\nimport { CompositeDecorator, DefaultDraftBlockRenderMap } from 'draft-js';\nimport { defaultConfig } from '../types/config';\nimport { mergeDeep } from './objectUtils';\nimport languages from '../lang/languages';\n\n\nconst defaultToolbarControlsConfiguration = defaultConfig.toolbar.controlsConfig;\n\nclass EditorFactories {\n    constructor(config) {\n        this.config = config || defaultConfig;\n    }\n\n    getCompositeDecorator() {\n        let decorators = [];\n        for (const control of this.getToolbarControls()) {\n            const pluginData = this.getPluginData(control);\n            if (pluginData && pluginData.decorators) {\n                decorators = decorators.concat(pluginData.decorators);\n            }\n        }\n        return decorators.length > 0 ? new CompositeDecorator(decorators) : null;\n    }\n\n    getCustomStyleMap() {\n        let customStyleMap = {};\n        for (const control of this.getToolbarControls()) {\n            const pluginData = this.getPluginData(control);\n            if (pluginData && pluginData.customStyleMap) {\n                customStyleMap = {\n                    ...customStyleMap,\n                    ...pluginData.customStyleMap,\n                };\n            }\n        }\n        return customStyleMap;\n    }\n\n    getBlockRenderMap() {\n        let renderMap = DefaultDraftBlockRenderMap;\n        for (const control of this.getToolbarControls()) {\n            const pluginData = this.getPluginData(control);\n            if (pluginData && pluginData.blockRenderMap) {\n                renderMap = renderMap.merge(pluginData.blockRenderMap);\n            }\n        }\n\n        return renderMap;\n    }\n\n    getBlockStyleFn() {\n        return (contentBlock) => {\n            let classNames = '';\n            for (const control of this.getToolbarControls()) {\n                const pluginData = this.getPluginData(control);\n                if (pluginData && pluginData.blockStyleFn) {\n                    const result = pluginData.blockStyleFn(contentBlock);\n                    if (result) classNames += ' ' + result;\n                }\n            }\n            return classNames.trim();\n        };\n    }\n\n    getBlockRendererFn() {\n        return (contentBlock) => {\n            for (const control of this.getToolbarControls()) {\n                const pluginData = this.getPluginData(control);\n                if (!pluginData || !pluginData.blockRendererFn) continue;\n                const result = pluginData.blockRendererFn(contentBlock);\n                if (result) return result;\n            }\n        };\n    }\n\n    getToolbarControls() {\n        return this.getConfigItem('toolbar', 'controls');\n    }\n\n    getToolbarControlComponents() {\n        const keyCounter = {};\n        return this.getToolbarControls().map((control) => {\n            if (!keyCounter[control.name]) keyCounter[control.name] = 0;\n            keyCounter[control.name]++;\n\n            return React.createElement(control.component, {\n                key: `${control.name}${keyCounter[control.name]}`,\n                configuration: this.getToolbarControlConfiguration(control.name),\n                defaultConfiguration: defaultToolbarControlsConfiguration[control.name],\n                pluginData: this.getPluginData(control),\n            });\n        });\n    }\n\n    getToolbarControlConfiguration(controlName) {\n        if (\n            this.config &&\n            this.config.toolbar &&\n            this.config.toolbar.controlsConfig &&\n            this.config.toolbar.controlsConfig[controlName]\n        )\n            return this.config.toolbar.controlsConfig[controlName];\n        else if (defaultToolbarControlsConfiguration[controlName])\n            return defaultToolbarControlsConfiguration[controlName];\n\n        return null;\n    }\n\n    getPluginData(control) {\n        if (!control.plugin) return null;\n        return control.plugin(\n            this.getToolbarControlConfiguration(control.name),\n            defaultToolbarControlsConfiguration[control.name]\n        );\n    }\n\n    getTranslations() {\n        const lang = this.getConfigItem('lang');\n        const langTranslations = languages[lang];\n        const customTranslations = this.config.translations || {};\n        return mergeDeep(langTranslations, customTranslations);\n    }\n\n    getToolbarPosition() {\n        return this.getConfigItem('toolbar', 'position').toLowerCase();\n    }\n\n    getConfigItem(...keys) {\n        let item = { ...this.config };\n        for (const key of keys) {\n            item = item[key];\n            if (item === undefined) break;\n        }\n\n        if (item !== undefined) return item;\n\n        item = { ...defaultConfig };\n        for (const key of keys) {\n            item = item[key];\n        }\n\n        return item;\n    }\n}\n\nexport default EditorFactories;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Grid from '@mui/material/Grid';\nimport Paper from '@mui/material/Paper';\n\nfunction EditorToolbar({ children, visible = true, ...rest }) {\n    return (\n        <Paper hidden={!visible} {...rest}>\n            <Grid container alignItems=\"center\">\n                {children}\n            </Grid>\n        </Paper>\n    );\n}\n\nEditorToolbar.propTypes = {\n    children: PropTypes.any,\n    visible: PropTypes.bool,\n};\n\nexport default EditorToolbar;\n","export default class Translator {\n    constructor(translations) {\n        this.translations = translations;\n    }\n\n    get(id) {\n        if (!id) return '';\n        const keys = id.split('.');\n        let item = this.translations;\n        for (const key of keys) {\n            item = item[key];\n            if (item === undefined) return '';\n        }\n        return item || '';\n    }\n}\n","import blockStyles from '../../types/blockStyles';\n\nexport const blockHTMLMap = {\n    [blockStyles.H1]: 'h1',\n    [blockStyles.H2]: 'h2',\n    [blockStyles.H3]: 'h3',\n    [blockStyles.H4]: 'h4',\n    [blockStyles.H5]: 'h5',\n    [blockStyles.H6]: 'h6',\n    [blockStyles.BLOCKQUOTE]: 'blockquote',\n    [blockStyles.CODE_BLOCK]: 'code',\n    [blockStyles.UNSTYLED]: 'p',\n    [blockStyles.ATOMIC]: 'figure',\n    [blockStyles.UL]: 'li',\n    [blockStyles.OL]: 'li',\n};\n","import entities from '../../types/entities';\n\nexport const entityHTMLMap = {\n    [entities.LINK]: (entity) => [`<a href=\"${entity.getData().url}\" target=\"_blank\">`, '</a>'],\n    [entities.IMAGE]: (entity) => [\n        `<img src=\"${entity.data.src}\" alt=\"\" width=\"${entity.getData().width}\" height=\"${\n            entity.getData().height\n        }\">`,\n        '',\n    ],\n};\n","import inlineStyles from '../../types/inlineStyles';\n\nconst isInlineStyleCollection = (inlineStyle, style) =>\n    inlineStyle.substr(0, style.length) === style;\nconst getInlineStyleCollectionValue = (inlineStyle, style) => inlineStyle.substr(style.length + 1);\nexport const getInlineStylesCss = (inlineStyle) => {\n    switch (inlineStyle) {\n        case inlineStyles.BOLD:\n            return 'font-weight: bold;';\n        case inlineStyles.ITALIC:\n            return 'font-style: italic;';\n        case inlineStyles.UNDERLINE:\n            return 'text-decoration: underline;';\n        case inlineStyles.STRIKETHROUGH:\n            return 'text-decoration: line-through;';\n        case inlineStyles.CODE:\n            return 'font-family: monospace;';\n        default:\n            if (isInlineStyleCollection(inlineStyle, inlineStyles.FONT_FAMILY)) {\n                return `font-family: '${getInlineStyleCollectionValue(\n                    inlineStyle,\n                    inlineStyles.FONT_FAMILY\n                )}';`;\n            }\n\n            if (isInlineStyleCollection(inlineStyle, inlineStyles.FONT_SIZE)) {\n                return `font-size: ${getInlineStyleCollectionValue(\n                    inlineStyle,\n                    inlineStyles.FONT_SIZE\n                )};`;\n            }\n\n            if (isInlineStyleCollection(inlineStyle, inlineStyles.FONT_COLOR)) {\n                return `color: ${getInlineStyleCollectionValue(\n                    inlineStyle,\n                    inlineStyles.FONT_COLOR\n                )};`;\n            }\n\n            if (isInlineStyleCollection(inlineStyle, inlineStyles.FONT_BACKGROUND)) {\n                return `background-color: ${getInlineStyleCollectionValue(\n                    inlineStyle,\n                    inlineStyles.FONT_BACKGROUND\n                )};`;\n            }\n\n            return '';\n    }\n};\n","import { blockHTMLMap } from './block';\nimport { entityHTMLMap } from './entity';\nimport { getInlineStylesCss } from './inlineStyle';\nimport blockStyles from '../../types/blockStyles';\n\nconst toHTML = (contentState) => {\n    let html = '';\n    let isListBlock = false;\n    const blockMap = contentState.getBlockMap();\n    let blockCount = 0;\n    for (const blockData of blockMap) {\n        const block = blockData[1];\n        // Block tags\n        const blockTag = blockHTMLMap[block.getType()];\n        const blockStyle = block.getData().has('textAlign')\n            ? `text-align:${block.getData().get('textAlign')};`\n            : null;\n        let blockOpenTag = blockTag\n            ? `<${blockTag}${blockStyle ? ` style=\"${blockStyle}\"` : ''}>`\n            : '';\n        let blockCloseTag = blockTag ? `</${blockTag}>` : '';\n\n        if (block.getType() === blockStyles.UL || block.getType() === blockStyles.OL) {\n            if (!isListBlock) {\n                blockOpenTag = `${\n                    block.getType() === blockStyles.UL ? '<ul>' : '<ol>'\n                }${blockOpenTag}`;\n            }\n            // if is the last block closes the list\n            if (blockCount === blockMap.length - 1) {\n                blockCloseTag = `${blockCloseTag}${\n                    block.getType() === blockStyles.UL ? '</ul>' : '</ol>'\n                }`;\n            }\n            isListBlock = true;\n        } else {\n            // Closes the previous opened list\n            if (isListBlock) {\n                blockOpenTag = `${\n                    block.getType() === blockStyles.UL ? '</ul>' : '</ol>'\n                }${blockOpenTag}`;\n            }\n            isListBlock = false;\n        }\n\n        if (block.getLength() === 0) {\n            html += blockOpenTag + blockCloseTag;\n            continue;\n        }\n\n        html += blockOpenTag;\n        let lastEntityKey = null;\n        const currentOpenedStylesMap = {};\n        for (const charIndex in block.getText()) {\n            const isLastChar = parseInt(charIndex) === block.getLength() - 1;\n            // Entities\n            let entityOpenTag = '';\n            let entityCloseTag = '';\n            const currentEntityKey = block.getEntityAt(charIndex);\n            if (currentEntityKey !== lastEntityKey) {\n                if (lastEntityKey === null) {\n                    const entity = contentState.getEntity(currentEntityKey);\n                    entityOpenTag = entityHTMLMap[entity.getType()](entity)[0];\n                } else if (currentEntityKey === null) {\n                    const entity = contentState.getEntity(lastEntityKey);\n                    entityCloseTag = entityHTMLMap[entity.getType()](entity)[1];\n                } else {\n                    const entityHaveToClose = contentState.getEntity(lastEntityKey);\n                    const entityHaveToOpen = contentState.getEntity(currentEntityKey);\n                    entityOpenTag =\n                        entityHTMLMap[entityHaveToClose.getType()](entityHaveToClose)[0] +\n                        entityHTMLMap[entityHaveToOpen.getType()](entityHaveToOpen)[1];\n                }\n            } else if (currentEntityKey !== null && isLastChar) {\n                const entity = contentState.getEntity(currentEntityKey);\n                entityCloseTag = entityHTMLMap[entity.getType()](entity)[1];\n            }\n\n            // Inline styles\n            const charInlineStyles = block.getInlineStyleAt(charIndex);\n            const styleCloseTagBeforeList = [];\n            const styleOpenTagList = [];\n            const styleCloseTagList = [];\n            const styleCloseTagOpenIndexList = [];\n            const styleCloseTagBeforeOpenIndexList = [];\n\n            for (const inlineStyle of charInlineStyles) {\n                if (currentOpenedStylesMap[inlineStyle] === undefined) {\n                    styleOpenTagList.push(inlineStyle);\n                    currentOpenedStylesMap[inlineStyle] = charIndex;\n                } else if (entityOpenTag || entityCloseTag) {\n                    styleCloseTagBeforeList.push(inlineStyle);\n                    styleCloseTagBeforeOpenIndexList.push(currentOpenedStylesMap[inlineStyle]);\n                    delete currentOpenedStylesMap[inlineStyle];\n                } else if (isLastChar) {\n                    styleCloseTagList.push(inlineStyle);\n                    styleCloseTagOpenIndexList.push(currentOpenedStylesMap[inlineStyle]);\n                    delete currentOpenedStylesMap[inlineStyle];\n                }\n            }\n\n            for (const inlineStyle in currentOpenedStylesMap) {\n                if (\n                    !charInlineStyles.includes(inlineStyle) &&\n                    !styleCloseTagList.includes(inlineStyle) &&\n                    !styleCloseTagBeforeList.includes(inlineStyle)\n                ) {\n                    styleCloseTagBeforeList.push(inlineStyle);\n                    styleCloseTagBeforeOpenIndexList.push(currentOpenedStylesMap[inlineStyle]);\n                    delete currentOpenedStylesMap[inlineStyle];\n                } else if (isLastChar) {\n                    styleCloseTagList.push(inlineStyle);\n                    styleCloseTagOpenIndexList.push(currentOpenedStylesMap[inlineStyle]);\n                    delete currentOpenedStylesMap[inlineStyle];\n                }\n            }\n\n            for (const closedIndex of styleCloseTagOpenIndexList) {\n                for (const inlineStyle in currentOpenedStylesMap) {\n                    if (currentOpenedStylesMap[inlineStyle] > closedIndex) {\n                        styleCloseTagList.push(inlineStyle);\n                        styleCloseTagOpenIndexList.push(currentOpenedStylesMap[inlineStyle]);\n                        delete currentOpenedStylesMap[inlineStyle];\n                    }\n                }\n            }\n\n            for (const closedIndex of styleCloseTagBeforeOpenIndexList) {\n                for (const inlineStyle in currentOpenedStylesMap) {\n                    if (\n                        currentOpenedStylesMap[inlineStyle] < charIndex &&\n                        currentOpenedStylesMap[inlineStyle] > closedIndex\n                    ) {\n                        styleCloseTagBeforeList.push(inlineStyle);\n                        styleCloseTagBeforeOpenIndexList.push(currentOpenedStylesMap[inlineStyle]);\n                        delete currentOpenedStylesMap[inlineStyle];\n                        if (charInlineStyles.includes(inlineStyle)) {\n                            styleOpenTagList.push(inlineStyle);\n                            currentOpenedStylesMap[inlineStyle] = charIndex;\n                        }\n                    }\n                }\n            }\n\n            // HTML Build\n            let j = 0;\n            while (j < styleCloseTagBeforeList.length) {\n                html += '</span>';\n                j++;\n            }\n            html += entityOpenTag;\n            for (const style of styleOpenTagList) {\n                html += '<span style=\"' + getInlineStylesCss(style) + '\">';\n            }\n            html += block.getText()[charIndex];\n            let k = 0;\n            while (k < styleCloseTagList.length) {\n                html += '</span>';\n                k++;\n            }\n            html += entityCloseTag;\n\n            lastEntityKey = currentEntityKey;\n        }\n        html += blockCloseTag;\n        blockCount++;\n    }\n    return html;\n};\n\nexport default toHTML;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { Editor, EditorState, RichUtils } from 'draft-js';\nimport EditorFactories from './utils/EditorFactories';\nimport EditorToolbar from './EditorToolbar';\nimport Paper from '@mui/material/Paper';\nimport { defaultConfig } from './types/config';\nimport Translator from './lang/Translator';\nimport makeStyles from '@mui/styles/makeStyles';\nimport toHTML from './conversion/toHTML';\nimport { useStore, useTransientState} from './store';\nexport { LANG_PREFIX } from './types/lang';\nexport { fileToBase64 } from './utils/fileUtils';\nexport { toHTML};\n\n\nexport const EditorContext = React.createContext({});\n\nexport const EditorStateContext = React.createContext(null);\n\nexport const MUIEditorState = {\n    createEmpty: (config) => {\n        const editorFactories = new EditorFactories(config);\n        return EditorState.createEmpty(editorFactories.getCompositeDecorator());\n    },\n    createWithContent: (config, contentState) => {\n        const editorFactories = new EditorFactories(config);\n        return EditorState.createWithContent(contentState, editorFactories.getCompositeDecorator());\n    },\n};\n\nconst useStyles = makeStyles((theme) => ({\n    '@global': {\n        '.mui-editor-left-aligned-block': {\n            textAlign: 'left !important',\n            '& > div': {\n                textAlign: 'left !important',\n            },\n        },\n        '.mui-editor-center-aligned-block': {\n            textAlign: 'center !important',\n            '& > div': {\n                textAlign: 'center !important',\n            },\n        },\n        '.mui-editor-right-aligned-block': {\n            textAlign: 'right !important',\n            '& > div': {\n                textAlign: 'right !important',\n            },\n        },\n        '.mui-editor-justify-aligned-block': {\n            textAlign: 'justify !important',\n            '& > div': {\n                textAlign: 'justify !important',\n            },\n        },\n    },\n    editorWrapper: {\n        marginTop: theme.spacing(2),\n        marginBottom: theme.spacing(2),\n        padding: theme.spacing(5),\n    },\n}));\n\n/**\n * Material UI Draft.js editor\n *\n * @version 1.0.3\n * @author [Rubén Albarracín](https://github.com/Kelsier90)\n */\n\n const getCachedConfigItem = (editorFactories, type, key) => {\n    return React.useMemo(() => editorFactories.getConfigItem(type, key), [editorFactories]);\n}\n\nconst ControlComponents = React.memo((props) => <div>{props.editorFactories.getToolbarControlComponents()}</div>);\n\n\nconst Toolbar = React.memo((props) => {\nconst {isToolbarVisible, editorFactories} = props;\nreturn (\n<EditorToolbar\n    visible={isToolbarVisible}\n    style={getCachedConfigItem(editorFactories, 'toolbar', 'style')}\n    className={getCachedConfigItem(editorFactories, 'toolbar', 'className')}>\n    <ControlComponents editorFactories={editorFactories} />\n</EditorToolbar>\n);\n});\n\nlet editorFactories;\n\nlet showResizeImageDialog;\nlet hideResizeImageDialog;\n\nlet blockStyleFn;\nlet customStyleMap;\nlet blockRenderMap;\nlet blockRendererFn;\n\n/*\n\nconst handleKeyCommand = (command) => {\n    console.log(\"KEY COMMAND\", command);\n    const newState = RichUtils.handleKeyCommand(getEditorState(), command);\n    if (newState) {\n        onChange(newState);\n        return 'handled';\n    }\n    return 'not-handled';\n};\n*/\n\nfunction MUIEditor({\n    onChange = function(){},\n    onFocus = function(){},\n    onBlur = function(){},\n    config = defaultConfig,\n}) {\n\n    const editorStateRef = useTransientState(state => state.editorState, false);\n    const setState = useStore(state => state.setState);\n    const setStuff = useStore(state => state.setStuff)\n\n    editorFactories = editorFactories || new EditorFactories(config);\n    const editorRef = React.useRef(null);\n    const translateRef = React.useRef(function () {});\n    const toolbarVisibleConfig = getCachedConfigItem(editorFactories, 'toolbar', 'visible');\n    const [isToolbarVisible, setIsToolbarVisible] = React.useState(toolbarVisibleConfig);\n    const [isResizeImageDialogVisible, setIsResizeImageDialogVisible] = React.useState(false);\n    const [resizeImageEntityKey, setResizeImageEntityKey] = React.useState(null);\n\n    showResizeImageDialog = showResizeImageDialog || function(setIsResizeImageDialogVisible, setResizeImageEntityKey, entityKey) {\n        setIsResizeImageDialogVisible(true);\n        setResizeImageEntityKey(entityKey);\n    }.bind(null, setIsResizeImageDialogVisible, setResizeImageEntityKey)\n\n    hideResizeImageDialog = hideResizeImageDialog || function(setIsResizeImageDialogVisible, setResizeImageEntityKey){\n        setIsResizeImageDialogVisible(false);\n        setResizeImageEntityKey(null);\n    }.bind(null, setIsResizeImageDialogVisible, setResizeImageEntityKey);\n\n\n    translateRef.current = React.useCallback(function(translations, id) {\n        const translator = new Translator(translations);\n        return translator.get(id);\n    }.bind(null, editorFactories.getTranslations()), []);\n\n    setStuff({ref:editorRef, onChange, translate: React.useCallback(function(translations, id) {\n        const translator = new Translator(translations);\n        return translator.get(id);\n    }.bind(null, editorFactories.getTranslations()), [])\n    })\n\n    const classes = useStyles();\n\n    React.useEffect(() => {\n        setIsToolbarVisible(toolbarVisibleConfig);\n    }, [toolbarVisibleConfig]);\n\n    const toolbar = <Toolbar isToolbarVisible={isToolbarVisible} editorFactories={editorFactories} />;\n\n\n    const top = editorFactories.getToolbarPosition() === 'top' ? toolbar : null;\n    const bottom = editorFactories.getToolbarPosition() === 'bottom' ? toolbar : null;\n\n\n    const wrapperOnClick = React.useCallback((ref) => {\n        ref.current.focus()\n    }, []);\n\n    const editorWrapperProps = React.useRef({\n        style: getCachedConfigItem(editorFactories, 'editor', 'style'),\n        className: `${classes.editorWrapper} ${getCachedConfigItem(editorFactories, 'editor', 'className')}`,\n        onClick: wrapperOnClick\n    });\n\n    const editorWrapperElement = getCachedConfigItem(editorFactories, 'editor', 'wrapperElement');\n\n    const handleKeyCommand = React.useCallback(function(stateRef, command) {\n\n        console.log(\"KEY COMMAND\", command);\n        const newState = RichUtils.handleKeyCommand(stateRef.current, command);\n        if (newState) {\n            onChange(newState);\n            return 'handled';\n        }\n        return 'not-handled';\n\n    }.bind(null, editorStateRef), []);\n\n    if (editorWrapperElement === Paper) {\n        editorWrapperProps.elevation = 3;\n    }\n\n    blockStyleFn = blockStyleFn || editorFactories.getBlockStyleFn();\n    customStyleMap = customStyleMap || editorFactories.getCustomStyleMap();\n    blockRenderMap = blockRenderMap || editorFactories.getBlockRenderMap();\n    blockRendererFn = blockRendererFn || editorFactories.getBlockRendererFn();\n\n    const EditorWrapper = React.createElement(\n        editorWrapperElement,\n        editorWrapperProps.current,\n        <Editor\n            {...(getCachedConfigItem(editorFactories, 'draftEditor') || {})}\n            ref={editorRef}\n            editorState={editorStateRef.current}\n            onChange={setState}\n            onFocus={onFocus}\n            onBlur={onBlur}\n            handleKeyCommand={handleKeyCommand}\n            blockStyleFn={blockStyleFn}\n            customStyleMap={customStyleMap}\n            blockRenderMap={blockRenderMap}\n            blockRendererFn={blockRendererFn}\n        />\n    );\n\n\n    const contextValue = React.useRef({\n        showResizeImageDialog,\n        hideResizeImageDialog,\n        isResizeImageDialogVisible,\n        resizeImageEntityKey,\n    });\n\n\n\n\n    return (\n        <EditorContext.Provider\n            value={contextValue}>\n                    {top}\n                    {EditorWrapper}\n                    {bottom}\n        </EditorContext.Provider>\n    );\n}\n\nMUIEditor.displayName = 'MUIEditor';\n\nMUIEditor.propTypes = {\n    /** Immutable object that represents the entire state of the editor */\n    editorState: PropTypes.object.isRequired,\n    /** The function to be executed by the Editor when edits and selection changes occur. The new editor state is passed by parameter. */\n    onChange: PropTypes.func.isRequired,\n    /** The function to be executed by the Editor when a focus event is triggered. The new editor state is passed by parameter. */\n    onFocus: PropTypes.func,\n    /** The function to be executed by the Editor when a blur event is triggered. The new editor state is passed by parameter. */\n    onBlur: PropTypes.func,\n    /** All the editor configuration options */\n    config: PropTypes.object,\n};\n\nMUIEditor.defaultProps = {\n    config: defaultConfig,\n};\n\nexport { MUIEditor };\n"],"names":["DividerControl","useStyles","makeStyles","badge","props","background","badgeColor","ButtonControl","children","onClick","disabled","active","text","rest","classes","vertical","horizontal","propTypes","PropTypes","any","isRequired","func","bool","useStore","create","set","get","editorState","MUIEditorState","createWithContent","convertFromRaw","blocks","data","depth","entityRanges","inlineStyleRanges","key","entityMap","ref","onChange","translate","setEditorState","setEditorRef","setOnChange","setTranslate","translation","setStuff","getOnChange","state","getEditorRef","getTranslate","useOnChange","useEditorRef","useTranslate","getEditorState","getState","useTransientState","selector","shallow","stateRef","React","useRef","useEffect","subscribe","selected","current","shallowCompare","undefined","stateOr","getEditorStateSelection","memoize","getSelection","getSelectionCollapsed","isCollaped","useSelectionCollapsed","selectors","blockType","RichUtils","getCurrentBlockType","currentContent","getCurrentContent","startKey","selection","getStartKey","startOffset","getStartOffset","endKey","getEndKey","endOffset","getEndOffset","currentInlineStyle","getCurrentInlineStyle","keysAndBlock","block","getBlockForKey","Object","entries","name","getBlockTypeToggle","newValue","toggleBlockType","hasSelectionStyle","inlineStyle","styleRangesCallback","start","end","expectedStart","getKey","expectedEnd","getLength","allHasTheInlineStyle","findStyleRanges","character","hasStyle","getBlockAfter","toggleMappedInlineStyle","styleKeys","newInlineStyle","newContentState","reduce","contentState","Modifier","removeInlineStyle","newEditorState","EditorState","push","currentStyle","isCollapsed","toggleInlineStyle","has","toString","UndoControl","editorRef","undo","focus","RedoControl","redo","useEditor","useContext","EditorContext","ToggleInlineStyleButtonControl","string","useState","isActive","setIsActive","BOLD","ITALIC","UNDERLINE","STRIKETHROUGH","CODE","FONT_FAMILY","FONT_SIZE","FONT_COLOR","FONT_BACKGROUND","BoldControl","inlineStyles","ItalicControl","editor","UnderlineControl","StrikethroughControl","useEditorState","setState","currentState","useEditorFocus","changesCount","setChangesCount","currentChangesCount","LINK","IMAGE","getCurrentMappedInlineStyle","defaultInlineStyle","find","includes","availableBlockTypes","avBlockType","applyEntityToCurrentSelection","entityType","mutability","entityData","content","contentWithEntity","createEntity","entityKey","getLastCreatedEntityKey","contentStateWithEntity","applyEntity","LinkAddControl","editorFocus","isDialogOpened","setIsDialogOpened","link","setLink","formRef","createRef","handleCloseDialog","onChangeLink","ev","currentTarget","value","handleSubmit","preventDefault","entities","url","linkStrategy","contentBlock","callback","findEntityRanges","getEntity","getType","showOptions","hideOptions","EditorLink","blockKey","anchorEl","setAnchorEl","getData","setEl","bind","openLink","stopPropagation","window","open","removeLink","linkSelection","SelectionState","createEmpty","merge","anchorKey","anchorOffset","focusKey","focusOffset","toggleLink","Boolean","object","number","linkAddPlugin","decorators","strategy","component","LinkRemoveControl","LANG_PREFIX","translateLiteralWithPrefix","literal","translateFn","String","substr","length","theme","selectControl","margin","spacing","DropdownControl","options","minWidth","target","map","option","array","BlockTypeControl","configuration","defaultConfiguration","setValue","handleChange","useCallback","ToggleBlockTypeButtonControl","UnorderedListControl","H1","H2","H3","H4","H5","H6","UL","OL","BLOCKQUOTE","CODE_BLOCK","UNSTYLED","ATOMIC","OrderedListControl","blockStyles","FontFamilyControl","pluginData","selectedFontFamilyStyle","setSelectedFontFamilyStyle","keys","customStyleMap","fontFamily","fontFamilyPlugin","fontFamilies","TextAlignControl","selectedTextAlign","setSelectedTextAlign","currentBlock","blockData","toggle","textAlign","mergeBlockData","textAlignPlugin","blockStyleFn","FontSizeControl","selectedFontSizeStyle","setSelectedFontSizeStyle","fontSize","style","fontSizePlugin","fontSizes","isLightOrDark","color","r","g","b","match","slice","replace","hsp","Math","sqrt","colorRow","display","alignContent","alignItems","padding","colorItem","height","width","borderRadius","border","cursor","ColorSelectorControl","selectedColor","onSelectColor","colors","colorsPerRow","menuId","random","substring","colorRows","i","rowI","handleOpen","handleClose","colorRowI","colorData","backgroundColor","ToggleInlineStyleColorSelectorControl","colorCssProp","setSelectedColor","selectededInlineStyle","handleSelectColor","selectedColorData","FontColorControl","fontColorPlugin","fontColors","fontColor","FontBackgroundColorControl","fontBackgroundColorPlugin","fontBgs","fontBg","imgWrapper","maxWidth","maxHeight","overflow","marginTop","marginBottom","ImageToUpload","src","SizeInputs","originalWidth","originalHeight","onChangeWidth","onChangeHeight","maintainAspectRatio","setMaintainAspectRatio","aspectRatio","handleChangeWidth","w","isNaN","parseInt","round","handleChangeHeight","h","handleClickAspectRatio","newMaintainAspectRatio","ByUrlDialog","onClose","onSubmit","imageURL","setImageURL","imageWidth","setImageWidth","imageOriginalWidth","setImageOriginalWidth","imageHeight","setImageHeight","imageOriginalHeight","setImageOriginalHeight","isUploading","setIsUploading","isValidImage","setIsValidImage","hasError","setHasError","changeTimeout","setChangeTimeout","resetForm","handleURLChange","clearTimeout","to","setTimeout","image","Image","onload","onerror","onEnter","dropArea","highlightDropArea","boxSizing","justifyContent","shape","palette","grey","hint","UploadDialog","uploadCallback","errorMessage","setErrorMessage","setHighlightDropArea","inputFileRef","handleClickDropArea","click","handleDragEnter","handleDragLeave","handleDragOver","handleDrop","files","dataTransfer","onSelectFile","handleInputFileChange","file","selectedImageUrl","e","dropAreaContent","ResizeImageDialog","onSave","setWidth","setHeight","ImageControl","isUploadDialogOpened","setIsUploadDialogOpened","isUrlDialogOpened","setIsUrlDialogOpened","imageEntityToResize","resizeImageEntityKey","handleSubmitImage","AtomicBlockUtils","insertAtomicBlock","handleResizeImage","hideResizeImageDialog","mergeEntityData","isResizeImageDialogVisible","EditorMedia","entity","getEntityAt","type","imgInfo","EditorImage","infoAnchorEl","setInfoAnchorEl","imageAlign","align","imageSelection","setBlockData","removeImage","removeRange","blockMap","getBlockMap","firstBlock","getFirstBlock","selectionToStart","selectionAfter","showResizeImageDialog","oneOfType","imagePlugin","blockRendererFn","editable","fileToBase64","Promise","resolve","reject","reader","FileReader","result","error","readAsDataURL","toolbarControlTypes","divider","bold","italic","underline","strikethrough","plugin","fontBackgroundColor","linkAdd","linkRemove","unorderedList","orderedList","defaultToolbarControls","defaultToolbarControlsConfiguration","defaultConfig","lang","translations","draftEditor","wrapperElement","Paper","className","toolbar","visible","position","controls","controlsConfig","isObject","item","Array","isArray","mergeDeep","sources","source","shift","assign","title","code","labels","noColor","actions","add","cancel","upload","alignLeft","alignCenter","alignRight","remove","resize","dropImageHere","insertOptions","editOptions","errorMessages","notValidImage","normal","header1","header2","header3","header4","header5","header6","justify","ca","en","es","EditorFactories","config","getCompositeDecorator","getToolbarControls","control","getPluginData","concat","CompositeDecorator","getCustomStyleMap","getBlockRenderMap","renderMap","DefaultDraftBlockRenderMap","blockRenderMap","getBlockStyleFn","classNames","trim","getBlockRendererFn","getConfigItem","getToolbarControlComponents","keyCounter","createElement","getToolbarControlConfiguration","controlName","getTranslations","langTranslations","languages","customTranslations","getToolbarPosition","toLowerCase","EditorToolbar","Translator","id","split","blockHTMLMap","entityHTMLMap","isInlineStyleCollection","getInlineStyleCollectionValue","getInlineStylesCss","toHTML","html","isListBlock","blockCount","blockTag","blockStyle","blockOpenTag","blockCloseTag","lastEntityKey","currentOpenedStylesMap","charIndex","getText","isLastChar","entityOpenTag","entityCloseTag","currentEntityKey","entityHaveToClose","entityHaveToOpen","charInlineStyles","getInlineStyleAt","styleCloseTagBeforeList","styleOpenTagList","styleCloseTagList","styleCloseTagOpenIndexList","styleCloseTagBeforeOpenIndexList","closedIndex","j","k","createContext","EditorStateContext","editorFactories","editorWrapper","getCachedConfigItem","useMemo","ControlComponents","memo","Toolbar","isToolbarVisible","MUIEditor","onFocus","onBlur","editorStateRef","translateRef","toolbarVisibleConfig","setIsToolbarVisible","setIsResizeImageDialogVisible","setResizeImageEntityKey","translator","top","bottom","wrapperOnClick","editorWrapperProps","editorWrapperElement","handleKeyCommand","command","console","log","newState","elevation","EditorWrapper","Editor","contextValue","displayName","defaultProps"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGA,SAASA,cAAT,GAA0B;AACtB,sBAAO,oBAAC,OAAD;AAAS,IAAA,WAAW,EAAC,UAArB;AAAgC,IAAA,QAAQ;AAAxC,IAAP;AACH;;;ACLD,AAOA,IAAMC,SAAS,GAAGC,UAAU,CAAC;AACzBC,EAAAA,KAAK,EAAE,eAACC,KAAD;AAAA,WAAY;AACfC,MAAAA,UAAU,EAAED,KAAK,CAACE;AADH,KAAZ;AAAA;AADkB,CAAD,CAA5B;;AAMA,SAASC,aAAT,OAQG;AAAA,MAPCC,QAOD,QAPCA,QAOD;AAAA,MANCC,OAMD,QANCA,OAMD;AAAA,2BALCC,QAKD;AAAA,MALCA,QAKD,8BALY,KAKZ;AAAA,yBAJCC,MAID;AAAA,MAJCA,MAID,4BAJU,KAIV;AAAA,uBAHCC,IAGD;AAAA,MAHCA,IAGD,0BAHQ,EAGR;AAAA,6BAFCN,UAED;AAAA,MAFCA,UAED,gCAFc,IAEd;AAAA,MADIO,IACJ;;AACC,MAAMC,OAAO,GAAGb,SAAS,CAAC;AAAEK,IAAAA,UAAU,EAAVA;AAAF,GAAD,CAAzB;AACA,sBACI,oBAAC,OAAD;AAAS,IAAA,KAAK,EAAEM,IAAhB;AAAsB,qBAAeF;AAArC,kBACI,+CACI,oBAAC,UAAD;AACI,IAAA,OAAO,EAAED,OADb;AAEI,IAAA,QAAQ,EAAEC,QAFd;AAGI,IAAA,KAAK,EAAEC,MAAM,GAAG,SAAH,GAAe;AAHhC,KAIQE,IAJR;AAKI,IAAA,IAAI,EAAC;AALT,mBAMI,oBAAC,KAAD;AACI,IAAA,YAAY,EAAE;AACVE,MAAAA,QAAQ,EAAE,KADA;AAEVC,MAAAA,UAAU,EAAE;AAFF,KADlB;AAKI,IAAA,OAAO,EAAE;AAAEb,MAAAA,KAAK,EAAEW,OAAO,CAACX;AAAjB,KALb;AAMI,IAAA,OAAO,EAAC,UANZ;AAOI,IAAA,YAAY,EAAC,GAPjB;AAQI,IAAA,SAAS,EAAEG,UAAU,KAAK,IAR9B;AASI,IAAA,OAAO,EAAC;AATZ,KAUKE,QAVL,CANJ,CADJ,CADJ,CADJ;AAyBH;;AAEDD,aAAa,CAACU,SAAd,GAA0B;AACtBT,EAAAA,QAAQ,EAAEU,SAAS,CAACC,GAAV,CAAcC,UADF;AAEtBX,EAAAA,OAAO,EAAES,SAAS,CAACG,IAAV,CAAeD,UAFF;AAGtBV,EAAAA,QAAQ,EAAEQ,SAAS,CAACI,IAHE;AAItBV,EAAAA,IAAI,EAAEM,SAAS,CAACC,GAJM;AAKtBb,EAAAA,UAAU,EAAEY,SAAS,CAACC,GALA;AAMtBR,EAAAA,MAAM,EAAEO,SAAS,CAACI;AANI,CAA1B;;AC1CO,IAAMC,QAAQ,GAAGC,MAAM,CAAC,UAACC,GAAD,EAAMC,GAAN;AAAA,SAAe;AAC1CC,IAAAA,WAAW,EAAEC,cAAc,CAACC,iBAAf,CAAiC,EAAjC,EAAqCC,sBAAc,CAAC;AAC7DC,MAAAA,MAAM,EAAE,CACJ;AACIC,QAAAA,IAAI,EAAE,EADV;AAEIC,QAAAA,KAAK,EAAE,CAFX;AAGIC,QAAAA,YAAY,EAAE,EAHlB;AAIIC,QAAAA,iBAAiB,EAAE,EAJvB;AAKIC,QAAAA,GAAG,EAAE,OALT;AAMIxB,QAAAA,IAAI,EAAE;AANV,OADI,CADqD;AAW7DyB,MAAAA,SAAS,EAAE;AAXkD,KAAD,CAAnD,CAD6B;AAc1CC,IAAAA,GAAG,EAAE,IAdqC;AAe1CC,IAAAA,QAAQ,EAAE,IAfgC;AAgB1CC,IAAAA,SAAS,EAAE,qBAAY,EAhBmB;AAiB1CC,IAAAA,cAAc,EAAE,wBAACd,WAAD;AAAA,aAAiBF,GAAG,CAAC,YAAM;AACvC,mBAAqBC,GAAG,EAAxB;AAAA,YAAQa,QAAR,QAAQA,QAAR;;AACA,YAAI,OAAOA,QAAP,KAAoB,UAAxB,EAAoC;AAChCA,UAAAA,QAAQ,CAACZ,WAAD,CAAR;AACH;;AAED,eAAO;AACHA,UAAAA,WAAW,EAAXA;AADG,SAAP;AAGH,OATmC,CAApB;AAAA,KAjB0B;AA2B1Ce,IAAAA,YAAY,EAAE,sBAACJ,GAAD;AAAA,aAASb,GAAG,CAAC;AAAA,eAAO;AAAEa,UAAAA,GAAG,EAAHA;AAAF,SAAP;AAAA,OAAD,CAAZ;AAAA,KA3B4B;AA4B1CK,IAAAA,WAAW,EAAE,qBAACJ,QAAD;AAAA,aAAcd,GAAG,CAAC;AAAA,eAAO;AAAEc,UAAAA,QAAQ,EAARA;AAAF,SAAP;AAAA,OAAD,CAAjB;AAAA,KA5B6B;AA6B1CK,IAAAA,YAAY,EAAE,sBAACC,WAAD;AAAA,aAAiBpB,GAAG,CAAC;AAAA,eAAO;AAAEoB,UAAAA,WAAW,EAAXA;AAAF,SAAP;AAAA,OAAD,CAApB;AAAA,KA7B4B;AA8B1CC,IAAAA,QAAQ,EAAE,kBAACR,GAAD,EAAMC,QAAN,EAAgBC,SAAhB;AAAA,aAA8Bf,GAAG,CAAC;AAAA,eAAO;AAAEa,UAAAA,GAAG,EAAHA,GAAF;AAAOC,UAAAA,QAAQ,EAARA,QAAP;AAAiBC,UAAAA,SAAS,EAATA;AAAjB,SAAP;AAAA,OAAD,CAAjC;AAAA;AA9BgC,GAAf;AAAA,CAAD,CAAvB;AAiCP,AAAO,IAAMO,WAAW,GAAG,SAAdA,WAAc,CAAAC,KAAK;AAAA,SAAIA,KAAK,CAACT,QAAV;AAAA,CAAzB;AACP,AACO,IAAMU,YAAY,GAAG,SAAfA,YAAe,CAAAD,KAAK;AAAA,SAAIA,KAAK,CAACV,GAAV;AAAA,CAA1B;AACP,AAAO,IAAMY,YAAY,GAAG,SAAfA,YAAe,CAAAF,KAAK;AAAA,SAAIA,KAAK,CAACR,SAAV;AAAA,CAA1B;AAEP,AAAO,IAAMW,WAAW,GAAG,SAAdA,WAAc;AAAA,SAAM5B,QAAQ,CAACwB,WAAD,CAAd;AAAA,CAApB;AACP,AACO,IAAMK,YAAY,GAAG,SAAfA,YAAe;AAAA,SAAM7B,QAAQ,CAAC0B,YAAD,CAAd;AAAA,CAArB;AACP,AAAO,IAAMI,YAAY,GAAG,SAAfA,YAAe;AAAA,SAAM9B,QAAQ,CAAC2B,YAAD,CAAd;AAAA,CAArB;AAIP,AAAO,IAAMI,cAAc,GAAG,SAAjBA,cAAiB,GAAM;AAChC,MAAMN,KAAK,GAAGzB,QAAQ,CAACgC,QAAT,EAAd;AACA,SAAOP,KAAK,CAACrB,WAAb;AACH,CAHM;AAKP,AAAO,IAAM6B,iBAAiB,GAAG,SAApBA,iBAAoB,CAACC,QAAD,EAA+CC,OAA/C,EAAmE;AAAA,MAAlED,QAAkE;AAAlEA,IAAAA,QAAkE,GAAvD,kBAAUT,KAAV,EAAiB;AAAE,aAAOA,KAAP;AAAc,KAAsB;AAAA;;AAAA,MAApBU,OAAoB;AAApBA,IAAAA,OAAoB,GAAV,KAAU;AAAA;;AAChG,MAAMC,QAAQ,GAAGC,KAAK,CAACC,MAAN,CAAaJ,QAAQ,CAAClC,QAAQ,CAACgC,QAAT,EAAD,CAAR,IAAiC,IAA9C,CAAjB;AAEAO,EAAAA,SAAS,CAAC;AAAA,WAAMvC,QAAQ,CAACwC,SAAT,CACZ,UAAAC,QAAQ;AAAA,aAAKL,QAAQ,CAACM,OAAT,GAAmBD,QAAxB;AAAA,KADI,EAEZ,UAAChB,KAAD;AAAA,aAAWS,QAAQ,CAACT,KAAD,CAAnB;AAAA,KAFY,EAGZU,OAAO,GAAGQ,cAAH,GAAoBC,SAHf,CAAN;AAAA,GAAD,EAIN,EAJM,CAAT;AAMA,SAAOR,QAAP;AACH,CAVM;AAaP;AA2CA,IAAMS,OAAO,GAAG,SAAVA,OAAU,CAACpB,KAAD;AAAA,SAAWA,KAAK,SAAL,IAAAA,KAAK,WAAL,IAAAA,KAAK,CAAErB,WAAP,GAAqBqB,KAAK,CAACrB,WAA3B,GAAyCqB,KAApD;AAAA,CAAhB;;AAEA,AAAO,IAAMqB,uBAAuB,GAAGC,OAAO,CAAC,UAACtB,KAAD,EAAW;AACtD,MAAMrB,WAAW,GAAGyC,OAAO,CAACpB,KAAD,CAA3B;AACA,SAAOrB,WAAW,CAAC4C,YAAZ,EAAP;AACH,CAH6C,EAG3C,UAACvB,KAAD;AAAA,SAAWA,KAAK,SAAL,IAAAA,KAAK,WAAL,IAAAA,KAAK,CAAErB,WAAP,GAAqBqB,KAAK,CAACrB,WAA3B,GAAyCqB,KAApD;AAAA,CAH2C,CAAvC;;AAKP,IAAMwB,qBAAqB,GAAG,SAAxBA,qBAAwB,CAAAxB,KAAK;AAAA,SAAIA,KAAK,CAACrB,WAAN,CAAkB4C,YAAlB,GAAiCE,UAAjC,EAAJ;AAAA,CAAnC;;AACA,AAAO,IAAMC,qBAAqB,GAAG,SAAxBA,qBAAwB;AAAA,SAAMnD,QAAQ,CAACiD,qBAAD,CAAd;AAAA,CAA9B;AAEP,IAAIG,SAAS,GAAG;AACZhD,EAAAA,WAAW,EAAE,qBAACqB,KAAD;AAAA,WAAWoB,OAAO,CAACpB,KAAD,CAAlB;AAAA,GADD;AAEZ4B,EAAAA,SAAS,EAAE,mBAAC5B,KAAD;AAAA,WAAW6B,iBAAS,CAACC,mBAAV,CAA8BV,OAAO,CAACpB,KAAD,CAArC,CAAX;AAAA,GAFC;AAGZ+B,EAAAA,cAAc,EAAE,wBAAC/B,KAAD;AAAA,WAAWoB,OAAO,CAACpB,KAAD,CAAP,CAAegC,iBAAf,EAAX;AAAA,GAHJ;AAIZC,EAAAA,QAAQ,EAAE,kBAACjC,KAAD,EAAW;AAAE,QAAMkC,SAAS,GAAGb,uBAAuB,CAACD,OAAO,CAACpB,KAAD,CAAR,CAAzC;AAA2D,WAAOkC,SAAS,GAAGA,SAAS,CAACC,WAAV,EAAH,GAA6B,IAA7C;AAAoD,GAJ1H;AAKZC,EAAAA,WAAW,EAAE,qBAACpC,KAAD,EAAW;AAAE,QAAMkC,SAAS,GAAGb,uBAAuB,CAACD,OAAO,CAACpB,KAAD,CAAR,CAAzC;AAA2D,WAAOkC,SAAS,GAAGA,SAAS,CAACG,cAAV,EAAH,GAAgC,IAAhD;AAAuD,GALhI;AAMZC,EAAAA,MAAM,EAAE,gBAACtC,KAAD,EAAW;AAAE,QAAMkC,SAAS,GAAGb,uBAAuB,CAACD,OAAO,CAACpB,KAAD,CAAR,CAAzC;AAA2D,WAAOkC,SAAS,GAAGA,SAAS,CAACK,SAAV,EAAH,GAA2B,IAA3C;AAAkD,GANtH;AAOZC,EAAAA,SAAS,EAAE,mBAACxC,KAAD,EAAW;AAAE,QAAMkC,SAAS,GAAGb,uBAAuB,CAACD,OAAO,CAACpB,KAAD,CAAR,CAAzC;AAA2D,WAAOkC,SAAS,GAAGA,SAAS,CAACO,YAAV,EAAH,GAA8B,IAA9C;AAAqD,GAP5H;AAQZC,EAAAA,kBAAkB,EAAE,4BAAC1C,KAAD;AAAA,WAAWoB,OAAO,CAACpB,KAAD,CAAP,CAAe2C,qBAAf,EAAX;AAAA,GARR;AASZC,EAAAA,YAAY,EAAE,sBAAC5C,KAAD,EAAW;AACrB,QAAMrB,WAAW,GAAGyC,OAAO,CAACpB,KAAD,CAA3B;AAEA,QAAMkC,SAAS,GAAGP,SAAS,CAACO,SAAV,CAAoBvD,WAApB,CAAlB;AACA,QAAMsD,QAAQ,GAAGC,SAAS,CAACC,WAAV,EAAjB;AACA,QAAMC,WAAW,GAAGF,SAAS,CAACG,cAAV,EAApB;AACA,QAAMC,MAAM,GAAGJ,SAAS,CAACK,SAAV,EAAf;AACA,QAAMC,SAAS,GAAGN,SAAS,CAACO,YAAV,EAAlB;AAEA,QAAMV,cAAc,GAAGpD,WAAW,CAACqD,iBAAZ,EAAvB;AAEA,QAAIa,KAAK,GAAGd,cAAc,CAACe,cAAf,CAA8Bb,QAA9B,CAAZ;AAEA,WAAO;AACHA,MAAAA,QAAQ,EAARA,QADG;AAEHG,MAAAA,WAAW,EAAXA,WAFG;AAGHE,MAAAA,MAAM,EAANA,MAHG;AAIHE,MAAAA,SAAS,EAATA,SAJG;AAKHT,MAAAA,cAAc,EAAdA,cALG;AAMHc,MAAAA,KAAK,EAALA;AANG,KAAP;AAQH;AA9BW,CAAhB;;AAiCA,mCAA+BE,MAAM,CAACC,OAAP,CAAerB,SAAf,CAA/B,qCAA0D;AAArD;AAAA,MAAOsB,IAAP;AAAA,MAAaxC,QAAb;AACDkB,EAAAA,SAAS,CAACsB,IAAD,CAAT,GAAkB3B,OAAO,CAACb,QAAD,EAAW,UAACT,KAAD;AAAA,WAAWoB,OAAO,CAACpB,KAAD,CAAlB;AAAA,GAAX,CAAzB;AACH;;AAED2B,SAAS,CAACO,SAAV,GAAsBb,uBAAtB;AAEA,AAeO,IAAM6B,kBAAkB,GAAG5B,OAAO,CAAC,UAAC6B,QAAD,EAAyB;AAAA,MAAxBA,QAAwB;AAAxBA,IAAAA,QAAwB,GAAb,QAAa;AAAA;;AAC/D,MAAMnD,KAAK,GAAGzB,QAAQ,CAACgC,QAAT,EAAd;AACA,SAAOsB,iBAAS,CAACuB,eAAV,CACHpD,KAAK,CAACrB,WADH,EAEHwE,QAAQ,KAAK,QAAb,GAAwB,EAAxB,GAA6BA,QAF1B,CAAP;AAIH,CANwC,EAMtC,UAACA,QAAD;AAAA,SAAcA,QAAd;AAAA,CANsC,CAAlC;AASP,AAAO,IAAME,iBAAiB,GAAG,SAApBA,iBAAoB,CAACC,WAAD,EAAiB;AAC9C,MAAMtD,KAAK,GAAGzB,QAAQ,CAACgC,QAAT,EAAd;;AAEA,8BAA4EoB,SAAS,CAACiB,YAAV,CAAuB5C,KAAvB,CAA5E;AAAA,MAAQiC,QAAR,yBAAQA,QAAR;AAAA,MAAkBG,WAAlB,yBAAkBA,WAAlB;AAAA,MAA+BE,MAA/B,yBAA+BA,MAA/B;AAAA,MAAuCE,SAAvC,yBAAuCA,SAAvC;AAAA,MAAkDT,cAAlD,yBAAkDA,cAAlD;AAAA,MAAkEc,KAAlE,yBAAkEA,KAAlE;;AAEA,MAAMU,mBAAmB,GAAG,SAAtBA,mBAAsB,CAACV,KAAD;AAAA,WAAW,UAACW,KAAD,EAAQC,GAAR,EAAgB;AACnD,UAAMC,aAAa,GAAGb,KAAK,CAACc,MAAN,OAAmB1B,QAAnB,GAA8BG,WAA9B,GAA4C,CAAlE;AACA,UAAMwB,WAAW,GAAGf,KAAK,CAACc,MAAN,OAAmBrB,MAAnB,GAA4BE,SAA5B,GAAwCK,KAAK,CAACgB,SAAN,KAAoB,CAAhF;AACAC,MAAAA,oBAAoB,GAAGN,KAAK,IAAIE,aAAT,IAA0BD,GAAG,IAAIG,WAAxD;AACH,KAJ2B;AAAA,GAA5B;;AAMA,SAAOf,KAAK,IAAIiB,oBAAhB,EAAsC;AAClCA,IAAAA,oBAAoB,GAAG,KAAvB;AACAjB,IAAAA,KAAK,CAACkB,eAAN,CACI,UAACC,SAAD;AAAA,aAAeA,SAAS,CAACC,QAAV,CAAmBX,WAAnB,CAAf;AAAA,KADJ,EAEIC,mBAAmB,CAACV,KAAD,CAFvB;AAIA,QAAIA,KAAK,CAACc,MAAN,OAAmBrB,MAAvB,EAA+B;AACvBP,IAAAA,cAAc,CAACmC,aAAf,CAA6BrB,KAAK,CAACc,MAAN,EAA7B,CAAR;AACH;;AAED,SAAOG,oBAAP;AACH,CAtBM;AA0BP,AAAO,IAAMK,uBAAuB,GAAG7C,OAAO,CAAC,UAAC8C,SAAD,EAAYC,cAAZ,EAA+B;AAC1E,MAAMrE,KAAK,GAAGzB,QAAQ,CAACgC,QAAT,EAAd;AACA,MAAQ5B,WAAR,GAAwBqB,KAAxB,CAAQrB,WAAR;AAEA,MAAMuD,SAAS,GAAGP,SAAS,CAACO,SAAV,CAAoBlC,KAApB,CAAlB;AAIA,MAAMsE,eAAe,GAAGF,SAAS,CAACG,MAAV,CACpB,UAACC,YAAD,EAAelB,WAAf;AAAA,WACImB,gBAAQ,CAACC,iBAAT,CAA2BF,YAA3B,EAAyCtC,SAAzC,EAAoDoB,WAApD,CADJ;AAAA,GADoB,EAGpB3B,SAAS,CAACI,cAAV,CAAyB/B,KAAzB,CAHoB,CAAxB;AAMA,MAAI2E,cAAc,GAAGC,mBAAW,CAACC,IAAZ,CAAiBlG,WAAjB,EAA8B2F,eAA9B,EAA+C,qBAA/C,CAArB;AAEA,MAAMQ,YAAY,GAAGnG,WAAW,CAACgE,qBAAZ,EAArB;;AAEA,MAAIT,SAAS,CAAC6C,WAAV,EAAJ,EAA6B;AACzBJ,IAAAA,cAAc,GAAGG,YAAY,CAACP,MAAb,CAAoB,UAACvE,KAAD,EAAQsD,WAAR,EAAwB;AACzD,aAAOzB,iBAAS,CAACmD,iBAAV,CAA4BhF,KAA5B,EAAmCsD,WAAnC,CAAP;AACH,KAFgB,EAEdqB,cAFc,CAAjB;AAGH;;AAED,MAAI,CAACG,YAAY,CAACG,GAAb,CAAiBZ,cAAjB,CAAL,EAAuC;AACnCM,IAAAA,cAAc,GAAG9C,iBAAS,CAACmD,iBAAV,CAA4BL,cAA5B,EAA4CN,cAA5C,CAAjB;AACH;;AAED,SAAOM,cAAP;AACH,CA7B6C,EA6B3C,UAACP,SAAD,EAAYd,WAAZ;AAAA,SAA4Bc,SAAS,CAACc,QAAV,KAAuB5B,WAAnD;AAAA,CA7B2C,CAAvC;;AC7MP,SAAS6B,WAAT,GAAuB;AAEnB,MAAM5F,QAAQ,GAAGY,WAAW,EAA5B;AAEA,MAAMX,SAAS,GAAGa,YAAY,EAA9B;AACA,MAAM+E,SAAS,GAAGhF,YAAY,EAA9B;;AAKA,MAAM3C,OAAO,GAAG,SAAVA,OAAU,GAAM;AAElB8B,IAAAA,QAAQ,CAACqF,mBAAW,CAACS,IAAZ,CAAiB/E,cAAc,EAA/B,CAAD,CAAR;AACA8E,IAAAA,SAAS,CAACnE,OAAV,CAAkBqE,KAAlB;AACH,GAJD;;AAMA,sBACI,oBAAC,aAAD;AAAe,IAAA,OAAO,EAAE7H,OAAxB;AAAiC,IAAA,IAAI,EAAE+B,SAAS,CAAC,qBAAD;AAAhD,kBACI,oBAAC,QAAD,OADJ,CADJ;AAKH;;ACvBD,SAAS+F,WAAT,GAAuB;AACnB,MAAMhG,QAAQ,GAAGY,WAAW,EAA5B;AAEA,MAAMX,SAAS,GAAGa,YAAY,EAA9B;AACA,MAAM+E,SAAS,GAAGhF,YAAY,EAA9B;;AAEA,MAAM3C,OAAO,GAAG,SAAVA,OAAU,GAAM;AAClB8B,IAAAA,QAAQ,CAACqF,mBAAW,CAACY,IAAZ,CAAiBlF,cAAc,EAA/B,CAAD,CAAR;AACA8E,IAAAA,SAAS,CAACnE,OAAV,CAAkBqE,KAAlB;AACH,GAHD;;AAKA,sBACI,oBAAC,aAAD;AAAe,IAAA,OAAO,EAAE7H,OAAxB;AAAiC,IAAA,IAAI,EAAE+B,SAAS,CAAC,qBAAD;AAAhD,kBACI,oBAAC,QAAD,OADJ,CADJ;AAKH;;ACnBc,SAASiG,SAAT,GAAqB;AAChC,SAAO7E,KAAK,CAAC8E,UAAN,CAAiBC,aAAjB,CAAP;AACH;;ACGDC,8BAA8B,CAAC3H,SAA/B,GAA2C;AACvCqF,EAAAA,WAAW,EAAEpF,SAAS,CAAC2H,MAAV,CAAiBzH,UADS;AAEvCZ,EAAAA,QAAQ,EAAEU,SAAS,CAACC,GAAV,CAAcC,UAFe;AAGvCR,EAAAA,IAAI,EAAEM,SAAS,CAACC;AAHuB,CAA3C;;AAMA,SAASyH,8BAAT,OAAyE;AAAA,MAA/BtC,WAA+B,QAA/BA,WAA+B;AAAA,MAAlB9F,QAAkB,QAAlBA,QAAkB;AAAA,MAARI,IAAQ,QAARA,IAAQ;AACrE,MAAMwH,SAAS,GAAGhF,YAAY,EAA9B;AACA,MAAM2E,WAAW,GAAGrD,qBAAqB,EAAzC;AACA,MAAMnC,QAAQ,GAAGY,WAAW,EAA5B;;AAEA,wBAAgCS,KAAK,CAACkF,QAAN,CAAe,KAAf,CAAhC;AAAA,MAAOC,QAAP;AAAA,MAAiBC,WAAjB;;AAEApF,EAAAA,KAAK,CAACE,SAAN,CAAgB,YAAM;AAClBkF,IAAAA,WAAW,CAAC3C,iBAAiB,CAACC,WAAD,CAAlB,CAAX;AACH,GAFD,EAEG,CAACA,WAAD,CAFH;;AAIA,MAAM7F,OAAO,GAAG,SAAVA,OAAU,GAAM;AAClB,QAAMkH,cAAc,GAAG9C,iBAAS,CAACmD,iBAAV,CAA4B1E,cAAc,EAA1C,EAA8CgD,WAA9C,CAAvB;AACA/D,IAAAA,QAAQ,CAACoF,cAAD,CAAR;AACAS,IAAAA,SAAS,CAACnE,OAAV,CAAkBqE,KAAlB;AACH,GAJD;;AAMA,sBACI,oBAAC,aAAD;AACI,IAAA,IAAI,EAAE1H,IADV;AAEI,IAAA,OAAO,EAAEH,OAFb;AAGI,IAAA,MAAM,EAAEsI,QAHZ;AAII,IAAA,QAAQ,EAAEhB;AAJd,KAKKvH,QALL,CADJ;AASH;;ACxCD,mBAAe;AACXyI,EAAAA,IAAI,EAAE,MADK;AAEXC,EAAAA,MAAM,EAAE,QAFG;AAGXC,EAAAA,SAAS,EAAE,WAHA;AAIXC,EAAAA,aAAa,EAAE,eAJJ;AAKXC,EAAAA,IAAI,EAAE,MALK;AAMXC,EAAAA,WAAW,EAAE,aANF;AAOXC,EAAAA,SAAS,EAAE,WAPA;AAQXC,EAAAA,UAAU,EAAE,YARD;AASXC,EAAAA,eAAe,EAAE;AATN,CAAf;;ACQA,SAASC,WAAT,GAAuB;AACnB,MAAMlH,SAAS,GAAGa,YAAY,EAA9B;AAEA,sBACI,oBAAC,8BAAD;AACI,IAAA,WAAW,EAAEsG,YAAY,CAACV,IAD9B;AAEI,IAAA,IAAI,EAAEzG,SAAS,CAAC,qBAAD;AAFnB,kBAGI,oBAAC,cAAD,OAHJ,CADJ;AAOH;;ACZD,SAASoH,aAAT,GAAyB;AACrB,MAAMC,MAAM,GAAGpB,SAAS,EAAxB;AAEA,sBACI,oBAAC,8BAAD;AACI,IAAA,WAAW,EAAEkB,YAAY,CAACT,MAD9B;AAEI,IAAA,IAAI,EAAEW,MAAM,CAACrH,SAAP,CAAiB,uBAAjB;AAFV,kBAGI,oBAAC,gBAAD,OAHJ,CADJ;AAOH;;ACVD,SAASsH,gBAAT,GAA4B;AACxB,MAAMD,MAAM,GAAGpB,SAAS,EAAxB;AAEA,sBACI,oBAAC,8BAAD;AACI,IAAA,WAAW,EAAEkB,YAAY,CAACR,SAD9B;AAEI,IAAA,IAAI,EAAEU,MAAM,CAACrH,SAAP,CAAiB,0BAAjB;AAFV,kBAGI,oBAAC,oBAAD,OAHJ,CADJ;AAOH;;ACVD,SAASuH,oBAAT,GAAgC;AAC5B,MAAMF,MAAM,GAAGpB,SAAS,EAAxB;AAEA,sBACI,oBAAC,8BAAD;AACI,IAAA,WAAW,EAAEkB,YAAY,CAACP,aAD9B;AAEI,IAAA,IAAI,EAAES,MAAM,CAACrH,SAAP,CAAiB,8BAAjB;AAFV,kBAGI,oBAAC,uBAAD,OAHJ,CADJ;AAOH;;ACdc,SAASwH,cAAT,CAAwBH,MAAxB,EAAgC;AAC3C,wBAA0BjG,KAAK,CAACkF,QAAN,CAAee,MAAM,CAACvG,cAAP,EAAf,CAA1B;AAAA,MAAON,KAAP;AAAA,MAAciH,QAAd;;AAEA,MAAMC,YAAY,GAAGL,MAAM,CAACvG,cAAP,EAArB;AAEAM,EAAAA,KAAK,CAACE,SAAN,CAAgB,YAAM;AAClBmG,IAAAA,QAAQ,CAACC,YAAD,CAAR;AACH,GAFD,EAEG,CAACA,YAAD,CAFH;AAIA,SAAOlH,KAAP;AACH;;ACTc,SAASmH,cAAT,GAA0B;AACrC,MAAMN,MAAM,GAAGpB,SAAS,EAAxB;;AACA,wBAAwC7E,KAAK,CAACkF,QAAN,CAAe,CAAf,CAAxC;AAAA,MAAOsB,YAAP;AAAA,MAAqBC,eAArB;;AAEAzG,EAAAA,KAAK,CAACE,SAAN,CAAgB,YAAM;AAClB,QAAIsG,YAAY,GAAG,CAAnB,EAAsBP,MAAM,CAACvH,GAAP,CAAWgG,KAAX;AACzB,GAFD,EAEG,CAAC8B,YAAD,EAAeP,MAAM,CAACvH,GAAtB,CAFH;AAIA,SAAO,YAAM;AACT+H,IAAAA,eAAe,CAAC,UAACC,mBAAD;AAAA,aAAyBA,mBAAmB,GAAG,CAA/C;AAAA,KAAD,CAAf;AACH,GAFD;AAGH;;ACdD,eAAe;AACXC,EAAAA,IAAI,EAAE,MADK;AAEXC,EAAAA,KAAK,EAAE;AAFI,CAAf;;ACEO,IAAMrD,yBAAuB,GAAG,SAA1BA,uBAA0B,CAACxF,WAAD,EAAcyF,SAAd,EAAyBC,cAAzB,EAA4C;AAC/E,MAAMnC,SAAS,GAAGvD,WAAW,CAAC4C,YAAZ,EAAlB;AAGA,MAAM+C,eAAe,GAAGF,SAAS,CAACG,MAAV,CACpB,UAACC,YAAD,EAAelB,WAAf;AAAA,WACImB,gBAAQ,CAACC,iBAAT,CAA2BF,YAA3B,EAAyCtC,SAAzC,EAAoDoB,WAApD,CADJ;AAAA,GADoB,EAGpB3E,WAAW,CAACqD,iBAAZ,EAHoB,CAAxB;AAMA,MAAI2C,cAAc,GAAGC,mBAAW,CAACC,IAAZ,CAAiBlG,WAAjB,EAA8B2F,eAA9B,EAA+C,qBAA/C,CAArB;AAEA,MAAMQ,YAAY,GAAGnG,WAAW,CAACgE,qBAAZ,EAArB;;AAEA,MAAIT,SAAS,CAAC6C,WAAV,EAAJ,EAA6B;AACzBJ,IAAAA,cAAc,GAAGG,YAAY,CAACP,MAAb,CAAoB,UAACvE,KAAD,EAAQsD,WAAR,EAAwB;AACzD,aAAOzB,iBAAS,CAACmD,iBAAV,CAA4BhF,KAA5B,EAAmCsD,WAAnC,CAAP;AACH,KAFgB,EAEdqB,cAFc,CAAjB;AAGH;;AAED,MAAI,CAACG,YAAY,CAACG,GAAb,CAAiBZ,cAAjB,CAAL,EAAuC;AACnCM,IAAAA,cAAc,GAAG9C,iBAAS,CAACmD,iBAAV,CAA4BL,cAA5B,EAA4CN,cAA5C,CAAjB;AACH;;AAED,SAAOM,cAAP;AACH,CAzBM;AA2BP,AAAO,IAAM8C,2BAA2B,GAAG,SAA9BA,2BAA8B,CAAC9I,WAAD,EAAcyF,SAAd,EAAyBsD,kBAAzB,EAAuD;AAAA,MAA9BA,kBAA8B;AAA9BA,IAAAA,kBAA8B,GAAT,IAAS;AAAA;;AAC9F,MAAM5C,YAAY,GAAGnG,WAAW,CAACgE,qBAAZ,EAArB;AACA,SACImC,YAAY,CAAC6C,IAAb,CAAkB,UAACrE,WAAD;AAAA,WAAiBc,SAAS,CAACwD,QAAV,CAAmBtE,WAAnB,CAAjB;AAAA,GAAlB,KAAuEoE,kBAD3E;AAGH,CALM;AAOP,AA+BO,IAAM5F,mBAAmB,GAAG,SAAtBA,mBAAsB,CAACnD,WAAD,EAAckJ,mBAAd,EAAsC;AACrE,MAAMjG,SAAS,GAAGC,iBAAS,CAACC,mBAAV,CAA8BnD,WAA9B,CAAlB;AACA,MAAIkJ,mBAAmB,CAACF,IAApB,CAAyB,UAACG,WAAD;AAAA,WAAiBA,WAAW,KAAKlG,SAAjC;AAAA,GAAzB,CAAJ,EAA0E,OAAOA,SAAP;AAC1E,SAAO,SAAP;AACH,CAJM;AAMP,AAAO,IAAMmG,6BAA6B,GAAG,SAAhCA,6BAAgC,CAACpJ,WAAD,EAAcqJ,UAAd,EAA0BC,UAA1B,EAAsCC,UAAtC,EAAqD;AAC9F,MAAMC,OAAO,GAAGxJ,WAAW,CAACqD,iBAAZ,EAAhB;AACA,MAAMoG,iBAAiB,GAAGD,OAAO,CAACE,YAAR,CAAqBL,UAArB,EAAiCC,UAAjC,EAA6CC,UAA7C,CAA1B;AACA,MAAMI,SAAS,GAAGF,iBAAiB,CAACG,uBAAlB,EAAlB;AACA,MAAMrG,SAAS,GAAGvD,WAAW,CAAC4C,YAAZ,EAAlB;AACA,MAAMiH,sBAAsB,GAAG/D,gBAAQ,CAACgE,WAAT,CAAqBL,iBAArB,EAAwClG,SAAxC,EAAmDoG,SAAnD,CAA/B;AACA,SAAO1D,mBAAW,CAACC,IAAZ,CAAiBlG,WAAjB,EAA8B6J,sBAA9B,EAAsD,cAAtD,CAAP;AACH,CAPM;;AC3DP,SAASE,cAAT,GAA0B;AACtB,MAAM7B,MAAM,GAAGpB,SAAS,EAAxB;AACF,MAAM9G,WAAW,GAAGqI,cAAc,CAACH,MAAD,CAAlC;AAEE,MAAM8B,WAAW,GAAGxB,cAAc,EAAlC;;AACA,wBAA4CvG,KAAK,CAACkF,QAAN,CAAe,KAAf,CAA5C;AAAA,MAAO8C,cAAP;AAAA,MAAuBC,iBAAvB;;AACA,yBAAwBjI,KAAK,CAACkF,QAAN,CAAe,EAAf,CAAxB;AAAA,MAAOgD,IAAP;AAAA,MAAaC,OAAb;;AACA,MAAMC,OAAO,GAAGpI,KAAK,CAACqI,SAAN,EAAhB;;AAEA,MAAMxL,OAAO,GAAG,SAAVA,OAAU,GAAM;AAClBsL,IAAAA,OAAO,CAAC,EAAD,CAAP;AACAF,IAAAA,iBAAiB,CAAC,IAAD,CAAjB;AACH,GAHD;;AAKA,MAAMK,iBAAiB,GAAG,SAApBA,iBAAoB,GAAM;AAC5BL,IAAAA,iBAAiB,CAAC,KAAD,CAAjB;AACH,GAFD;;AAIA,MAAMM,YAAY,GAAG,SAAfA,YAAe,CAACC,EAAD,EAAQ;AACzBL,IAAAA,OAAO,CAACK,EAAE,CAACC,aAAH,CAAiBC,KAAlB,CAAP;AACH,GAFD;;AAIA,MAAMC,YAAY,GAAG,SAAfA,YAAe,CAACH,EAAD,EAAQ;AACzBA,IAAAA,EAAE,CAACI,cAAH;AACA,QAAIV,IAAI,KAAK,EAAb,EAAiB;AACjBI,IAAAA,iBAAiB;AACjBrC,IAAAA,MAAM,CAACtH,QAAP,CACIwI,6BAA6B,CAACpJ,WAAD,EAAc8K,QAAQ,CAAClC,IAAvB,EAA6B,SAA7B,EAAwC;AACjEmC,MAAAA,GAAG,EAAEZ;AAD4D,KAAxC,CADjC;AAKAH,IAAAA,WAAW;AACd,GAVD;;AAYA,sBACI,oBAAC,KAAD,CAAO,QAAP,qBACI,oBAAC,aAAD;AACI,IAAA,OAAO,EAAElL,OADb;AAEI,IAAA,IAAI,EAAEoJ,MAAM,CAACrH,SAAP,CAAiB,wBAAjB,CAFV;AAGI,IAAA,QAAQ,EAAEb,WAAW,CAAC4C,YAAZ,GAA2BwD,WAA3B;AAHd,kBAII,oBAAC,QAAD,OAJJ,CADJ,eAOI,oBAAC,MAAD;AAAQ,IAAA,IAAI,EAAE6D,cAAd;AAA8B,IAAA,OAAO,EAAEM;AAAvC,kBACI;AAAM,IAAA,GAAG,EAAEF,OAAX;AAAoB,IAAA,QAAQ,EAAEO;AAA9B,kBACI,oBAAC,aAAD,qBACI,oBAAC,SAAD;AACI,IAAA,SAAS,MADb;AAEI,IAAA,KAAK,EAAE1C,MAAM,CAACrH,SAAP,CAAiB,8BAAjB,CAFX;AAGI,IAAA,KAAK,EAAEsJ,IAHX;AAII,IAAA,QAAQ,EAAEK,YAJd;AAKI,IAAA,SAAS;AALb,IADJ,CADJ,eAUI,oBAAC,aAAD,qBACI,oBAAC,MAAD;AAAQ,IAAA,IAAI,EAAC,QAAb;AAAsB,IAAA,OAAO,EAAED,iBAA/B;AAAkD,IAAA,KAAK,EAAC;AAAxD,KACKrC,MAAM,CAACrH,SAAP,CAAiB,iCAAjB,CADL,CADJ,eAII,oBAAC,MAAD;AAAQ,IAAA,IAAI,EAAC,QAAb;AAAsB,IAAA,KAAK,EAAC,SAA5B;AAAsC,IAAA,QAAQ,EAAEsJ,IAAI,KAAK;AAAzD,KACKjC,MAAM,CAACrH,SAAP,CAAiB,8BAAjB,CADL,CAJJ,CAVJ,CADJ,CAPJ,CADJ;AA+BH;;ACjED,IAAMmK,YAAY,GAAG,SAAfA,YAAe,CAACC,YAAD,EAAeC,QAAf,EAAyBrF,YAAzB,EAA0C;AAC3DoF,EAAAA,YAAY,CAACE,gBAAb,CAA8B,UAAC9F,SAAD,EAAe;AACzC,QAAMsE,SAAS,GAAGtE,SAAS,CAAC+F,SAAV,EAAlB;AACA,WAAOzB,SAAS,KAAK,IAAd,IAAsB9D,YAAY,CAACuF,SAAb,CAAuBzB,SAAvB,EAAkC0B,OAAlC,OAAgDP,QAAQ,CAAClC,IAAtF;AACH,GAHD,EAGGsC,QAHH;AAIH,CALD;;AAOA,IAAII,WAAJ;AACA,IAAIC,WAAJ;;AAEA,IAAMC,UAAU,GAAG,SAAbA,UAAa,OAAiE;AAAA,MAA9D3F,YAA8D,QAA9DA,YAA8D;AAAA,MAAhD8D,SAAgD,QAAhDA,SAAgD;AAAA,MAArC8B,QAAqC,QAArCA,QAAqC;AAAA,MAA3B5G,KAA2B,QAA3BA,KAA2B;AAAA,MAApBC,GAAoB,QAApBA,GAAoB;AAAA,MAAfjG,QAAe,QAAfA,QAAe;;AAChF,wBAAgCoD,KAAK,CAACkF,QAAN,CAAe,IAAf,CAAhC;AAAA,MAAOuE,QAAP;AAAA,MAAiBC,WAAjB;;AACA,MAAMzD,MAAM,GAAGpB,SAAS,EAAxB;AAEA,MAAMkD,WAAW,GAAGxB,cAAc,EAAlC;;AACA,8BAAgB3C,YAAY,CAACuF,SAAb,CAAuBzB,SAAvB,EAAkCiC,OAAlC,EAAhB;AAAA,MAAQb,GAAR,yBAAQA,GAAR;;AAEAO,EAAAA,WAAW,GAAGA,WAAW,IAAI,UAAUO,KAAV,EAAiBpB,EAAjB,EAAqB;AAC9CoB,IAAAA,KAAK,CAACpB,EAAE,CAACC,aAAJ,CAAL;AACH,GAF4B,CAE3BoB,IAF2B,CAEtB,IAFsB,EAEhBH,WAFgB,CAA7B;;AAIAJ,EAAAA,WAAW,GAAGA,WAAW,IAAI,UAAUM,KAAV,EAAiB;AAC1CA,IAAAA,KAAK,CAAC,IAAD,CAAL;AACH,GAF4B,CAE3BC,IAF2B,CAEtB,IAFsB,EAEhBH,WAFgB,CAA7B;;AAIA,MAAMI,QAAQ,GAAG,SAAXA,QAAW,CAACtB,EAAD,EAAQ;AACrBA,IAAAA,EAAE,CAACI,cAAH;AACAJ,IAAAA,EAAE,CAACuB,eAAH;AACAC,IAAAA,MAAM,CAACC,IAAP,CAAYnB,GAAZ,EAAiB,QAAjB;AACH,GAJD;;AAMA,MAAMoB,UAAU,GAAG,SAAbA,UAAa,CAAC1B,EAAD,EAAQ;AACvBA,IAAAA,EAAE,CAACI,cAAH;AACAJ,IAAAA,EAAE,CAACuB,eAAH;AACA,QAAMI,aAAa,GAAGC,sBAAc,CAACC,WAAf,CAA2Bb,QAA3B,EAAqCc,KAArC,CAA2C;AAC7DC,MAAAA,SAAS,EAAEf,QADkD;AAE7DgB,MAAAA,YAAY,EAAE5H,KAF+C;AAG7D6H,MAAAA,QAAQ,EAAEjB,QAHmD;AAI7DkB,MAAAA,WAAW,EAAE7H;AAJgD,KAA3C,CAAtB;AAOAoD,IAAAA,MAAM,CAACtH,QAAP,CAAgBsC,iBAAS,CAAC0J,UAAV,CAAqB1E,MAAM,CAACvG,cAAP,EAArB,EAA8CyK,aAA9C,EAA6D,IAA7D,CAAhB;AACApC,IAAAA,WAAW;AACd,GAZD;;AAcA,sBACI,oBAAC,KAAD,CAAO,QAAP,qBACI,oBAAC,IAAD;AACI,IAAA,IAAI,EAAEe,GADV;AAEI,IAAA,GAAG,EAAC,qBAFR;AAGI,IAAA,MAAM,EAAC,QAHX;AAII,kBAAYA,GAJhB;AAKI,IAAA,OAAO,EAAEO;AALb,KAMKzM,QANL,CADJ,eASI,oBAAC,OAAD;AACI,IAAA,IAAI,EAAEgO,OAAO,CAACnB,QAAD,CADjB;AAEI,IAAA,OAAO,EAAEH,WAFb;AAGI,IAAA,QAAQ,EAAEG,QAHd;AAII,IAAA,YAAY,EAAE;AACVtM,MAAAA,QAAQ,EAAE,QADA;AAEVC,MAAAA,UAAU,EAAE;AAFF,KAJlB;AAQI,IAAA,eAAe,EAAE;AACbD,MAAAA,QAAQ,EAAE,KADG;AAEbC,MAAAA,UAAU,EAAE;AAFC;AARrB,kBAYI,oBAAC,WAAD;AAAa,IAAA,IAAI,EAAC,OAAlB;AAA0B,kBAAW;AAArC,kBACI,oBAAC,MAAD;AAAQ,IAAA,OAAO,EAAE0M,QAAjB;AAA2B,IAAA,KAAK,YAAUhB;AAA1C,kBACI,oBAAC,UAAD,OADJ,CADJ,eAII,oBAAC,MAAD;AAAQ,IAAA,OAAO,EAAEoB,UAAjB;AAA6B,IAAA,KAAK,EAAC;AAAnC,kBACI,oBAAC,WAAD,OADJ,CAJJ,CAZJ,CATJ,CADJ;AAiCH,CApED;;AAsEAX,UAAU,CAAClM,SAAX,GAAuB;AACnBuG,EAAAA,YAAY,EAAEtG,SAAS,CAACuN,MAAV,CAAiBrN,UADZ;AAEnBkK,EAAAA,SAAS,EAAEpK,SAAS,CAAC2H,MAAV,CAAiBzH,UAFT;AAGnBgM,EAAAA,QAAQ,EAAElM,SAAS,CAAC2H,MAAV,CAAiBzH,UAHR;AAInBoF,EAAAA,KAAK,EAAEtF,SAAS,CAACwN,MAAV,CAAiBtN,UAJL;AAKnBqF,EAAAA,GAAG,EAAEvF,SAAS,CAACwN,MAAV,CAAiBtN,UALH;AAMnBZ,EAAAA,QAAQ,EAAEU,SAAS,CAACC;AAND,CAAvB;;AASA,IAAMwN,aAAa,GAAG,SAAhBA,aAAgB;AAAA,SAAO;AACzBC,IAAAA,UAAU,EAAE,CACR;AACIC,MAAAA,QAAQ,EAAElC,YADd;AAEImC,MAAAA,SAAS,EAAE3B;AAFf,KADQ;AADa,GAAP;AAAA,CAAtB;;AChGA,SAAS4B,iBAAT,GAA6B;AACzB,MAAMlF,MAAM,GAAGpB,SAAS,EAAxB;AACF,MAAM9G,WAAW,GAAGqI,cAAc,CAACH,MAAD,CAAlC;;AAGE,MAAMpJ,OAAO,GAAG,SAAVA,OAAU,GAAM;AAClB,QAAMyE,SAAS,GAAGvD,WAAW,CAAC4C,YAAZ,EAAlB;AACAsF,IAAAA,MAAM,CAACtH,QAAP,CAAgBsC,iBAAS,CAAC0J,UAAV,CAAqB5M,WAArB,EAAkCuD,SAAlC,EAA6C,IAA7C,CAAhB;AACH,GAHD;;AAKA,sBACI,oBAAC,aAAD;AACI,IAAA,OAAO,EAAEzE,OADb;AAEI,IAAA,IAAI,EAAEoJ,MAAM,CAACrH,SAAP,CAAiB,2BAAjB,CAFV;AAGI,IAAA,QAAQ,EAAEb,WAAW,CAAC4C,YAAZ,GAA2BwD,WAA3B;AAHd,kBAII,oBAAC,WAAD,OAJJ,CADJ;AAQH;;ICzBYiH,WAAW,GAAG,QAApB;;ACEA,IAAMC,0BAA0B,GAAG,SAA7BA,0BAA6B,CAACC,OAAD,EAAUC,WAAV;AAAA,SACtC,CAAC,OAAOD,OAAP,KAAmB,QAAnB,IAA+BA,OAAO,YAAYE,MAAnD,KACAF,OAAO,CAACG,MAAR,CAAe,CAAf,EAAkBL,WAAW,CAACM,MAA9B,MAA0CN,WAD1C,GAEMG,WAAW,CAACD,OAAO,CAACG,MAAR,CAAeL,WAAW,CAACM,MAA3B,CAAD,CAFjB,GAGMJ,OAJgC;AAAA,CAAnC;;;ACFP,AAQA,IAAMjP,WAAS,GAAGC,UAAU,CAAC,UAACqP,KAAD;AAAA,SAAY;AACrCC,IAAAA,aAAa,EAAE;AACXC,MAAAA,MAAM,EAAEF,KAAK,CAACG,OAAN,CAAc,CAAd;AADG;AADsB,GAAZ;AAAA,CAAD,CAA5B;;AAMA,SAASC,eAAT,OAAgF;AAAA,MAArDrD,KAAqD,QAArDA,KAAqD;AAAA,MAA9C/J,SAA8C,QAA9CA,QAA8C;AAAA,MAApCqN,OAAoC,QAApCA,OAAoC;AAAA,2BAA3BC,QAA2B;AAAA,MAA3BA,QAA2B,8BAAhB,GAAgB;AAAA,MAARhP,IAAQ;;AAC5E,MAAMC,OAAO,GAAGb,WAAS,EAAzB;AACA,MAAM4J,MAAM,GAAGpB,SAAS,EAAxB;AAEA,sBACI,oBAAC,MAAD;AACI,IAAA,KAAK,EAAE6D,KADX;AAEI,IAAA,QAAQ,EAAE,kBAACF,EAAD;AAAA,aAAQ7J,SAAQ,CAAC6J,EAAE,CAAC0D,MAAH,CAAUxD,KAAX,CAAhB;AAAA,KAFd;AAGI,IAAA,SAAS,EAAExL,OAAO,CAAC0O,aAHvB;AAII,IAAA,KAAK,EAAE;AAAEK,MAAAA,QAAQ,EAARA;AAAF;AAJX,KAKQhP,IALR,GAMK+O,OAAO,CAACG,GAAR,CAAY,UAACC,MAAD;AAAA,wBACT,oBAAC,QAAD;AAAU,MAAA,GAAG,EAAEA,MAAM,CAAC1D,KAAP,IAAgB,OAA/B;AAAwC,MAAA,KAAK,EAAE0D,MAAM,CAAC1D;AAAtD,OACK0D,MAAM,CAACpP,IAAP,GAAcqO,0BAA0B,CAACe,MAAM,CAACpP,IAAR,EAAciJ,MAAM,CAACrH,SAArB,CAAxC,GAA0E,EAD/E,CADS;AAAA,GAAZ,CANL,CADJ;AAcH;;AAEDmN,eAAe,CAAC1O,SAAhB,GAA4B;AACxBqL,EAAAA,KAAK,EAAEpL,SAAS,CAAC2H,MAAV,CAAiBzH,UADA;AAExBmB,EAAAA,QAAQ,EAAErB,SAAS,CAACG,IAAV,CAAeD,UAFD;AAGxBwO,EAAAA,OAAO,EAAE1O,SAAS,CAAC+O,KAAV,CAAgB7O,UAHD;AAIxByO,EAAAA,QAAQ,EAAE3O,SAAS,CAACwN;AAJI,CAA5B;;ACzBA,SAASwB,gBAAT,OAAmE;AAAA,MAAvCC,aAAuC,QAAvCA,aAAuC;AAAA,MAAxBC,oBAAwB,QAAxBA,oBAAwB;AAC/D,MAAMvG,MAAM,GAAGpB,SAAS,EAAxB;AAEA,MAAMkD,WAAW,GAAGxB,cAAc,EAAlC;AACA,MAAMyF,OAAO,GAAGO,aAAa,CAACP,OAAd,IAAyBQ,oBAAoB,CAACR,OAA9D;;AACA,wBAA0BhM,KAAK,CAACkF,QAAN,CAAe,SAAf,CAA1B;AAAA,MAAOwD,KAAP;AAAA,MAAc+D,QAAd;;AAEAzM,EAAAA,KAAK,CAACE,SAAN,CAAgB,YAAM;AAClBuM,IAAAA,QAAQ,CACJvL,mBAAmB,CACf+E,MAAM,CAACvG,cAAP,EADe,EAEfsM,OAAO,CAACG,GAAR,CAAY,UAACC,MAAD;AAAA,aAAYA,MAAM,CAAC1D,KAAnB;AAAA,KAAZ,CAFe,CADf,CAAR;AAMH,GAPD,EAOG,CAACsD,OAAO,CAAC1H,QAAR,EAAD,CAPH;AASA,MAAMoI,YAAY,GAAG1M,KAAK,CAAC2M,WAAN,CAAkB,UAACpK,QAAD,EAAc;AACjDkK,IAAAA,QAAQ,CAAClK,QAAD,CAAR;AACA,QAAMwB,cAAc,GAAG9C,iBAAS,CAACuB,eAAV,CACnByD,MAAM,CAACvG,cAAP,EADmB,EAEnB6C,QAAQ,KAAK,QAAb,GAAwB,EAAxB,GAA6BA,QAFV,CAAvB;AAIA0D,IAAAA,MAAM,CAACtH,QAAP,CAAgBoF,cAAhB;AACAgE,IAAAA,WAAW;AACd,GARoB,EAQlB,EARkB,CAArB;AAUA,sBAAO,oBAAC,eAAD;AAAiB,IAAA,OAAO,EAAEiE,OAA1B;AAAmC,IAAA,QAAQ,EAAEU,YAA7C;AAA2D,IAAA,KAAK,EAAEhE;AAAlE,IAAP;AACH;;AAED4D,gBAAgB,CAACjP,SAAjB,GAA6B;AACzBkP,EAAAA,aAAa,EAAEjP,SAAS,CAACC,GADA;AAEzBiP,EAAAA,oBAAoB,EAAElP,SAAS,CAACC,GAAV,CAAcC;AAFX,CAA7B;;AC9BAoP,4BAA4B,CAACvP,SAA7B,GAAyC;AACrC2D,EAAAA,SAAS,EAAE1D,SAAS,CAAC2H,MAAV,CAAiBzH,UADS;AAErCZ,EAAAA,QAAQ,EAAEU,SAAS,CAACC,GAAV,CAAcC,UAFa;AAGrCR,EAAAA,IAAI,EAAEM,SAAS,CAACC;AAHqB,CAAzC;;AAMA,SAASqP,4BAAT,OAAqE;AAAA,MAA7B5L,SAA6B,QAA7BA,SAA6B;AAAA,MAAlBpE,QAAkB,QAAlBA,QAAkB;AAAA,MAARI,IAAQ,QAARA,IAAQ;AACjE,MAAMiJ,MAAM,GAAGpB,SAAS,EAAxB;AAEA,MAAMkD,WAAW,GAAGxB,cAAc,EAAlC;;AAEA,MAAM1J,OAAO,GAAG,SAAVA,OAAU,GAAM;AAClB,QAAMkH,cAAc,GAAG9C,iBAAS,CAACuB,eAAV,CAA0ByD,MAAM,CAACvG,cAAP,EAA1B,EAAmDsB,SAAnD,CAAvB;AACAiF,IAAAA,MAAM,CAACtH,QAAP,CAAgBoF,cAAhB;AACAgE,IAAAA,WAAW;AACd,GAJD;;AAMA,sBACI,oBAAC,aAAD;AAAe,IAAA,IAAI,EAAE/K,IAArB;AAA2B,IAAA,OAAO,EAAEH;AAApC,KACKD,QADL,CADJ;AAKH;;ACzBD,SAASiQ,oBAAT,GAAgC;AAC5B,MAAM5G,MAAM,GAAGpB,SAAS,EAAxB;AAEA,sBACI,oBAAC,4BAAD;AACI,IAAA,SAAS,EAAC,qBADd;AAEI,IAAA,IAAI,EAAEoB,MAAM,CAACrH,SAAP,CAAiB,8BAAjB;AAFV,kBAGI,oBAAC,sBAAD,OAHJ,CADJ;AAOH;;ACfD,kBAAe;AACXkO,EAAAA,EAAE,EAAE,YADO;AAEXC,EAAAA,EAAE,EAAE,YAFO;AAGXC,EAAAA,EAAE,EAAE,cAHO;AAIXC,EAAAA,EAAE,EAAE,aAJO;AAKXC,EAAAA,EAAE,EAAE,aALO;AAMXC,EAAAA,EAAE,EAAE,YANO;AAOXC,EAAAA,EAAE,EAAE,qBAPO;AAQXC,EAAAA,EAAE,EAAE,mBARO;AASXC,EAAAA,UAAU,EAAE,YATD;AAUXC,EAAAA,UAAU,EAAE,YAVD;AAWXC,EAAAA,QAAQ,EAAE,UAXC;AAYXC,EAAAA,MAAM,EAAE;AAZG,CAAf;;ACMA,SAASC,kBAAT,GAA8B;AAC1B,MAAMzH,MAAM,GAAGpB,SAAS,EAAxB;AAEA,sBACI,oBAAC,4BAAD;AACI,IAAA,SAAS,EAAE8I,WAAW,CAACN,EAD3B;AAEI,IAAA,IAAI,EAAEpH,MAAM,CAACrH,SAAP,CAAiB,4BAAjB;AAFV,kBAGI,oBAAC,sBAAD,OAHJ,CADJ;AAOH;;ACJD,SAASgP,iBAAT,OAA2C;AAAA,MAAdC,UAAc,QAAdA,UAAc;AACvC,MAAM5H,MAAM,GAAGpB,SAAS,EAAxB;AACA,MAAM9G,WAAW,GAAGqI,cAAc,CAACH,MAAD,CAAlC;AACA,MAAM8B,WAAW,GAAGxB,cAAc,EAAlC;;AACA,wBAA8DvG,KAAK,CAACkF,QAAN,CACvDa,YAAY,CAACL,WAD0C,cAA9D;AAAA,MAAOoI,uBAAP;AAAA,MAAgCC,0BAAhC;;AAGA,MAAMvK,SAAS,GAAGrB,MAAM,CAAC6L,IAAP,CAAYH,UAAU,CAACI,cAAvB,CAAlB;AAEAjO,EAAAA,KAAK,CAACE,SAAN,CAAgB,YAAM;AAClB6N,IAAAA,0BAA0B,CACtBlH,2BAA2B,CACvB9I,WADuB,EAEvByF,SAFuB,EAGpBuC,YAAY,CAACL,WAHO,cADL,CAA1B;AAOH,GARD,EAQG,CAAC3H,WAAD,EAAcyF,SAAd,CARH;;AAUA,MAAMkJ,YAAY,GAAG,SAAfA,YAAe,CAACjJ,cAAD,EAAoB;AACrCsK,IAAAA,0BAA0B,CAACtK,cAAD,CAA1B;AAEA,QAAMM,cAAc,GAAGR,yBAAuB,CAC1CxF,WAD0C,EAE1CyF,SAF0C,EAG1CC,cAH0C,CAA9C;AAKAwC,IAAAA,MAAM,CAACtH,QAAP,CAAgBoF,cAAhB;AACAgE,IAAAA,WAAW;AACd,GAVD;;AAYA,sBACI,oBAAC,eAAD;AACI,IAAA,OAAO,EAAEvE,SAAS,CAAC2I,GAAV,CAAc,UAACzJ,WAAD;AAAA,aAAkB;AACrCgG,QAAAA,KAAK,EAAEhG,WAD8B;AAErC1F,QAAAA,IAAI,EAAE6Q,UAAU,CAACI,cAAX,CAA0BvL,WAA1B,EAAuCwL,UAAvC,gBACF;AACI,UAAA,KAAK,EAAE;AACHA,YAAAA,UAAU,EAAEL,UAAU,CAACI,cAAX,CAA0BvL,WAA1B,EAAuCwL;AADhD;AADX,WAIKL,UAAU,CAACI,cAAX,CAA0BvL,WAA1B,EAAuCwL,UAJ5C,CADE,GAQF;AAViC,OAAlB;AAAA,KAAd,CADb;AAcI,IAAA,QAAQ,EAAExB,YAdd;AAeI,IAAA,KAAK,EAAEoB;AAfX,IADJ;AAmBH;;AAEDF,iBAAiB,CAACvQ,SAAlB,GAA8B;AAC1BwQ,EAAAA,UAAU,EAAEvQ,SAAS,CAACC,GAAV,CAAcC;AADA,CAA9B;;AC9DA,IAAM2Q,gBAAgB,GAAG,SAAnBA,gBAAmB,CAAC5B,aAAD,EAAgBC,oBAAhB,EAAyC;AAC9D,MAAM4B,YAAY,GAAG7B,aAAa,CAACP,OAAd,IAAyBQ,oBAAoB,CAACR,OAAnE;AACA,MAAMiC,cAAc,GAAG,EAAvB;;AACA,uDAAyBG,YAAzB,wCAAuC;AAAA,QAA5BF,UAA4B;AACnCD,IAAAA,cAAc,CAAIlI,YAAY,CAACL,WAAjB,SAAgCwI,UAAhC,CAAd,GACIA,UAAU,KAAK,SAAf,GACM,EADN,GAEM;AACIA,MAAAA,UAAU,EAAVA;AADJ,KAHV;AAMH;;AACD,SAAO;AAAED,IAAAA,cAAc,EAAdA;AAAF,GAAP;AACH,CAZD;;ACSA,SAASI,gBAAT,GAA4B;AACxB,MAAMpI,MAAM,GAAGpB,SAAS,EAAxB;AACF,MAAM9G,WAAW,GAAGqI,cAAc,CAACH,MAAD,CAAlC;AAEE,MAAM8B,WAAW,GAAGxB,cAAc,EAAlC;;AACA,wBAAkDvG,KAAK,CAACkF,QAAN,CAAe,IAAf,CAAlD;AAAA,MAAOoJ,iBAAP;AAAA,MAA0BC,oBAA1B;;AAEAvO,EAAAA,KAAK,CAACE,SAAN,CAAgB,YAAM;AAClB,QAAMoB,SAAS,GAAGvD,WAAW,CAAC4C,YAAZ,EAAlB;AACA,QAAM6N,YAAY,GAAGzQ,WAAW,CAC3BqD,iBADgB,GAEhBc,cAFgB,CAEDZ,SAAS,CAACC,WAAV,EAFC,CAArB;AAGA,QAAMkN,SAAS,GAAGD,YAAY,CAAC7E,OAAb,EAAlB;;AACA,QAAI8E,SAAS,IAAIA,SAAS,CAAC3Q,GAAV,CAAc,WAAd,CAAjB,EAA6C;AACzCyQ,MAAAA,oBAAoB,CAACE,SAAS,CAAC3Q,GAAV,CAAc,WAAd,CAAD,CAApB;AACH,KAFD,MAEO;AACHyQ,MAAAA,oBAAoB,CAAC,IAAD,CAApB;AACH;AACJ,GAXD,EAWG,CAACxQ,WAAD,CAXH;;AAaA,MAAM2Q,MAAM,GAAG,SAATA,MAAS,CAACC,SAAD,EAAe;AAC1BJ,IAAAA,oBAAoB,CAACI,SAAD,CAApB;AAEA,QAAMjL,eAAe,GAAGG,gBAAQ,CAAC+K,cAAT,CACpB7Q,WAAW,CAACqD,iBAAZ,EADoB,EAEpBrD,WAAW,CAAC4C,YAAZ,EAFoB,EAGpB;AAAEgO,MAAAA,SAAS,EAATA;AAAF,KAHoB,CAAxB;AAKA1I,IAAAA,MAAM,CAACtH,QAAP,CAAgBqF,mBAAW,CAACC,IAAZ,CAAiBlG,WAAjB,EAA8B2F,eAA9B,EAA+C,mBAA/C,CAAhB;AACAqE,IAAAA,WAAW;AACd,GAVD;;AAYA,sBACI,oBAAC,KAAD,CAAO,QAAP,qBACI,oBAAC,aAAD;AACI,IAAA,MAAM,EAAEuG,iBAAiB,KAAK,MADlC;AAEI,IAAA,OAAO,EAAE;AAAA,aAAMI,MAAM,CAAC,MAAD,CAAZ;AAAA,KAFb;AAGI,IAAA,IAAI,EAAEzI,MAAM,CAACrH,SAAP,CAAiB,sCAAjB;AAHV,kBAII,oBAAC,mBAAD,OAJJ,CADJ,eAOI,oBAAC,aAAD;AACI,IAAA,MAAM,EAAE0P,iBAAiB,KAAK,QADlC;AAEI,IAAA,OAAO,EAAE;AAAA,aAAMI,MAAM,CAAC,QAAD,CAAZ;AAAA,KAFb;AAGI,IAAA,IAAI,EAAEzI,MAAM,CAACrH,SAAP,CAAiB,wCAAjB;AAHV,kBAII,oBAAC,qBAAD,OAJJ,CAPJ,eAaI,oBAAC,aAAD;AACI,IAAA,MAAM,EAAE0P,iBAAiB,KAAK,OADlC;AAEI,IAAA,OAAO,EAAE;AAAA,aAAMI,MAAM,CAAC,OAAD,CAAZ;AAAA,KAFb;AAGI,IAAA,IAAI,EAAEzI,MAAM,CAACrH,SAAP,CAAiB,uCAAjB;AAHV,kBAII,oBAAC,oBAAD,OAJJ,CAbJ,eAmBI,oBAAC,aAAD;AACI,IAAA,MAAM,EAAE0P,iBAAiB,KAAK,SADlC;AAEI,IAAA,OAAO,EAAE;AAAA,aAAMI,MAAM,CAAC,SAAD,CAAZ;AAAA,KAFb;AAGI,IAAA,IAAI,EAAEzI,MAAM,CAACrH,SAAP,CAAiB,oCAAjB;AAHV,kBAII,oBAAC,sBAAD,OAJJ,CAnBJ,CADJ;AA4BH;;AAEDyP,gBAAgB,CAAChR,SAAjB,GAA6B,EAA7B;;ACzEA,IAAMwR,eAAe,GAAG,SAAlBA,eAAkB;AAAA,SAAO;AAC3BC,IAAAA,YAAY,EAAE,sBAAC7M,KAAD,EAAW;AACrB,UAAM0M,SAAS,GAAG1M,KAAK,CAAC0H,OAAN,KAAkB1H,KAAK,CAAC0H,OAAN,GAAgB7L,GAAhB,CAAoB,WAApB,CAAlB,GAAqD,IAAvE;;AACA,UAAI6Q,SAAJ,EAAe;AACX,+BAAqBA,SAArB;AACH;;AAED,aAAO,EAAP;AACH;AAR0B,GAAP;AAAA,CAAxB;;ACaAI,eAAe,CAAC1R,SAAhB,GAA4B;AACxBwQ,EAAAA,UAAU,EAAEvQ,SAAS,CAACuN,MAAV,CAAiBrN;AADL,CAA5B;;AAIA,SAASuR,eAAT,OAAyC;AAAA,MAAdlB,UAAc,QAAdA,UAAc;AACrC,MAAM5H,MAAM,GAAGpB,SAAS,EAAxB;AACF,MAAM9G,WAAW,GAAGqI,cAAc,CAACH,MAAD,CAAlC;AAEE,MAAM8B,WAAW,GAAGxB,cAAc,EAAlC;;AACA,wBAA0DvG,KAAK,CAACkF,QAAN,CACnDa,YAAY,CAACJ,SADsC,cAA1D;AAAA,MAAOqJ,qBAAP;AAAA,MAA8BC,wBAA9B;;AAGA,MAAMzL,SAAS,GAAGrB,MAAM,CAAC6L,IAAP,CAAYH,UAAU,CAACI,cAAvB,CAAlB;AAEAjO,EAAAA,KAAK,CAACE,SAAN,CAAgB,YAAM;AAClB+O,IAAAA,wBAAwB,CACpBpI,2BAA2B,CACvB9I,WADuB,EAEvByF,SAFuB,EAGpBuC,YAAY,CAACJ,SAHO,cADP,CAAxB;AAOH,GARD,EAQG,CAAC5H,WAAD,EAAcyF,SAAd,CARH;;AAUA,MAAMkJ,YAAY,GAAG,SAAfA,YAAe,CAACjJ,cAAD,EAAoB;AACrCwL,IAAAA,wBAAwB,CAACxL,cAAD,CAAxB;AACA,QAAMM,cAAc,GAAGR,yBAAuB,CAC1CxF,WAD0C,EAE1CyF,SAF0C,EAG1CC,cAH0C,CAA9C;AAKAwC,IAAAA,MAAM,CAACtH,QAAP,CAAgBoF,cAAhB;AACAgE,IAAAA,WAAW;AACd,GATD;;AAWA,sBACI,oBAAC,eAAD;AACI,IAAA,OAAO,EAAEvE,SAAS,CAAC2I,GAAV,CAAc,UAACzJ,WAAD;AAAA,aAAkB;AACrC1F,QAAAA,IAAI,EAAE6Q,UAAU,CAACI,cAAX,CAA0BvL,WAA1B,EAAuCwM,QAAvC,gBACF;AAAM,UAAA,KAAK,EAAE;AAAEA,YAAAA,QAAQ,EAAErB,UAAU,CAACI,cAAX,CAA0BvL,WAA1B,EAAuCwM;AAAnD;AAAb,WACKrB,UAAU,CAACI,cAAX,CAA0BvL,WAA1B,EAAuCwM,QAD5C,CADE,GAKF,SANiC;AAQrCxG,QAAAA,KAAK,EAAEhG;AAR8B,OAAlB;AAAA,KAAd,CADb;AAWI,IAAA,QAAQ,EAAEgK,YAXd;AAYI,IAAA,WAAW,EAAE,qBAACyC,KAAD;AAAA,aACTtB,UAAU,CAACI,cAAX,CAA0BkB,KAA1B,EAAiCD,QAAjC,IACAjJ,MAAM,CAACrH,SAAP,CAAiB,kCAAjB,CAFS;AAAA,KAZjB;AAgBI,IAAA,KAAK,EAAEoQ,qBAhBX;AAiBI,IAAA,QAAQ,EAAE;AAjBd,IADJ;AAqBH;;ACnED,IAAMI,cAAc,GAAG,SAAjBA,cAAiB,CAAC7C,aAAD,EAAgBC,oBAAhB,EAAyC;AAC5D,MAAM6C,SAAS,GAAG9C,aAAa,CAACP,OAAd,IAAyBQ,oBAAoB,CAACR,OAAhE;AACA,MAAMiC,cAAc,GAAG,EAAvB;;AACA,uDAAuBoB,SAAvB,wCAAkC;AAAA,QAAvBH,QAAuB;AAC9BjB,IAAAA,cAAc,CAAIlI,YAAY,CAACJ,SAAjB,SAA8BuJ,QAA9B,CAAd,GACIA,QAAQ,KAAK,SAAb,GAAyB,EAAzB,GAA8B;AAAEA,MAAAA,QAAQ,EAARA;AAAF,KADlC;AAEH;;AACD,SAAO;AAAEjB,IAAAA,cAAc,EAAdA;AAAF,GAAP;AACH,CARD;;ACDO,IAAMqB,aAAa,GAAG,SAAhBA,aAAgB,CAACC,KAAD,EAAW;AACpC,MAAIC,CAAJ,EAAOC,CAAP,EAAUC,CAAV;;AAEA,MAAIH,KAAK,CAACI,KAAN,CAAY,MAAZ,CAAJ,EAAyB;AAErBJ,IAAAA,KAAK,GAAGA,KAAK,CAACI,KAAN,CAAY,4DAAZ,CAAR;AAEAH,IAAAA,CAAC,GAAGD,KAAK,CAAC,CAAD,CAAT;AACAE,IAAAA,CAAC,GAAGF,KAAK,CAAC,CAAD,CAAT;AACAG,IAAAA,CAAC,GAAGH,KAAK,CAAC,CAAD,CAAT;AACH,GAPD,MAOO;AAEHA,IAAAA,KAAK,GAAG,EAAE,OAAOA,KAAK,CAACK,KAAN,CAAY,CAAZ,EAAeC,OAAf,CAAuBN,KAAK,CAAC7D,MAAN,GAAe,CAAf,IAAoB,IAA3C,EAAiD,MAAjD,CAAT,CAAR;AAEA8D,IAAAA,CAAC,GAAGD,KAAK,IAAI,EAAb;AACAE,IAAAA,CAAC,GAAIF,KAAK,IAAI,CAAV,GAAe,GAAnB;AACAG,IAAAA,CAAC,GAAGH,KAAK,GAAG,GAAZ;AACH;;AAGD,MAAMO,GAAG,GAAGC,IAAI,CAACC,IAAL,CAAU,SAASR,CAAC,GAAGA,CAAb,IAAkB,SAASC,CAAC,GAAGA,CAAb,CAAlB,GAAoC,SAASC,CAAC,GAAGA,CAAb,CAA9C,CAAZ;;AAGA,MAAII,GAAG,GAAG,KAAV,EAAiB;AACb,WAAO,OAAP;AACH,GAFD,MAEO;AACH,WAAO,MAAP;AACH;AACJ,CA5BM;;;ACDP,AAWA,IAAMzT,WAAS,GAAGC,UAAU,CAAC;AACzB2T,EAAAA,QAAQ,EAAE;AACNC,IAAAA,OAAO,EAAE,MADH;AAENC,IAAAA,YAAY,EAAE,QAFR;AAGNC,IAAAA,UAAU,EAAE,QAHN;AAINC,IAAAA,OAAO,EAAE;AAJH,GADe;AAOzBC,EAAAA,SAAS,EAAE;AACPC,IAAAA,MAAM,EAAE,EADD;AAEPC,IAAAA,KAAK,EAAE,EAFA;AAGPC,IAAAA,YAAY,EAAE,KAHP;AAIP5E,IAAAA,MAAM,EAAE,CAJD;AAKP6E,IAAAA,MAAM,EAAE,mBALD;AAMPC,IAAAA,MAAM,EAAE,SAND;AAOPT,IAAAA,OAAO,EAAE,MAPF;AAQPC,IAAAA,YAAY,EAAE,QARP;AASPC,IAAAA,UAAU,EAAE;AATL;AAPc,CAAD,CAA5B;;AAoBA,SAASQ,oBAAT,OAOG;AAAA,MANCC,aAMD,QANCA,aAMD;AAAA,MALCC,aAKD,QALCA,aAKD;AAAA,MAJCC,MAID,QAJCA,MAID;AAAA,+BAHCC,YAGD;AAAA,MAHCA,YAGD,kCAHgB,EAGhB;AAAA,MAFCpU,QAED,QAFCA,QAED;AAAA,MADIK,IACJ;;AACC,MAAMC,OAAO,GAAGb,WAAS,EAAzB;;AACA,wBAAgC2D,KAAK,CAACkF,QAAN,CAAe,IAAf,CAAhC;AAAA,MAAOuE,QAAP;AAAA,MAAiBC,WAAjB;;AACA,MAAMuH,MAAM,GAAGlB,IAAI,CAACmB,MAAL,GAAc5M,QAAd,CAAuB,EAAvB,EAA2B6M,SAA3B,CAAqC,CAArC,CAAf;AACA,MAAMC,SAAS,GAAG,CAAC,EAAD,CAAlB;;AACA,OAAK,IAAIC,CAAC,GAAG,CAAR,EAAWC,IAAI,GAAG,CAAvB,EAA0BD,CAAC,GAAGN,MAAM,CAACrF,MAArC,EAA6C2F,CAAC,EAA9C,EAAkD;AAC9C,QAAIA,CAAC,GAAGL,YAAJ,KAAqB,CAAzB,EAA4B;AACxBM,MAAAA,IAAI;AACJF,MAAAA,SAAS,CAACE,IAAD,CAAT,GAAkB,EAAlB;AACH;;AACDF,IAAAA,SAAS,CAACE,IAAD,CAAT,CAAgBrN,IAAhB,CAAqB8M,MAAM,CAACM,CAAD,CAA3B;AACH;;AAED,MAAME,UAAU,GAAG,SAAbA,UAAa,CAAC/I,EAAD,EAAQ;AACvBkB,IAAAA,WAAW,CAAClB,EAAE,CAACC,aAAJ,CAAX;AACH,GAFD;;AAIA,MAAM+I,WAAW,GAAG,SAAdA,WAAc,GAAM;AACtB9H,IAAAA,WAAW,CAAC,IAAD,CAAX;AACH,GAFD;;AAIA,sBACI,oBAAC,KAAD,CAAO,QAAP,qBACI,oBAAC,aAAD;AACI,IAAA,OAAO,EAAE6H,UADb;AAEI,qBAAeN,MAFnB;AAGI,qBAAc,MAHlB;AAII,IAAA,UAAU,EAAEJ,aAAa,GAAGA,aAAa,CAACtB,KAAjB,GAAyB;AAJtD,KAKQtS,IALR,GAMKL,QANL,CADJ,eASI,oBAAC,OAAD;AACI,IAAA,EAAE,EAAEqU,MADR;AAEI,IAAA,QAAQ,EAAExH,QAFd;AAGI,IAAA,YAAY,EAAE;AACVtM,MAAAA,QAAQ,EAAE,QADA;AAEVC,MAAAA,UAAU,EAAE;AAFF,KAHlB;AAOI,IAAA,eAAe,EAAE;AACbD,MAAAA,QAAQ,EAAE,KADG;AAEbC,MAAAA,UAAU,EAAE;AAFC,KAPrB;AAWI,IAAA,WAAW,MAXf;AAYI,IAAA,IAAI,EAAEwN,OAAO,CAACnB,QAAD,CAZjB;AAaI,IAAA,OAAO,EAAE+H;AAbb,kBAcI,oBAAC,KAAD,CAAO,QAAP,qBACI,oBAAC,MAAD;AACI,IAAA,SAAS,eAAE,oBAAC,oBAAD,OADf;AAEI,IAAA,SAAS,MAFb;AAGI,IAAA,KAAK,EAAC,WAHV;AAII,IAAA,OAAO,EAAE,mBAAM;AACXA,MAAAA,WAAW;AACXV,MAAAA,aAAa,CAAC,IAAD,CAAb;AACH;AAPL,YADJ,EAWKM,SAAS,CAACjF,GAAV,CAAc,UAAC8D,QAAD,EAAWwB,SAAX;AAAA,wBACX;AAAK,MAAA,GAAG,iBAAeA,SAAvB;AAAoC,MAAA,SAAS,EAAEvU,OAAO,CAAC+S;AAAvD,OACKA,QAAQ,CAAC9D,GAAT,CAAa,UAACuF,SAAD;AAAA,0BACV,oBAAC,OAAD;AAAS,QAAA,GAAG,EAAEA,SAAS,CAAChJ,KAAxB;AAA+B,QAAA,KAAK,EAAEgJ,SAAS,CAAC1U;AAAhD,sBACI;AACI,QAAA,OAAO,EAAE,mBAAM;AACXwU,UAAAA,WAAW;AACXV,UAAAA,aAAa,CAACY,SAAD,CAAb;AACH,SAJL;AAKI,QAAA,SAAS,EAAExU,OAAO,CAACoT,SALvB;AAMI,QAAA,KAAK,EAAE;AACHqB,UAAAA,eAAe,EAAED,SAAS,CAACnC;AADxB;AANX,SASKsB,aAAa,IACda,SAAS,CAAChJ,KAAV,KAAoBmI,aAAa,CAACnI,KADjC,gBAEG,oBAAC,SAAD;AACI,QAAA,KAAK,EAAE;AACH6G,UAAAA,KAAK,EACDD,aAAa,CAACoC,SAAS,CAACnC,KAAX,CAAb,KAAmC,MAAnC,GACM,MADN,GAEM;AAJP;AADX,QAFH,GAUG,IAnBR,CADJ,CADU;AAAA,KAAb,CADL,CADW;AAAA,GAAd,CAXL,CAdJ,CATJ,CADJ;AAoEH;;AAEDqB,oBAAoB,CAACvT,SAArB,GAAiC;AAC7BwT,EAAAA,aAAa,EAAEvT,SAAS,CAACuN,MADI;AAE7BiG,EAAAA,aAAa,EAAExT,SAAS,CAACG,IAAV,CAAeD,UAFD;AAG7BuT,EAAAA,MAAM,EAAEzT,SAAS,CAAC+O,KAAV,CAAgB7O,UAHK;AAI7BwT,EAAAA,YAAY,EAAE1T,SAAS,CAACwN,MAJK;AAK7BlO,EAAAA,QAAQ,EAAEU,SAAS,CAACC;AALS,CAAjC;;ACtHA,SAASqU,qCAAT,OAQG;AAAA,MAPCrF,aAOD,QAPCA,aAOD;AAAA,MANCC,oBAMD,QANCA,oBAMD;AAAA,MALCqB,UAKD,QALCA,UAKD;AAAA,MAJCgE,YAID,QAJCA,YAID;AAAA,MAHCnP,WAGD,QAHCA,WAGD;AAAA,MAFC1F,IAED,QAFCA,IAED;AAAA,MADCJ,QACD,QADCA,QACD;AACC,MAAMqJ,MAAM,GAAGpB,SAAS,EAAxB;AACA,MAAM9G,WAAW,GAAGqI,cAAc,CAACH,MAAD,CAAlC;AACA,MAAM8B,WAAW,GAAGxB,cAAc,EAAlC;;AACA,wBAA0CvG,KAAK,CAACkF,QAAN,CAAe,IAAf,CAA1C;AAAA,MAAO2L,aAAP;AAAA,MAAsBiB,gBAAtB;;AACA,MAAM9F,OAAO,GAAGO,aAAa,CAACP,OAAd,IAAyBQ,oBAAoB,CAACR,OAA9D;AAEAhM,EAAAA,KAAK,CAACE,SAAN,CAAgB,YAAM;AAClB,QAAM6R,qBAAqB,GAAGlL,2BAA2B,CACrD9I,WADqD,EAErDoE,MAAM,CAAC6L,IAAP,CAAYH,UAAU,CAACI,cAAvB,CAFqD,EAGrD,IAHqD,CAAzD;AAKA6D,IAAAA,gBAAgB,CACZC,qBAAqB,IAAIlE,UAAU,CAACI,cAAX,CAA0B8D,qBAA1B,CAAzB,GACM;AACIxC,MAAAA,KAAK,EAAE1B,UAAU,CAACI,cAAX,CAA0B8D,qBAA1B,EAAiDF,YAAjD,CADX;AAEInJ,MAAAA,KAAK,EAAEqJ;AAFX,KADN,GAKM,IANM,CAAhB;AAQH,GAdD,EAcG,CAAChU,WAAD,EAAc8P,UAAU,CAACI,cAAzB,EAAyC4D,YAAzC,CAdH;;AAgBA,MAAMG,iBAAiB,GAAG,SAApBA,iBAAoB,CAACC,iBAAD,EAAuB;AAC7CH,IAAAA,gBAAgB,CAACG,iBAAD,CAAhB;AACA,QAAMlO,cAAc,GAAGR,yBAAuB,CAC1CxF,WAD0C,EAE1CoE,MAAM,CAAC6L,IAAP,CAAYH,UAAU,CAACI,cAAvB,CAF0C,EAG1CgE,iBAAiB,GAAGA,iBAAiB,CAACvJ,KAArB,GAA6B,EAHJ,CAA9C;AAKAzC,IAAAA,MAAM,CAACtH,QAAP,CAAgBoF,cAAhB;AACAgE,IAAAA,WAAW;AACd,GATD;;AAWA,sBACI,oBAAC,oBAAD;AACI,IAAA,IAAI,EAAE/K,IADV;AAEI,IAAA,aAAa,EAAEgV,iBAFnB;AAGI,IAAA,aAAa,EAAEnB,aAHnB;AAII,IAAA,YAAY,EAAEtE,aAAa,CAACyE,YAAd,IAA8BxE,oBAAoB,CAACwE,YAJrE;AAKI,IAAA,QAAQ,EAAEjT,WAAW,CAAC4C,YAAZ,GAA2BwD,WAA3B,EALd;AAMI,IAAA,MAAM,EAAE6H,OAAO,CAACG,GAAR,CAAY,UAACC,MAAD;AAAA,aAAa;AAC7BpP,QAAAA,IAAI,EAAEoP,MAAM,CAACpP,IADgB;AAE7BuS,QAAAA,KAAK,EAAEnD,MAAM,CAAC1D,KAFe;AAG7BA,QAAAA,KAAK,EAAKhG,WAAL,SAAoB0J,MAAM,CAAC1D;AAHH,OAAb;AAAA,KAAZ;AANZ,KAWK9L,QAXL,CADJ;AAeH;;AAEDgV,qCAAqC,CAACvU,SAAtC,GAAkD;AAC9CkP,EAAAA,aAAa,EAAEjP,SAAS,CAACuN,MADqB;AAE9C2B,EAAAA,oBAAoB,EAAElP,SAAS,CAACuN,MAAV,CAAiBrN,UAFO;AAG9CqQ,EAAAA,UAAU,EAAEvQ,SAAS,CAACuN,MAAV,CAAiBrN,UAHiB;AAI9CqU,EAAAA,YAAY,EAAEvU,SAAS,CAAC2H,MAAV,CAAiBzH,UAJe;AAK9CkF,EAAAA,WAAW,EAAEpF,SAAS,CAAC2H,MAAV,CAAiBzH,UALgB;AAM9CR,EAAAA,IAAI,EAAEM,SAAS,CAAC2H,MAN8B;AAO9CrI,EAAAA,QAAQ,EAAEU,SAAS,CAACC;AAP0B,CAAlD;;AC/DA,SAAS2U,gBAAT,OAA+E;AAAA,MAAnD3F,aAAmD,QAAnDA,aAAmD;AAAA,MAApCC,oBAAoC,QAApCA,oBAAoC;AAAA,MAAdqB,UAAc,QAAdA,UAAc;AAC3E,MAAM5H,MAAM,GAAGpB,SAAS,EAAxB;AAEA,sBACI,oBAAC,qCAAD;AACI,IAAA,IAAI,EAAEoB,MAAM,CAACrH,SAAP,CAAiB,0BAAjB,CADV;AAEI,IAAA,aAAa,EAAE2N,aAFnB;AAGI,IAAA,oBAAoB,EAAEC,oBAH1B;AAII,IAAA,WAAW,EAAEzG,YAAY,CAACH,UAJ9B;AAKI,IAAA,UAAU,EAAEiI,UALhB;AAMI,IAAA,YAAY,EAAC;AANjB,kBAOI,oBAAC,mBAAD,OAPJ,CADJ;AAWH;;AAEDqE,gBAAgB,CAAC7U,SAAjB,GAA6B;AACzBkP,EAAAA,aAAa,EAAEjP,SAAS,CAACuN,MADA;AAEzB2B,EAAAA,oBAAoB,EAAElP,SAAS,CAACuN,MAAV,CAAiBrN,UAFd;AAGzBqQ,EAAAA,UAAU,EAAEvQ,SAAS,CAACuN,MAAV,CAAiBrN;AAHJ,CAA7B;;ACrBA,IAAM2U,eAAe,GAAG,SAAlBA,eAAkB,CAAC5F,aAAD,EAAgBC,oBAAhB,EAAyC;AAC7D,MAAM4F,UAAU,GAAG7F,aAAa,CAACP,OAAd,IAAyBQ,oBAAoB,CAACR,OAAjE;AACA,MAAMiC,cAAc,GAAG,EAAvB;;AACA,uDAAwBmE,UAAxB,wCAAoC;AAAA,QAAzBC,SAAyB;AAChCpE,IAAAA,cAAc,CAAIlI,YAAY,CAACH,UAAjB,SAA+ByM,SAAS,CAAC3J,KAAzC,CAAd,GAAkE;AAC9D6G,MAAAA,KAAK,EAAE8C,SAAS,CAAC3J;AAD6C,KAAlE;AAGH;;AACD,SAAO;AAAEuF,IAAAA,cAAc,EAAdA;AAAF,GAAP;AACH,CATD;;ACKA,SAASqE,0BAAT,OAAyF;AAAA,MAAnD/F,aAAmD,QAAnDA,aAAmD;AAAA,MAApCC,oBAAoC,QAApCA,oBAAoC;AAAA,MAAdqB,UAAc,QAAdA,UAAc;AACrF,MAAM5H,MAAM,GAAGpB,SAAS,EAAxB;AAEA,sBACI,oBAAC,qCAAD;AACI,IAAA,IAAI,EAAEoB,MAAM,CAACrH,SAAP,CAAiB,oCAAjB,CADV;AAEI,IAAA,aAAa,EAAE2N,aAFnB;AAGI,IAAA,oBAAoB,EAAEC,oBAH1B;AAII,IAAA,WAAW,EAAEzG,YAAY,CAACF,eAJ9B;AAKI,IAAA,UAAU,EAAEgI,UALhB;AAMI,IAAA,YAAY,EAAC;AANjB,kBAOI,oBAAC,eAAD,OAPJ,CADJ;AAWH;;AAEDyE,0BAA0B,CAACjV,SAA3B,GAAuC;AACnCkP,EAAAA,aAAa,EAAEjP,SAAS,CAACuN,MADU;AAEnC2B,EAAAA,oBAAoB,EAAElP,SAAS,CAACuN,MAAV,CAAiBrN,UAFJ;AAGnCqQ,EAAAA,UAAU,EAAEvQ,SAAS,CAACuN,MAAV,CAAiBrN;AAHM,CAAvC;;ACrBA,IAAM+U,yBAAyB,GAAG,SAA5BA,yBAA4B,CAAChG,aAAD,EAAgBC,oBAAhB,EAAyC;AACvE,MAAMgG,OAAO,GAAGjG,aAAa,CAACP,OAAd,IAAyBQ,oBAAoB,CAACR,OAA9D;AACA,MAAMiC,cAAc,GAAG,EAAvB;;AACA,uDAAqBuE,OAArB,wCAA8B;AAAA,QAAnBC,MAAmB;AAC1BxE,IAAAA,cAAc,CAAIlI,YAAY,CAACF,eAAjB,SAAoC4M,MAAM,CAAC/J,KAA3C,CAAd,GAAoE;AAChEiJ,MAAAA,eAAe,EAAEc,MAAM,CAAC/J;AADwC,KAApE;AAGH;;AACD,SAAO;AAAEuF,IAAAA,cAAc,EAAdA;AAAF,GAAP;AACH,CATD;;ACEA,IAAM5R,WAAS,GAAGC,UAAU,CAAC,UAACqP,KAAD;AAAA,SAAY;AACrC+G,IAAAA,UAAU,EAAE;AACRC,MAAAA,QAAQ,EAAE,MADF;AAERC,MAAAA,SAAS,EAAE,GAFH;AAGRC,MAAAA,QAAQ,EAAE,MAHF;AAIRC,MAAAA,SAAS,EAAEnH,KAAK,CAACG,OAAN,CAAc,CAAd,CAJH;AAKRiH,MAAAA,YAAY,EAAEpH,KAAK,CAACG,OAAN,CAAc,CAAd;AALN;AADyB,GAAZ;AAAA,CAAD,CAA5B;;AAUA,SAASkH,aAAT,OAA+C;AAAA,MAAtBxC,KAAsB,QAAtBA,KAAsB;AAAA,MAAfD,MAAe,QAAfA,MAAe;AAAA,MAAP0C,GAAO,QAAPA,GAAO;AAC3C,MAAM/V,OAAO,GAAGb,WAAS,EAAzB;AAEA,sBACI;AAAK,IAAA,SAAS,EAAEa,OAAO,CAACwV;AAAxB,kBACI;AAAK,IAAA,GAAG,EAAC,EAAT;AAAY,IAAA,KAAK,EAAElC,KAAnB;AAA0B,IAAA,MAAM,EAAED,MAAlC;AAA0C,IAAA,GAAG,EAAE0C;AAA/C,IADJ,CADJ;AAKH;;AAEDD,aAAa,CAAC3V,SAAd,GAA0B;AACtBmT,EAAAA,KAAK,EAAElT,SAAS,CAACwN,MAAV,CAAiBtN,UADF;AAEtB+S,EAAAA,MAAM,EAAEjT,SAAS,CAACwN,MAAV,CAAiBtN,UAFH;AAGtByV,EAAAA,GAAG,EAAE3V,SAAS,CAAC2H,MAAV,CAAiBzH;AAHA,CAA1B;;ACfA,SAAS0V,UAAT,OAOG;AAAA,MANCC,aAMD,QANCA,aAMD;AAAA,MALCC,cAKD,QALCA,cAKD;AAAA,MAJC5C,KAID,QAJCA,KAID;AAAA,MAHCD,MAGD,QAHCA,MAGD;AAAA,MAFC8C,aAED,QAFCA,aAED;AAAA,MADCC,cACD,QADCA,cACD;AACC,MAAMrN,MAAM,GAAGpB,SAAS,EAAxB;;AACA,wBAAsD7E,KAAK,CAACkF,QAAN,CAAe,IAAf,CAAtD;AAAA,MAAOqO,mBAAP;AAAA,MAA4BC,sBAA5B;;AACA,MAAMC,WAAW,GAAGN,aAAa,GAAGC,cAApC;;AAEA,MAAMM,iBAAiB,GAAG,SAApBA,iBAAoB,CAAClL,EAAD,EAAQ;AAC9BA,IAAAA,EAAE,CAACuB,eAAH;AACA,QAAMrB,KAAK,GAAGF,EAAE,CAACC,aAAH,CAAiBC,KAA/B;AACA,QAAMiL,CAAC,GAAGjL,KAAK,KAAK,EAAV,IAAgBkL,KAAK,CAAClL,KAAD,CAArB,GAA+B,CAA/B,GAAmCmL,QAAQ,CAACnL,KAAD,CAArD;AACA2K,IAAAA,aAAa,CAACM,CAAD,CAAb;;AACA,QAAIJ,mBAAJ,EAAyB;AACrBD,MAAAA,cAAc,CAACvD,IAAI,CAAC+D,KAAL,CAAWH,CAAC,GAAGF,WAAf,CAAD,CAAd;AACH;AACJ,GARD;;AAUA,MAAMM,kBAAkB,GAAG,SAArBA,kBAAqB,CAACvL,EAAD,EAAQ;AAC/BA,IAAAA,EAAE,CAACuB,eAAH;AACA,QAAMrB,KAAK,GAAGF,EAAE,CAACC,aAAH,CAAiBC,KAA/B;AACA,QAAMsL,CAAC,GAAGtL,KAAK,KAAK,EAAV,IAAgBkL,KAAK,CAAClL,KAAD,CAArB,GAA+B,CAA/B,GAAmCmL,QAAQ,CAACnL,KAAD,CAArD;AACA4K,IAAAA,cAAc,CAACU,CAAD,CAAd;;AACA,QAAIT,mBAAJ,EAAyB;AACrBF,MAAAA,aAAa,CAACtD,IAAI,CAAC+D,KAAL,CAAWE,CAAC,GAAGP,WAAf,CAAD,CAAb;AACH;AACJ,GARD;;AAUA,MAAMQ,sBAAsB,GAAG,SAAzBA,sBAAyB,GAAM;AACjC,QAAMC,sBAAsB,GAAG,CAACX,mBAAhC;AACAC,IAAAA,sBAAsB,CAACU,sBAAD,CAAtB;;AACA,QAAIA,sBAAJ,EAA4B;AACxBZ,MAAAA,cAAc,CAACvD,IAAI,CAAC+D,KAAL,CAAWtD,KAAK,GAAGiD,WAAnB,CAAD,CAAd;AACH;AACJ,GAND;;AAQA,sBACI,oBAAC,IAAD;AAAM,IAAA,SAAS,MAAf;AAAgB,IAAA,SAAS,EAAC,KAA1B;AAAgC,IAAA,cAAc,EAAC,UAA/C;AAA0D,IAAA,UAAU,EAAC,QAArE;AAA8E,IAAA,OAAO,EAAE;AAAvF,kBACI,oBAAC,IAAD;AAAM,IAAA,IAAI;AAAV,kBACI,oBAAC,SAAD;AACI,IAAA,IAAI,EAAC,QADT;AAEI,IAAA,KAAK,EAAExN,MAAM,CAACrH,SAAP,CAAiB,6BAAjB,CAFX;AAGI,IAAA,IAAI,EAAC,OAHT;AAII,IAAA,KAAK,EAAE4R,KAJX;AAKI,IAAA,QAAQ,EAAEkD,iBALd;AAMI,IAAA,OAAO,EAAE,iBAAClL,EAAD;AAAA,aAAQA,EAAE,CAACuB,eAAH,EAAR;AAAA,KANb;AAOI,IAAA,KAAK,EAAE;AAAE4I,MAAAA,QAAQ,EAAE;AAAZ;AAPX,IADJ,CADJ,eAYI,oBAAC,IAAD;AAAM,IAAA,IAAI;AAAV,kBACI,oBAAC,UAAD;AAAY,IAAA,OAAO,EAAEsB,sBAArB;AAA6C,IAAA,IAAI,EAAC;AAAlD,KACKV,mBAAmB,gBAAG,oBAAC,QAAD,OAAH,gBAAkB,oBAAC,YAAD,OAD1C,CADJ,CAZJ,eAiBI,oBAAC,IAAD;AAAM,IAAA,IAAI;AAAV,kBACI,oBAAC,SAAD;AACI,IAAA,IAAI,EAAC,QADT;AAEI,IAAA,KAAK,EAAEtN,MAAM,CAACrH,SAAP,CAAiB,8BAAjB,CAFX;AAGI,IAAA,IAAI,EAAC,OAHT;AAII,IAAA,KAAK,EAAE2R,MAJX;AAKI,IAAA,QAAQ,EAAEwD,kBALd;AAMI,IAAA,OAAO,EAAE,iBAACvL,EAAD;AAAA,aAAQA,EAAE,CAACuB,eAAH,EAAR;AAAA,KANb;AAOI,IAAA,KAAK,EAAE;AAAE4I,MAAAA,QAAQ,EAAE;AAAZ;AAPX,IADJ,CAjBJ,CADJ;AA+BH;;AAEDO,UAAU,CAAC7V,SAAX,GAAuB;AACnB8V,EAAAA,aAAa,EAAE7V,SAAS,CAACwN,MAAV,CAAiBtN,UADb;AAEnB4V,EAAAA,cAAc,EAAE9V,SAAS,CAACwN,MAAV,CAAiBtN,UAFd;AAGnBgT,EAAAA,KAAK,EAAElT,SAAS,CAACwN,MAAV,CAAiBtN,UAHL;AAInB+S,EAAAA,MAAM,EAAEjT,SAAS,CAACwN,MAAV,CAAiBtN,UAJN;AAKnB6V,EAAAA,aAAa,EAAE/V,SAAS,CAACG,IAAV,CAAeD,UALX;AAMnB8V,EAAAA,cAAc,EAAEhW,SAAS,CAACG,IAAV,CAAeD;AANZ,CAAvB;;ACpEA,SAAS2W,WAAT,OAAkD;AAAA,MAA3BlK,IAA2B,QAA3BA,IAA2B;AAAA,MAArBmK,OAAqB,QAArBA,OAAqB;AAAA,MAAZC,QAAY,QAAZA,QAAY;AAC9C,MAAMpO,MAAM,GAAGpB,SAAS,EAAxB;;AACA,wBAAgC7E,KAAK,CAACkF,QAAN,CAAe,EAAf,CAAhC;AAAA,MAAOoP,QAAP;AAAA,MAAiBC,WAAjB;;AACA,yBAAoCvU,KAAK,CAACkF,QAAN,CAAe,CAAf,CAApC;AAAA,MAAOsP,UAAP;AAAA,MAAmBC,aAAnB;;AACA,yBAAoDzU,KAAK,CAACkF,QAAN,CAAe,CAAf,CAApD;AAAA,MAAOwP,kBAAP;AAAA,MAA2BC,qBAA3B;;AACA,yBAAsC3U,KAAK,CAACkF,QAAN,CAAe,CAAf,CAAtC;AAAA,MAAO0P,WAAP;AAAA,MAAoBC,cAApB;;AACA,yBAAsD7U,KAAK,CAACkF,QAAN,CAAe,CAAf,CAAtD;AAAA,MAAO4P,mBAAP;AAAA,MAA4BC,sBAA5B;;AACA,yBAAsC/U,KAAK,CAACkF,QAAN,CAAe,KAAf,CAAtC;AAAA,MAAO8P,WAAP;AAAA,MAAoBC,cAApB;;AACA,yBAAwCjV,KAAK,CAACkF,QAAN,CAAe,KAAf,CAAxC;AAAA,MAAOgQ,YAAP;AAAA,MAAqBC,eAArB;;AACA,yBAAgCnV,KAAK,CAACkF,QAAN,CAAe,KAAf,CAAhC;AAAA,MAAOkQ,QAAP;AAAA,MAAiBC,WAAjB;;AACA,yBAA0CrV,KAAK,CAACkF,QAAN,CAAe,IAAf,CAA1C;AAAA,MAAOoQ,aAAP;AAAA,MAAsBC,gBAAtB;;AAEA,MAAM5M,YAAY,GAAG,SAAfA,YAAe,CAACH,EAAD,EAAQ;AACzBA,IAAAA,EAAE,CAACI,cAAH;AACAyL,IAAAA,QAAQ,CAAC;AAAEC,MAAAA,QAAQ,EAARA,QAAF;AAAYE,MAAAA,UAAU,EAAVA,UAAZ;AAAwBI,MAAAA,WAAW,EAAXA;AAAxB,KAAD,CAAR;AACH,GAHD;;AAKA,MAAMY,SAAS,GAAG,SAAZA,SAAY,GAAM;AACpBL,IAAAA,eAAe,CAAC,KAAD,CAAf;AACAZ,IAAAA,WAAW,CAAC,EAAD,CAAX;AACH,GAHD;;AAKA,MAAMkB,eAAe,GAAG,SAAlBA,eAAkB,CAAC3M,GAAD,EAAS;AAC7ByL,IAAAA,WAAW,CAACzL,GAAD,CAAX;;AACA,QAAIwM,aAAJ,EAAmB;AACfI,MAAAA,YAAY,CAACJ,aAAD,CAAZ;AACAC,MAAAA,gBAAgB,CAAC,IAAD,CAAhB;AACH;;AAED,QAAIzM,GAAG,KAAK,EAAZ,EAAgB;AACZuM,MAAAA,WAAW,CAAC,KAAD,CAAX;AACAF,MAAAA,eAAe,CAAC,KAAD,CAAf;AACA;AACH;;AAED,QAAMQ,EAAE,GAAGC,UAAU,CAAC,YAAM;AACxBX,MAAAA,cAAc,CAAC,IAAD,CAAd;AAEA,UAAMY,KAAK,GAAG,IAAIC,KAAJ,EAAd;;AACAD,MAAAA,KAAK,CAACE,MAAN,GAAe,YAAY;AACvBtB,QAAAA,aAAa,CAAC,KAAKjE,KAAN,CAAb;AACAmE,QAAAA,qBAAqB,CAAC,KAAKnE,KAAN,CAArB;AACAqE,QAAAA,cAAc,CAAC,KAAKtE,MAAN,CAAd;AACAwE,QAAAA,sBAAsB,CAAC,KAAKxE,MAAN,CAAtB;AACA0E,QAAAA,cAAc,CAAC,KAAD,CAAd;AACAE,QAAAA,eAAe,CAAC,IAAD,CAAf;AACAE,QAAAA,WAAW,CAAC,KAAD,CAAX;AACH,OARD;;AASAQ,MAAAA,KAAK,CAACG,OAAN,GAAgB,YAAY;AACxBf,QAAAA,cAAc,CAAC,KAAD,CAAd;AACAE,QAAAA,eAAe,CAAC,KAAD,CAAf;AACAE,QAAAA,WAAW,CAAC,IAAD,CAAX;AACH,OAJD;;AAKAQ,MAAAA,KAAK,CAAC5C,GAAN,GAAYnK,GAAZ;AACAyM,MAAAA,gBAAgB,CAAC,IAAD,CAAhB;AACH,KApBoB,EAoBlB,IApBkB,CAArB;AAqBAA,IAAAA,gBAAgB,CAACI,EAAD,CAAhB;AACH,GAnCD;;AAqCA,MAAIpO,OAAO,GAAG,IAAd;AAEA,MAAIyN,WAAJ,EAAiBzN,OAAO,gBAAG,oBAAC,gBAAD,OAAV,CAAjB,KACK,IAAI2N,YAAY,IAAIZ,QAApB,EACD/M,OAAO,gBAAG,oBAAC,aAAD;AAAe,IAAA,GAAG,EAAE+M,QAApB;AAA8B,IAAA,MAAM,EAAEM,WAAtC;AAAmD,IAAA,KAAK,EAAEJ;AAA1D,IAAV,CADC,KAEA,IAAIY,QAAQ,IAAI,CAACF,YAAb,IAA6BZ,QAAjC,EACD/M,OAAO,gBACH,oBAAC,UAAD;AAAY,IAAA,OAAO,EAAC,WAApB;AAAgC,IAAA,KAAK,EAAC,OAAtC;AAA8C,IAAA,YAAY;AAA1D,KACKtB,MAAM,CAACrH,SAAP,CAAiB,4CAAjB,CADL,CADJ;AAMJ,sBACI,oBAAC,MAAD;AACI,IAAA,IAAI,EAAEqL,IADV;AAEI,IAAA,OAAO,EAAEmK,OAFb;AAGI,IAAA,eAAe,EAAE;AACb6B,MAAAA,OAAO,EAAET;AADI;AAHrB,kBAMI;AAAM,IAAA,QAAQ,EAAE7M;AAAhB,kBACI,oBAAC,aAAD,QACKuM,YAAY,IAAIZ,QAAQ,KAAK,EAA7B,iBACG,oBAAC,UAAD;AACI,IAAA,KAAK,EAAEE,UADX;AAEI,IAAA,cAAc,EAAEK,cAFpB;AAGI,IAAA,MAAM,EAAED,WAHZ;AAII,IAAA,aAAa,EAAEF,kBAJnB;AAKI,IAAA,cAAc,EAAEI,mBALpB;AAMI,IAAA,aAAa,EAAEL;AANnB,IAFR,eAWI,oBAAC,IAAD;AAAM,IAAA,SAAS,MAAf;AAAgB,IAAA,UAAU,EAAC,QAA3B;AAAoC,IAAA,cAAc,EAAC;AAAnD,KACKlN,OADL,CAXJ,eAcI,oBAAC,SAAD;AACI,IAAA,SAAS,MADb;AAEI,IAAA,KAAK,EAAEtB,MAAM,CAACrH,SAAP,CAAiB,2BAAjB,CAFX;AAGI,IAAA,KAAK,EAAE0V,QAHX;AAII,IAAA,QAAQ,EAAE,kBAAC9L,EAAD;AAAA,aAAQiN,eAAe,CAACjN,EAAE,CAACC,aAAH,CAAiBC,KAAlB,CAAvB;AAAA,KAJd;AAKI,IAAA,SAAS;AALb,IAdJ,CADJ,eAuBI,oBAAC,aAAD,qBACI,oBAAC,MAAD;AAAQ,IAAA,IAAI,EAAC,QAAb;AAAsB,IAAA,OAAO,EAAE0L,OAA/B;AAAwC,IAAA,KAAK,EAAC;AAA9C,KACKnO,MAAM,CAACrH,SAAP,CAAiB,+BAAjB,CADL,CADJ,eAII,oBAAC,MAAD;AAAQ,IAAA,IAAI,EAAC,QAAb;AAAsB,IAAA,KAAK,EAAC,SAA5B;AAAsC,IAAA,QAAQ,EAAE,CAACsW;AAAjD,KACKjP,MAAM,CAACrH,SAAP,CAAiB,4BAAjB,CADL,CAJJ,CAvBJ,CANJ,CADJ;AAyCH;;AAEDuV,WAAW,CAAC9W,SAAZ,GAAwB;AACpB4M,EAAAA,IAAI,EAAE3M,SAAS,CAACI,IAAV,CAAeF,UADD;AAEpB4W,EAAAA,OAAO,EAAE9W,SAAS,CAACG,IAAV,CAAeD,UAFJ;AAGpB6W,EAAAA,QAAQ,EAAE/W,SAAS,CAACG,IAAV,CAAeD;AAHL,CAAxB;;AChIA;AACA,AAkKA;AACA,AAAO,MAAM,eAAe,iBAAiB,OAAO,MAAM,KAAK,WAAW,IAAI,MAAM,CAAC,QAAQ,KAAK,MAAM,CAAC,QAAQ,GAAG,MAAM,CAAC,iBAAiB,CAAC,CAAC,IAAI,YAAY,CAAC;AAC/J,AA2DA;AACA,AAAO,MAAM,oBAAoB,iBAAiB,OAAO,MAAM,KAAK,WAAW,IAAI,MAAM,CAAC,aAAa,KAAK,MAAM,CAAC,aAAa,GAAG,MAAM,CAAC,sBAAsB,CAAC,CAAC,IAAI,iBAAiB,CAAC;AACxL,AA8UA;AACA;AACA,AAAO,SAAS,MAAM,CAAC,IAAI,EAAE,OAAO,EAAE;AACtC,CAAC,IAAI;AACL,EAAE,IAAI,MAAM,GAAG,IAAI,EAAE,CAAC;AACtB,EAAE,CAAC,MAAM,CAAC,EAAE;AACZ,EAAE,OAAO,OAAO,CAAC,CAAC,CAAC,CAAC;AACpB,EAAE;AACF,CAAC,IAAI,MAAM,IAAI,MAAM,CAAC,IAAI,EAAE;AAC5B,EAAE,OAAO,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,OAAO,CAAC,CAAC;AACtC,EAAE;AACF,CAAC,OAAO,MAAM,CAAC;AACf,CAAC;;AC/iBD,IAAMnB,WAAS,GAAGC,UAAU,CAAC,UAACqP,KAAD;AAAA,SAAY;AACrCuK,IAAAA,QAAQ,EAAE;AAAA,UAAGC,iBAAH,QAAGA,iBAAH;AAAA,aAA4B;AAClC3F,QAAAA,KAAK,EAAE,GAD2B;AAElCD,QAAAA,MAAM,EAAE,GAF0B;AAGlC6F,QAAAA,SAAS,EAAE,YAHuB;AAIlClG,QAAAA,OAAO,EAAE,MAJyB;AAKlCmG,QAAAA,cAAc,EAAE,QALkB;AAMlCjG,QAAAA,UAAU,EAAE,QANsB;AAOlCC,QAAAA,OAAO,EAAE1E,KAAK,CAACG,OAAN,CAAc,CAAd,CAPyB;AAQlCgH,QAAAA,SAAS,EAAEnH,KAAK,CAACG,OAAN,CAAc,CAAd,CARuB;AASlCiH,QAAAA,YAAY,EAAEpH,KAAK,CAACG,OAAN,CAAc,CAAd,CAToB;AAUlC2E,QAAAA,YAAY,EAAE9E,KAAK,CAAC2K,KAAN,CAAY7F,YAAZ,IAA4B,CAVR;AAWlCkB,QAAAA,eAAe,EAAEwE,iBAAiB,GAC5BxK,KAAK,CAAC4K,OAAN,CAAcC,IAAd,CAAmB,GAAnB,KAA2B,SADC,GAE5B7K,KAAK,CAAC4K,OAAN,CAAcC,IAAd,CAAmB,GAAnB,KAA2B,SAbC;AAclC9F,QAAAA,MAAM,EAAEyF,iBAAiB,mBACNxK,KAAK,CAAC4K,OAAN,CAAcC,IAAd,CAAmB,GAAnB,KAA2B,SADrB,qBAEL7K,KAAK,CAAC4K,OAAN,CAAcC,IAAd,CAAmB,GAAnB,KAA2B,SAFtB,CAdS;AAiBlCjH,QAAAA,KAAK,EAAE5D,KAAK,CAAC4K,OAAN,CAAcvZ,IAAd,CAAmByZ,IAAnB,IAA2B,qBAjBA;AAkBlC9F,QAAAA,MAAM,EAAE;AAlB0B,OAA5B;AAAA;AAD2B,GAAZ;AAAA,CAAD,CAA5B;;AAuBA,SAAS+F,YAAT,QAAmE;AAAA,MAA3CzM,IAA2C,SAA3CA,IAA2C;AAAA,MAArCmK,OAAqC,SAArCA,OAAqC;AAAA,MAA5BC,QAA4B,SAA5BA,QAA4B;AAAA,MAAlBsC,cAAkB,SAAlBA,cAAkB;AAC/D,MAAM1Q,MAAM,GAAGpB,SAAS,EAAxB;;AACA,wBAAgC7E,KAAK,CAACkF,QAAN,CAAe,EAAf,CAAhC;AAAA,MAAOoP,QAAP;AAAA,MAAiBC,WAAjB;;AACA,yBAAoCvU,KAAK,CAACkF,QAAN,CAAe,CAAf,CAApC;AAAA,MAAOsP,UAAP;AAAA,MAAmBC,aAAnB;;AACA,yBAAoDzU,KAAK,CAACkF,QAAN,CAAe,CAAf,CAApD;AAAA,MAAOwP,kBAAP;AAAA,MAA2BC,qBAA3B;;AACA,yBAAsC3U,KAAK,CAACkF,QAAN,CAAe,CAAf,CAAtC;AAAA,MAAO0P,WAAP;AAAA,MAAoBC,cAApB;;AACA,yBAAsD7U,KAAK,CAACkF,QAAN,CAAe,CAAf,CAAtD;AAAA,MAAO4P,mBAAP;AAAA,MAA4BC,sBAA5B;;AACA,yBAAsC/U,KAAK,CAACkF,QAAN,CAAe,KAAf,CAAtC;AAAA,MAAO8P,WAAP;AAAA,MAAoBC,cAApB;;AACA,yBAAwCjV,KAAK,CAACkF,QAAN,CAAe,KAAf,CAAxC;AAAA,MAAOgQ,YAAP;AAAA,MAAqBC,eAArB;;AACA,yBAAgCnV,KAAK,CAACkF,QAAN,CAAe,KAAf,CAAhC;AAAA,MAAOkQ,QAAP;AAAA,MAAiBC,WAAjB;;AACA,yBAAwCrV,KAAK,CAACkF,QAAN,CAAe,IAAf,CAAxC;AAAA,MAAO0R,YAAP;AAAA,MAAqBC,eAArB;;AACA,0BAAkD7W,KAAK,CAACkF,QAAN,CAAe,KAAf,CAAlD;AAAA,MAAOiR,iBAAP;AAAA,MAA0BW,oBAA1B;;AACA,MAAMC,YAAY,GAAG/W,KAAK,CAACqI,SAAN,EAArB;AACA,MAAMnL,OAAO,GAAGb,WAAS,CAAC;AAAE8Z,IAAAA,iBAAiB,EAAjBA;AAAF,GAAD,CAAzB;;AAEA,MAAMxN,YAAY,GAAG,SAAfA,YAAe,CAACH,EAAD,EAAQ;AACzBA,IAAAA,EAAE,CAACI,cAAH;AACAJ,IAAAA,EAAE,CAACuB,eAAH;AACAsK,IAAAA,QAAQ,CAAC;AAAEC,MAAAA,QAAQ,EAARA,QAAF;AAAYE,MAAAA,UAAU,EAAVA,UAAZ;AAAwBI,MAAAA,WAAW,EAAXA;AAAxB,KAAD,CAAR;AACH,GAJD;;AAMA,MAAMoC,mBAAmB,GAAG,SAAtBA,mBAAsB,CAACxO,EAAD,EAAQ;AAChCA,IAAAA,EAAE,CAACI,cAAH;AACAmO,IAAAA,YAAY,CAAC1W,OAAb,CAAqB4W,KAArB;AACH,GAHD;;AAKA,MAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAAC1O,EAAD,EAAQ;AAC5BA,IAAAA,EAAE,CAACI,cAAH;AACAJ,IAAAA,EAAE,CAACuB,eAAH;AACA+M,IAAAA,oBAAoB,CAAC,IAAD,CAApB;AACH,GAJD;;AAMA,MAAMK,eAAe,GAAG,SAAlBA,eAAkB,CAAC3O,EAAD,EAAQ;AAC5BA,IAAAA,EAAE,CAACI,cAAH;AACAJ,IAAAA,EAAE,CAACuB,eAAH;AACA+M,IAAAA,oBAAoB,CAAC,KAAD,CAApB;AACH,GAJD;;AAMA,MAAMM,cAAc,GAAG,SAAjBA,cAAiB,CAAC5O,EAAD,EAAQ;AAC3BA,IAAAA,EAAE,CAACI,cAAH;AACAJ,IAAAA,EAAE,CAACuB,eAAH;AACA+M,IAAAA,oBAAoB,CAAC,IAAD,CAApB;AACH,GAJD;;AAMA,MAAMO,UAAU,YAAVA,UAAU,CAAU7O,EAAV;AAAA,QAAiB;AAC7BA,MAAAA,EAAE,CAACI,cAAH;AACAJ,MAAAA,EAAE,CAACuB,eAAH;AACA,UAAMuN,KAAK,GAAG9O,EAAE,CAAC+O,YAAH,CAAgBD,KAA9B;;AAH6B;AAI7B,YAAIA,KAAK,CAAC5L,MAAN,GAAe,CAAnB,yBAA4B8L,YAAY,CAACF,KAAK,CAAC,CAAD,CAAN,CAAxC;AAJ6B;;AAAA;AAKhC,KALe;AAAA;AAAA;AAAA,GAAhB;;AAOA,MAAMG,qBAAqB,YAArBA,qBAAqB;AAAA,QAAe;AACtC,UAAMH,KAAK,GAAGP,YAAY,CAAC1W,OAAb,CAAqBiX,KAAnC;;AADsC;AAEtC,YAAIA,KAAK,CAAC5L,MAAN,GAAe,CAAnB,yBAA4B8L,YAAY,CAACF,KAAK,CAAC,CAAD,CAAN,CAAxC;AAFsC;;AAAA;AAGzC,KAH0B;AAAA;AAAA;AAAA,GAA3B;;AAKA,MAAME,YAAY,YAAZA,YAAY,CAAUE,IAAV;AAAA,QAAmB;AACjCZ,MAAAA,oBAAoB,CAAC,KAAD,CAApB;AACA7B,MAAAA,cAAc,CAAC,IAAD,CAAd;;AAFiC,sCAG7B;AAAA,+BAC+B0B,cAAc,CAACe,IAAD,CAD7C,iBACMC,gBADN;AAEApD,UAAAA,WAAW,CAACoD,gBAAD,CAAX;AACA,cAAM9B,KAAK,GAAG,IAAIC,KAAJ,EAAd;;AACAD,UAAAA,KAAK,CAACE,MAAN,GAAe,YAAY;AACvBtB,YAAAA,aAAa,CAAC,KAAKjE,KAAN,CAAb;AACAmE,YAAAA,qBAAqB,CAAC,KAAKnE,KAAN,CAArB;AACAqE,YAAAA,cAAc,CAAC,KAAKtE,MAAN,CAAd;AACAwE,YAAAA,sBAAsB,CAAC,KAAKxE,MAAN,CAAtB;AACA0E,YAAAA,cAAc,CAAC,KAAD,CAAd;AACAE,YAAAA,eAAe,CAAC,IAAD,CAAf;AACAE,YAAAA,WAAW,CAAC,KAAD,CAAX;AACH,WARD;;AASAQ,UAAAA,KAAK,CAACG,OAAN,GAAgB,YAAY;AACxBf,YAAAA,cAAc,CAAC,KAAD,CAAd;AACAE,YAAAA,eAAe,CAAC,KAAD,CAAf;AACAE,YAAAA,WAAW,CAAC,IAAD,CAAX;AACAwB,YAAAA,eAAe,CAAC,IAAD,CAAf;AACH,WALD;;AAMAhB,UAAAA,KAAK,CAAC5C,GAAN,GAAY0E,gBAAZ;AAnBA;AAoBH,OAvBgC,YAuBxBC,CAvBwB,EAuBrB;AACR3C,QAAAA,cAAc,CAAC,KAAD,CAAd;AACAE,QAAAA,eAAe,CAAC,KAAD,CAAf;AACAE,QAAAA,WAAW,CAAC,IAAD,CAAX;AACAwB,QAAAA,eAAe,CAACe,CAAD,CAAf;AACH,OA5BgC;;AAAA;AA6BpC,KA7BiB;AAAA;AAAA;AAAA,GAAlB;;AA+BA,MAAMpC,SAAS,GAAG,SAAZA,SAAY,GAAM;AACpBjB,IAAAA,WAAW,CAAC,EAAD,CAAX;AACAY,IAAAA,eAAe,CAAC,KAAD,CAAf;AACAF,IAAAA,cAAc,CAAC,KAAD,CAAd;AACA6B,IAAAA,oBAAoB,CAAC,KAAD,CAApB;AACH,GALD;;AAOA,MAAIe,eAAe,gBACf,oBAAC,UAAD;AAAY,IAAA,OAAO,EAAC;AAApB,KACK5R,MAAM,CAACrH,SAAP,CAAiB,qCAAjB,CADL,CADJ;;AAMA,MAAIoW,WAAJ,EAAiB;AACb6C,IAAAA,eAAe,gBAAG,oBAAC,gBAAD,OAAlB;AACH,GAFD,MAEO,IAAI3C,YAAY,IAAIZ,QAApB,EAA8B;AACjCuD,IAAAA,eAAe,gBAAG,oBAAC,aAAD;AAAe,MAAA,GAAG,EAAEvD,QAApB;AAA8B,MAAA,MAAM,EAAEM,WAAtC;AAAmD,MAAA,KAAK,EAAEJ;AAA1D,MAAlB;AACH;;AAED,sBACI,oBAAC,MAAD;AACI,IAAA,IAAI,EAAEvK,IADV;AAEI,IAAA,OAAO,EAAEmK,OAFb;AAGI,IAAA,eAAe,EAAE;AACb6B,MAAAA,OAAO,EAAET;AADI;AAHrB,kBAMI;AAAM,IAAA,QAAQ,EAAE7M;AAAhB,kBACI,oBAAC,aAAD,qBACI;AACI,IAAA,GAAG,EAAEoO,YADT;AAEI,IAAA,IAAI,EAAC,MAFT;AAGI,IAAA,MAAM,EAAC,SAHX;AAII,IAAA,QAAQ,EAAEU,qBAJd;AAKI,IAAA,KAAK,EAAE;AAAEvH,MAAAA,OAAO,EAAE;AAAX;AALX,IADJ,EAQKgF,YAAY,IAAIZ,QAAQ,KAAK,EAA7B,iBACG,oBAAC,UAAD;AACI,IAAA,aAAa,EAAEI,kBADnB;AAEI,IAAA,cAAc,EAAEI,mBAFpB;AAGI,IAAA,KAAK,EAAEN,UAHX;AAII,IAAA,MAAM,EAAEI,WAJZ;AAKI,IAAA,aAAa,EAAEH,aALnB;AAMI,IAAA,cAAc,EAAEI;AANpB,IATR,EAmBKO,QAAQ,IAAI,CAACF,YAAb,iBACG,oBAAC,UAAD;AAAY,IAAA,OAAO,EAAC,WAApB;AAAgC,IAAA,KAAK,EAAC,OAAtC;AAA8C,IAAA,KAAK,EAAC,QAApD;AAA6D,IAAA,YAAY;AAAzE,KACK0B,YAAY,KAAK,IAAjB,GACKA,YADL,GAEK3Q,MAAM,CAACrH,SAAP,CAAiB,4CAAjB,CAHV,CApBR,eA2BI;AACI,IAAA,SAAS,EAAE1B,OAAO,CAACgZ,QADvB;AAEI,IAAA,OAAO,EAAEc,mBAFb;AAGI,IAAA,WAAW,EAAEE,eAHjB;AAII,IAAA,WAAW,EAAEC,eAJjB;AAKI,IAAA,UAAU,EAAEC,cALhB;AAMI,IAAA,MAAM,EAAEC;AANZ,KAOKQ,eAPL,CA3BJ,CADJ,eAsCI,oBAAC,aAAD,qBACI,oBAAC,MAAD;AAAQ,IAAA,IAAI,EAAC,QAAb;AAAsB,IAAA,OAAO,EAAEzD,OAA/B;AAAwC,IAAA,KAAK,EAAC;AAA9C,KACKnO,MAAM,CAACrH,SAAP,CAAiB,+BAAjB,CADL,CADJ,eAII,oBAAC,MAAD;AAAQ,IAAA,IAAI,EAAC,QAAb;AAAsB,IAAA,KAAK,EAAC,SAA5B;AAAsC,IAAA,QAAQ,EAAE,CAACsW;AAAjD,KACKjP,MAAM,CAACrH,SAAP,CAAiB,4BAAjB,CADL,CAJJ,CAtCJ,CANJ,CADJ;AAwDH;;AAED8X,YAAY,CAACrZ,SAAb,GAAyB;AACrB4M,EAAAA,IAAI,EAAE3M,SAAS,CAACI,IAAV,CAAeF,UADA;AAErB4W,EAAAA,OAAO,EAAE9W,SAAS,CAACG,IAAV,CAAeD,UAFH;AAGrB6W,EAAAA,QAAQ,EAAE/W,SAAS,CAACG,IAAV,CAAeD,UAHJ;AAIrBmZ,EAAAA,cAAc,EAAErZ,SAAS,CAACG,IAAV,CAAeD;AAJV,CAAzB;;AC7LA,SAASsa,iBAAT,OAA0F;AAAA,MAA7D7N,IAA6D,QAA7DA,IAA6D;AAAA,MAAvDmK,OAAuD,QAAvDA,OAAuD;AAAA,MAA9CnB,GAA8C,QAA9CA,GAA8C;AAAA,MAAzCE,aAAyC,QAAzCA,aAAyC;AAAA,MAA1BC,cAA0B,QAA1BA,cAA0B;AAAA,MAAV2E,MAAU,QAAVA,MAAU;;AACtF,wBAA0B/X,KAAK,CAACkF,QAAN,CAAe,CAAf,CAA1B;AAAA,MAAOsL,KAAP;AAAA,MAAcwH,QAAd;;AACA,yBAA4BhY,KAAK,CAACkF,QAAN,CAAe,CAAf,CAA5B;AAAA,MAAOqL,MAAP;AAAA,MAAe0H,SAAf;;AACA,MAAMhS,MAAM,GAAGpB,SAAS,EAAxB;AAEA7E,EAAAA,KAAK,CAACE,SAAN,CAAgB,YAAM;AAClB8X,IAAAA,QAAQ,CAAC7E,aAAD,CAAR;AACA8E,IAAAA,SAAS,CAAC7E,cAAD,CAAT;AACH,GAHD,EAGG,CAACD,aAAD,EAAgBC,cAAhB,CAHH;;AAKA,MAAMzK,YAAY,GAAG,SAAfA,YAAe,CAACH,EAAD,EAAQ;AACzBA,IAAAA,EAAE,CAACI,cAAH;AACAmP,IAAAA,MAAM,CAACvH,KAAD,EAAQD,MAAR,CAAN;AACH,GAHD;;AAKA,sBACI,oBAAC,MAAD;AAAQ,IAAA,IAAI,EAAEtG,IAAd;AAAoB,IAAA,OAAO,EAAEmK;AAA7B,kBACI;AAAM,IAAA,QAAQ,EAAEzL;AAAhB,kBACI,oBAAC,aAAD,qBACI,oBAAC,UAAD;AACI,IAAA,KAAK,EAAE6H,KADX;AAEI,IAAA,MAAM,EAAED,MAFZ;AAGI,IAAA,aAAa,EAAEyH,QAHnB;AAII,IAAA,cAAc,EAAEC,SAJpB;AAKI,IAAA,aAAa,EAAE9E,aALnB;AAMI,IAAA,cAAc,EAAEC;AANpB,IADJ,eASI,oBAAC,IAAD;AAAM,IAAA,SAAS,MAAf;AAAgB,IAAA,UAAU,EAAC,QAA3B;AAAoC,IAAA,cAAc,EAAC;AAAnD,kBACI,oBAAC,aAAD;AAAe,IAAA,GAAG,EAAEH,GAApB;AAAyB,IAAA,KAAK,EAAEzC,KAAhC;AAAuC,IAAA,MAAM,EAAED;AAA/C,IADJ,CATJ,CADJ,eAcI,oBAAC,aAAD,qBACI,oBAAC,MAAD;AAAQ,IAAA,IAAI,EAAC,QAAb;AAAsB,IAAA,OAAO,EAAE;AAAA,aAAM6D,OAAO,EAAb;AAAA;AAA/B,KACKnO,MAAM,CAACrH,SAAP,CAAiB,+BAAjB,CADL,CADJ,eAII,oBAAC,MAAD;AAAQ,IAAA,IAAI,EAAC;AAAb,KACKqH,MAAM,CAACrH,SAAP,CAAiB,+BAAjB,CADL,CAJJ,CAdJ,CADJ,CADJ;AA2BH;;AAEDkZ,iBAAiB,CAACza,SAAlB,GAA8B;AAC1B4M,EAAAA,IAAI,EAAE3M,SAAS,CAACI,IAAV,CAAeF,UADK;AAE1B4W,EAAAA,OAAO,EAAE9W,SAAS,CAACG,IAAV,CAAeD,UAFE;AAG1ByV,EAAAA,GAAG,EAAE3V,SAAS,CAAC2H,MAAV,CAAiBzH,UAHI;AAI1B2V,EAAAA,aAAa,EAAE7V,SAAS,CAACwN,MAAV,CAAiBtN,UAJN;AAK1B4V,EAAAA,cAAc,EAAE9V,SAAS,CAACwN,MAAV,CAAiBtN,UALP;AAM1Bua,EAAAA,MAAM,EAAEza,SAAS,CAACG,IAAV,CAAeD;AANG,CAA9B;;ACnCA,SAAS0a,YAAT,OAA+D;AAAA,MAAvC3L,aAAuC,QAAvCA,aAAuC;AAAA,MAAxBC,oBAAwB,QAAxBA,oBAAwB;AAC3D,MAAMvG,MAAM,GAAGpB,SAAS,EAAxB;AACF,MAAM9G,WAAW,GAAGqI,cAAc,CAACH,MAAD,CAAlC;AAEE,MAAM8B,WAAW,GAAGxB,cAAc,EAAlC;AACA,MAAM0K,MAAM,GAAGlB,IAAI,CAACmB,MAAL,GAAc5M,QAAd,CAAuB,EAAvB,EAA2B6M,SAA3B,CAAqC,CAArC,CAAf;;AACA,wBAAgCnR,KAAK,CAACkF,QAAN,CAAe,IAAf,CAAhC;AAAA,MAAOuE,QAAP;AAAA,MAAiBC,WAAjB;;AACA,yBAAwD1J,KAAK,CAACkF,QAAN,CAAe,KAAf,CAAxD;AAAA,MAAOiT,oBAAP;AAAA,MAA6BC,uBAA7B;;AACA,yBAAkDpY,KAAK,CAACkF,QAAN,CAAe,KAAf,CAAlD;AAAA,MAAOmT,iBAAP;AAAA,MAA0BC,oBAA1B;;AACA,MAAM3B,cAAc,GAAGpK,aAAa,CAACoK,cAAd,IAAgCnK,oBAAoB,CAACmK,cAA5E;AAEA,MAAM4B,mBAAmB,GAAGtS,MAAM,CAACuS,oBAAP,GACtBza,WAAW,CAACqD,iBAAZ,GAAgC+H,SAAhC,CAA0ClD,MAAM,CAACuS,oBAAjD,CADsB,GAEtB,IAFN;;AAIA,MAAMC,iBAAiB,GAAG,SAApBA,iBAAoB,QAA2C;AAAA,QAAxCnE,QAAwC,SAAxCA,QAAwC;AAAA,QAA9BE,UAA8B,SAA9BA,UAA8B;AAAA,QAAlBI,WAAkB,SAAlBA,WAAkB;AACjE,QAAIN,QAAQ,KAAK,EAAjB,EAAqB;AACrBgE,IAAAA,oBAAoB,CAAC,KAAD,CAApB;AACAF,IAAAA,uBAAuB,CAAC,KAAD,CAAvB;AAEA,QAAMxU,YAAY,GAAG7F,WAAW,CAACqD,iBAAZ,EAArB;AACA,QAAMwG,sBAAsB,GAAGhE,YAAY,CAAC6D,YAAb,CAA0BoB,QAAQ,CAACjC,KAAnC,EAA0C,WAA1C,EAAuD;AAClFqM,MAAAA,GAAG,EAAEqB,QAD6E;AAElF9D,MAAAA,KAAK,EAAEgE,UAF2E;AAGlFjE,MAAAA,MAAM,EAAEqE;AAH0E,KAAvD,CAA/B;AAKA,QAAMlN,SAAS,GAAGE,sBAAsB,CAACD,uBAAvB,EAAlB;AACA,QAAM5D,cAAc,GAAGC,mBAAW,CAACC,IAAZ,CACnBlG,WADmB,EAEnB6J,sBAFmB,EAGnB,cAHmB,CAAvB;AAKA3B,IAAAA,MAAM,CAACtH,QAAP,CAAgB+Z,wBAAgB,CAACC,iBAAjB,CAAmC5U,cAAnC,EAAmD2D,SAAnD,EAA8D,GAA9D,CAAhB;AACAK,IAAAA,WAAW;AACd,GAnBD;;AAqBA,MAAM6Q,iBAAiB,GAAG,SAApBA,iBAAoB,CAACpI,KAAD,EAAQD,MAAR,EAAmB;AACzCtK,IAAAA,MAAM,CAAC4S,qBAAP;AACA,QAAMjV,YAAY,GAAG7F,WAAW,CAACqD,iBAAZ,EAArB;AACA,QAAM2C,cAAc,GAAGC,mBAAW,CAACC,IAAZ,CACnBlG,WADmB,EAEnB6F,YAAY,CAACkV,eAAb,CAA6B7S,MAAM,CAACuS,oBAApC,EAA0D;AAAEhI,MAAAA,KAAK,EAALA,KAAF;AAASD,MAAAA,MAAM,EAANA;AAAT,KAA1D,CAFmB,EAGnB,cAHmB,CAAvB;AAKAtK,IAAAA,MAAM,CAACtH,QAAP,CAAgBoF,cAAhB;AACAgE,IAAAA,WAAW;AACd,GAVD;;AAYA,sBACI,oBAAC,KAAD,CAAO,QAAP,qBACI,oBAAC,aAAD;AACI,IAAA,OAAO,EAAE,iBAACS,EAAD;AAAA,aAAQkB,WAAW,CAAClB,EAAE,CAACC,aAAJ,CAAnB;AAAA,KADb;AAEI,IAAA,IAAI,EAAExC,MAAM,CAACrH,SAAP,CAAiB,sBAAjB,CAFV;AAGI,qBAAeqS,MAHnB;AAII,qBAAc;AAJlB,kBAKI,oBAAC,SAAD,OALJ,CADJ,eASI,oBAAC,OAAD;AACI,IAAA,EAAE,EAAEA,MADR;AAEI,IAAA,QAAQ,EAAExH,QAFd;AAGI,IAAA,YAAY,EAAE;AACVtM,MAAAA,QAAQ,EAAE,QADA;AAEVC,MAAAA,UAAU,EAAE;AAFF,KAHlB;AAOI,IAAA,eAAe,EAAE;AACbD,MAAAA,QAAQ,EAAE,KADG;AAEbC,MAAAA,UAAU,EAAE;AAFC,KAPrB;AAWI,IAAA,WAAW,MAXf;AAYI,IAAA,IAAI,EAAEwN,OAAO,CAACnB,QAAD,CAZjB;AAaI,IAAA,OAAO,EAAE;AAAA,aAAMC,WAAW,CAAC,IAAD,CAAjB;AAAA;AAbb,kBAcI,oBAAC,IAAD;AACI,IAAA,SAAS,EAAC,KADd;AAEI,kBAAYzD,MAAM,CAACrH,SAAP,CAAiB,qCAAjB;AAFhB,kBAGI,oBAAC,QAAD;AACI,IAAA,MAAM,MADV;AAEI,IAAA,OAAO,EAAE,mBAAM;AACXwZ,MAAAA,uBAAuB,CAAC,IAAD,CAAvB;AACA1O,MAAAA,WAAW,CAAC,IAAD,CAAX;AACH;AALL,kBAMI,oBAAC,YAAD,qBACI,oBAAC,WAAD,OADJ,CANJ,eASI,oBAAC,YAAD;AAAc,IAAA,OAAO,EAAEzD,MAAM,CAACrH,SAAP,CAAiB,+BAAjB;AAAvB,IATJ,CAHJ,eAcI,oBAAC,QAAD;AACI,IAAA,MAAM,MADV;AAEI,IAAA,OAAO,EAAE,mBAAM;AACX0Z,MAAAA,oBAAoB,CAAC,IAAD,CAApB;AACA5O,MAAAA,WAAW,CAAC,IAAD,CAAX;AACH;AALL,kBAMI,oBAAC,YAAD,qBACI,oBAAC,QAAD,OADJ,CANJ,eASI,oBAAC,YAAD;AAAc,IAAA,OAAO,EAAEzD,MAAM,CAACrH,SAAP,CAAiB,4BAAjB;AAAvB,IATJ,CAdJ,CAdJ,CATJ,eAmDI,oBAAC,WAAD;AACI,IAAA,QAAQ,EAAE6Z,iBADd;AAEI,IAAA,OAAO,EAAE;AAAA,aAAMH,oBAAoB,CAAC,KAAD,CAA1B;AAAA,KAFb;AAGI,IAAA,IAAI,EAAED;AAHV,IAnDJ,eAyDI,oBAAC,YAAD;AACI,IAAA,QAAQ,EAAEI,iBADd;AAEI,IAAA,OAAO,EAAE;AAAA,aAAML,uBAAuB,CAAC,KAAD,CAA7B;AAAA,KAFb;AAGI,IAAA,IAAI,EAAED,oBAHV;AAII,IAAA,cAAc,EAAExB;AAJpB,IAzDJ,eAgEI,oBAAC,iBAAD;AACI,IAAA,IAAI,EAAE1Q,MAAM,CAAC8S,0BADjB;AAEI,IAAA,OAAO,EAAE;AAAA,aAAM9S,MAAM,CAAC4S,qBAAP,EAAN;AAAA,KAFb;AAGI,IAAA,GAAG,EAAEN,mBAAmB,GAAGA,mBAAmB,CAAC5O,OAApB,GAA8BsJ,GAAjC,GAAuC,EAHnE;AAII,IAAA,aAAa,EAAEsF,mBAAmB,GAAGA,mBAAmB,CAAC5O,OAApB,GAA8B6G,KAAjC,GAAyC,CAJ/E;AAKI,IAAA,cAAc,EAAE+H,mBAAmB,GAAGA,mBAAmB,CAAC5O,OAApB,GAA8B4G,MAAjC,GAA0C,CALjF;AAMI,IAAA,MAAM,EAAEqI;AANZ,IAhEJ,CADJ;AA2EH;;AAEDV,YAAY,CAAC7a,SAAb,GAAyB;AACrBkP,EAAAA,aAAa,EAAEjP,SAAS,CAACuN,MAAV,CAAiBrN,UADX;AAErBgP,EAAAA,oBAAoB,EAAElP,SAAS,CAACuN,MAAV,CAAiBrN;AAFlB,CAAzB;;AC9HA,IAAMwb,WAAW,GAAG,SAAdA,WAAc,OAA6B;AAAA,MAA1BpV,YAA0B,QAA1BA,YAA0B;AAAA,MAAZ3B,KAAY,QAAZA,KAAY;AAC7C,MAAMgX,MAAM,GAAGrV,YAAY,CAACuF,SAAb,CAAuBlH,KAAK,CAACiX,WAAN,CAAkB,CAAlB,CAAvB,CAAf;AACA,MAAMC,IAAI,GAAGF,MAAM,CAAC7P,OAAP,EAAb;;AAEA,MAAI+P,IAAI,KAAKtQ,QAAQ,CAACjC,KAAtB,EAA6B;AACzB,0BAAiDqS,MAAM,CAACtP,OAAP,EAAjD;AAAA,QAAQsJ,GAAR,mBAAQA,GAAR;AAAA,gDAAazC,KAAb;AAAA,QAAaA,KAAb,sCAAqB,MAArB;AAAA,gDAA6BD,MAA7B;AAAA,QAA6BA,MAA7B,sCAAsC,MAAtC;;AACA,wBACI,oBAAC,WAAD;AACI,MAAA,GAAG,EAAE0C,GADT;AAEI,MAAA,KAAK,EAAEzC,KAFX;AAGI,MAAA,MAAM,EAAED,MAHZ;AAII,MAAA,KAAK,EAAEtO,KAJX;AAKI,MAAA,YAAY,EAAE2B;AALlB,MADJ;AASH;;AAED,SAAO,IAAP;AACH,CAlBD;;AAoBAoV,WAAW,CAAC3b,SAAZ,GAAwB;AACpBuG,EAAAA,YAAY,EAAEtG,SAAS,CAACuN,MAAV,CAAiBrN,UADX;AAEpByE,EAAAA,KAAK,EAAE3E,SAAS,CAACuN,MAAV,CAAiBrN;AAFJ,CAAxB;AAKA,IAAMnB,WAAS,GAAGC,UAAU,CAAC,UAACqP,KAAD;AAAA,SAAY;AACrCyN,IAAAA,OAAO,EAAE;AACL/I,MAAAA,OAAO,EAAE1E,KAAK,CAACG,OAAN,CAAc,GAAd;AADJ;AAD4B,GAAZ;AAAA,CAAD,CAA5B;;AAMA,IAAMuN,WAAW,GAAG,SAAdA,WAAc,QAAiD;AAAA,MAA9CpG,GAA8C,SAA9CA,GAA8C;AAAA,MAAzCzC,KAAyC,SAAzCA,KAAyC;AAAA,MAAlCD,MAAkC,SAAlCA,MAAkC;AAAA,MAA1B3M,YAA0B,SAA1BA,YAA0B;AAAA,MAAZ3B,KAAY,SAAZA,KAAY;;AACjE,wBAAgCjC,KAAK,CAACkF,QAAN,CAAe,IAAf,CAAhC;AAAA,MAAOuE,QAAP;AAAA,MAAiBC,WAAjB;;AACA,yBAAwC1J,KAAK,CAACkF,QAAN,CAAe,IAAf,CAAxC;AAAA,MAAOoU,YAAP;AAAA,MAAqBC,eAArB;;AACA,MAAMtT,MAAM,GAAGpB,SAAS,EAAxB;AAGA,MAAMkD,WAAW,GAAGxB,cAAc,EAAlC;AACA,MAAMrJ,OAAO,GAAGb,WAAS,EAAzB;;AAEA,MAAMgN,WAAW,GAAG,SAAdA,WAAc,CAACb,EAAD,EAAQ;AACxBkB,IAAAA,WAAW,CAAClB,EAAE,CAACC,aAAJ,CAAX;AACA8Q,IAAAA,eAAe,CAAC/Q,EAAE,CAACC,aAAJ,CAAf;AACH,GAHD;;AAKA,MAAMa,WAAW,GAAG,SAAdA,WAAc,GAAM;AACtBI,IAAAA,WAAW,CAAC,IAAD,CAAX;AACA6P,IAAAA,eAAe,CAAC,IAAD,CAAf;AACH,GAHD;;AAKA,MAAMC,UAAU,GAAG,SAAbA,UAAa,CAAChR,EAAD,EAAKiR,KAAL,EAAe;AAC9BjR,IAAAA,EAAE,CAACI,cAAH;AACAJ,IAAAA,EAAE,CAACuB,eAAH;AACA,QAAM2P,cAAc,GAAGtP,sBAAc,CAACC,WAAf,CAA2BpI,KAAK,CAACc,MAAN,EAA3B,EAA2CuH,KAA3C,CAAiD;AACpEC,MAAAA,SAAS,EAAEtI,KAAK,CAACc,MAAN,EADyD;AAEpEyH,MAAAA,YAAY,EAAE,CAFsD;AAGpEC,MAAAA,QAAQ,EAAExI,KAAK,CAACc,MAAN,EAH0D;AAIpE2H,MAAAA,WAAW,EAAEzI,KAAK,CAACgB,SAAN;AAJuD,KAAjD,CAAvB;AAOA,QAAMS,eAAe,GAAGG,gBAAQ,CAAC8V,YAAT,CAAsB/V,YAAtB,EAAoC8V,cAApC,EAAoD;AACxE/K,MAAAA,SAAS,EAAE8K;AAD6D,KAApD,CAAxB;AAGAxT,IAAAA,MAAM,CAACtH,QAAP,CAAgBqF,mBAAW,CAACC,IAAZ,CAAiBgC,MAAM,CAACvG,cAAP,EAAjB,EAA0CgE,eAA1C,EAA2D,mBAA3D,CAAhB;AACAqE,IAAAA,WAAW;AACd,GAfD;;AAiBA,MAAM6R,WAAW,GAAG,SAAdA,WAAc,CAACpR,EAAD,EAAQ;AACxBA,IAAAA,EAAE,CAACI,cAAH;AACAJ,IAAAA,EAAE,CAACuB,eAAH;AACA,QAAM2P,cAAc,GAAGtP,sBAAc,CAACC,WAAf,CAA2BpI,KAAK,CAACc,MAAN,EAA3B,EAA2CuH,KAA3C,CAAiD;AACpEC,MAAAA,SAAS,EAAEtI,KAAK,CAACc,MAAN,EADyD;AAEpEyH,MAAAA,YAAY,EAAE,CAFsD;AAGpEC,MAAAA,QAAQ,EAAExI,KAAK,CAACc,MAAN,EAH0D;AAIpE2H,MAAAA,WAAW,EAAEzI,KAAK,CAACgB,SAAN;AAJuD,KAAjD,CAAvB;AAOA,QAAIS,eAAe,GAAGG,gBAAQ,CAACgW,WAAT,CAAqBjW,YAArB,EAAmC8V,cAAnC,EAAmD,SAAnD,CAAtB;AAEA,QAAMI,QAAQ,GAAGpW,eAAe,CAACqW,WAAhB,aAAqC9X,KAAK,CAACc,MAAN,EAArC,CAAjB;AAEA,QAAMiX,UAAU,GAAGtW,eAAe,CAACuW,aAAhB,EAAnB;AAEA,QAAMC,gBAAgB,GAAG9P,sBAAc,CAACC,WAAf,CAA2B2P,UAAU,CAACjX,MAAX,EAA3B,EAAgDuH,KAAhD,CAAsD;AAC3EC,MAAAA,SAAS,EAAEyP,UAAU,CAACjX,MAAX,EADgE;AAE3EyH,MAAAA,YAAY,EAAE,CAF6D;AAG3EC,MAAAA,QAAQ,EAAEuP,UAAU,CAACjX,MAAX,EAHiE;AAI3E2H,MAAAA,WAAW,EAAE;AAJ8D,KAAtD,CAAzB;AAOAhH,IAAAA,eAAe,GAAGA,eAAe,CAAC4G,KAAhB,CAAsB;AAAEwP,MAAAA,QAAQ,EAARA,QAAF;AAAYK,MAAAA,cAAc,EAAED;AAA5B,KAAtB,CAAlB;AAEAjU,IAAAA,MAAM,CAACtH,QAAP,CAAgBqF,mBAAW,CAACC,IAAZ,CAAiBgC,MAAM,CAACvG,cAAP,EAAjB,EAA0CgE,eAA1C,EAA2D,cAA3D,CAAhB;AACAqE,IAAAA,WAAW;AACd,GA3BD;;AA6BA,MAAI,CAACkL,GAAL,EAAU,OAAO,IAAP;AAEV,sBACI,oBAAC,KAAD,CAAO,QAAP,qBACI;AAAK,IAAA,GAAG,EAAEA,GAAV;AAAe,IAAA,GAAG,EAAEA,GAApB;AAAyB,IAAA,KAAK,EAAEzC,KAAhC;AAAuC,IAAA,MAAM,EAAED,MAA/C;AAAuD,IAAA,OAAO,EAAElH;AAAhE,IADJ,eAEI,oBAAC,OAAD;AACI,IAAA,IAAI,EAAEuB,OAAO,CAAC0O,YAAD,CADjB;AAEI,IAAA,OAAO,EAAEhQ,WAFb;AAGI,IAAA,QAAQ,EAAEgQ,YAHd;AAII,IAAA,YAAY,EAAE;AACVnc,MAAAA,QAAQ,EAAE,KADA;AAEVC,MAAAA,UAAU,EAAE;AAFF,KAJlB;AAQI,IAAA,eAAe,EAAE;AACbD,MAAAA,QAAQ,EAAE,QADG;AAEbC,MAAAA,UAAU,EAAE;AAFC;AARrB,kBAYI,oBAAC,UAAD;AAAY,IAAA,KAAK,EAAC,eAAlB;AAAkC,IAAA,OAAO,EAAC,OAA1C;AAAkD,IAAA,SAAS,EAAEF,OAAO,CAACkc;AAArE,KACK5I,KADL,eACyBD,MADzB,CAZJ,CAFJ,eAkBI,oBAAC,OAAD;AACI,IAAA,IAAI,EAAE3F,OAAO,CAACnB,QAAD,CADjB;AAEI,IAAA,OAAO,EAAEH,WAFb;AAGI,IAAA,QAAQ,EAAEG,QAHd;AAII,IAAA,YAAY,EAAE;AACVtM,MAAAA,QAAQ,EAAE,QADA;AAEVC,MAAAA,UAAU,EAAE;AAFF,KAJlB;AAQI,IAAA,eAAe,EAAE;AACbD,MAAAA,QAAQ,EAAE,KADG;AAEbC,MAAAA,UAAU,EAAE;AAFC;AARrB,kBAYI,oBAAC,WAAD;AACI,IAAA,IAAI,EAAC,OADT;AAEI,kBAAY6I,MAAM,CAACrH,SAAP,CAAiB,mCAAjB;AAFhB,kBAGI,oBAAC,MAAD;AACI,IAAA,OAAO,EAAE,iBAAC4J,EAAD;AAAA,aAAQgR,UAAU,CAAChR,EAAD,EAAK,MAAL,CAAlB;AAAA,KADb;AAEI,IAAA,KAAK,EAAEvC,MAAM,CAACrH,SAAP,CAAiB,kCAAjB;AAFX,kBAGI,oBAAC,aAAD,OAHJ,eAII,oBAAC,SAAD,OAJJ,CAHJ,eASI,oBAAC,MAAD;AACI,IAAA,OAAO,EAAE,iBAAC4J,EAAD;AAAA,aAAQgR,UAAU,CAAChR,EAAD,EAAK,QAAL,CAAlB;AAAA,KADb;AAEI,IAAA,KAAK,EAAEvC,MAAM,CAACrH,SAAP,CAAiB,oCAAjB;AAFX,kBAGI,oBAAC,aAAD,OAHJ,eAII,oBAAC,SAAD,OAJJ,eAKI,oBAAC,cAAD,OALJ,CATJ,eAgBI,oBAAC,MAAD;AACI,IAAA,OAAO,EAAE,iBAAC4J,EAAD;AAAA,aAAQgR,UAAU,CAAChR,EAAD,EAAK,OAAL,CAAlB;AAAA,KADb;AAEI,IAAA,KAAK,EAAEvC,MAAM,CAACrH,SAAP,CAAiB,mCAAjB;AAFX,kBAGI,oBAAC,SAAD,OAHJ,eAII,oBAAC,cAAD,OAJJ,CAhBJ,eAsBI,oBAAC,MAAD;AACI,IAAA,OAAO,EAAE,mBAAM;AACX0K,MAAAA,WAAW;AACXrD,MAAAA,MAAM,CAACmU,qBAAP,CAA6BnY,KAAK,CAACiX,WAAN,CAAkB,CAAlB,CAA7B;AACH,KAJL;AAKI,IAAA,KAAK,EAAEjT,MAAM,CAACrH,SAAP,CAAiB,+BAAjB;AALX,kBAMI,oBAAC,wBAAD,OANJ,CAtBJ,eA8BI,oBAAC,MAAD;AACI,IAAA,OAAO,EAAEgb,WADb;AAEI,IAAA,KAAK,EAAE3T,MAAM,CAACrH,SAAP,CAAiB,+BAAjB;AAFX,kBAGI,oBAAC,UAAD,OAHJ,CA9BJ,CAZJ,CAlBJ,CADJ;AAsEH,CAzID;;AA2IAya,WAAW,CAAChc,SAAZ,GAAwB;AACpB4V,EAAAA,GAAG,EAAE3V,SAAS,CAAC2H,MADK;AAEpBuL,EAAAA,KAAK,EAAElT,SAAS,CAAC+c,SAAV,CAAoB,CAAC/c,SAAS,CAAC2H,MAAX,EAAmB3H,SAAS,CAACwN,MAA7B,CAApB,EAA0DtN,UAF7C;AAGpB+S,EAAAA,MAAM,EAAEjT,SAAS,CAAC+c,SAAV,CAAoB,CAAC/c,SAAS,CAAC2H,MAAX,EAAmB3H,SAAS,CAACwN,MAA7B,CAApB,EAA0DtN,UAH9C;AAIpBoG,EAAAA,YAAY,EAAEtG,SAAS,CAACuN,MAAV,CAAiBrN,UAJX;AAKpByE,EAAAA,KAAK,EAAE3E,SAAS,CAACuN,MAAV,CAAiBrN;AALJ,CAAxB;;AAQA,IAAM8c,WAAW,GAAG,SAAdA,WAAc;AAAA,SAAO;AACvBC,IAAAA,eAAe,EAAE,yBAACtY,KAAD,EAAW;AACxB,UAAIA,KAAK,CAACmH,OAAN,OAAoBuE,WAAW,CAACF,MAApC,EAA4C;AACxC,eAAO;AACHvC,UAAAA,SAAS,EAAE8N,WADR;AAEHwB,UAAAA,QAAQ,EAAE;AAFP,SAAP;AAIH;AACJ;AARsB,GAAP;AAAA,CAApB;;ICrMaC,YAAY,GAAG,SAAfA,YAAe,CAAC/C,IAAD,EAAU;AAClC,SAAO,IAAIgD,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AAEpC,QAAMC,MAAM,GAAG,IAAIC,UAAJ,EAAf;;AACAD,IAAAA,MAAM,CAAC9E,MAAP,GAAgB;AAAA,aAAM4E,OAAO,CAACE,MAAM,CAACE,MAAR,CAAb;AAAA,KAAhB;;AACAF,IAAAA,MAAM,CAAC7E,OAAP,GAAiB;AAAA,aAAM4E,MAAM,CAACC,MAAM,CAACG,KAAR,CAAZ;AAAA,KAAjB;;AACAH,IAAAA,MAAM,CAACI,aAAP,CAAqBvD,IAArB;AACH,GANM,CAAP;AAOH,CARM;;AC4BA,IAAMwD,mBAAmB,GAAG;AAC/BC,EAAAA,OAAO,EAAE;AACL9Y,IAAAA,IAAI,EAAE,SADD;AAEL6I,IAAAA,SAAS,EAAE9O;AAFN,GADsB;AAK/BqI,EAAAA,IAAI,EAAE;AACFpC,IAAAA,IAAI,EAAE,MADJ;AAEF6I,IAAAA,SAAS,EAAE3G;AAFT,GALyB;AAS/BK,EAAAA,IAAI,EAAE;AACFvC,IAAAA,IAAI,EAAE,MADJ;AAEF6I,IAAAA,SAAS,EAAEvG;AAFT,GATyB;AAa/ByW,EAAAA,IAAI,EAAE;AACF/Y,IAAAA,IAAI,EAAE,MADJ;AAEF6I,IAAAA,SAAS,EAAEpF;AAFT,GAbyB;AAiB/BuV,EAAAA,MAAM,EAAE;AACJhZ,IAAAA,IAAI,EAAE,QADF;AAEJ6I,IAAAA,SAAS,EAAElF;AAFP,GAjBuB;AAqB/BsV,EAAAA,SAAS,EAAE;AACPjZ,IAAAA,IAAI,EAAE,WADC;AAEP6I,IAAAA,SAAS,EAAEhF;AAFJ,GArBoB;AAyB/BqV,EAAAA,aAAa,EAAE;AACXlZ,IAAAA,IAAI,EAAE,eADK;AAEX6I,IAAAA,SAAS,EAAE/E;AAFA,GAzBgB;AA6B/BkM,EAAAA,SAAS,EAAE;AACPhQ,IAAAA,IAAI,EAAE,WADC;AAEP6I,IAAAA,SAAS,EAAEgH,gBAFJ;AAGPsJ,IAAAA,MAAM,EAAErJ;AAHD,GA7BoB;AAkC/BsJ,EAAAA,mBAAmB,EAAE;AACjBpZ,IAAAA,IAAI,EAAE,qBADW;AAEjB6I,IAAAA,SAAS,EAAEoH,0BAFM;AAGjBkJ,IAAAA,MAAM,EAAEjJ;AAHS,GAlCU;AAuC/BmJ,EAAAA,OAAO,EAAE;AACLrZ,IAAAA,IAAI,EAAE,SADD;AAEL6I,IAAAA,SAAS,EAAEpD,cAFN;AAGL0T,IAAAA,MAAM,EAAEzQ;AAHH,GAvCsB;AA4C/B4Q,EAAAA,UAAU,EAAE;AACRtZ,IAAAA,IAAI,EAAE,YADE;AAER6I,IAAAA,SAAS,EAAEC;AAFH,GA5CmB;AAgD/B0K,EAAAA,KAAK,EAAE;AACHxT,IAAAA,IAAI,EAAE,OADH;AAEH6I,IAAAA,SAAS,EAAEgN,YAFR;AAGHsD,IAAAA,MAAM,EAAElB;AAHL,GAhDwB;AAqD/BtZ,EAAAA,SAAS,EAAE;AACPqB,IAAAA,IAAI,EAAE,WADC;AAEP6I,IAAAA,SAAS,EAAEoB;AAFJ,GArDoB;AAyD/B4C,EAAAA,QAAQ,EAAE;AACN7M,IAAAA,IAAI,EAAE,UADA;AAEN6I,IAAAA,SAAS,EAAE6D,eAFL;AAGNyM,IAAAA,MAAM,EAAEpM;AAHF,GAzDqB;AA8D/BlB,EAAAA,UAAU,EAAE;AACR7L,IAAAA,IAAI,EAAE,YADE;AAER6I,IAAAA,SAAS,EAAE0C,iBAFH;AAGR4N,IAAAA,MAAM,EAAErN;AAHA,GA9DmB;AAmE/BQ,EAAAA,SAAS,EAAE;AACPtM,IAAAA,IAAI,EAAE,WADC;AAEP6I,IAAAA,SAAS,EAAEmD,gBAFJ;AAGPmN,IAAAA,MAAM,EAAE3M;AAHD,GAnEoB;AAwE/B+M,EAAAA,aAAa,EAAE;AACXvZ,IAAAA,IAAI,EAAE,eADK;AAEX6I,IAAAA,SAAS,EAAE2B;AAFA,GAxEgB;AA4E/BgP,EAAAA,WAAW,EAAE;AACTxZ,IAAAA,IAAI,EAAE,aADG;AAET6I,IAAAA,SAAS,EAAEwC;AAFF;AA5EkB,CAA5B;AAkFP,AAAO,IAAMoO,sBAAsB,GAAG,CAClCZ,mBAAmB,CAACzW,IADc,EAElCyW,mBAAmB,CAACtW,IAFc,EAGlCsW,mBAAmB,CAACC,OAHc,EAIlCD,mBAAmB,CAACE,IAJc,EAKlCF,mBAAmB,CAACG,MALc,EAMlCH,mBAAmB,CAACI,SANc,EAOlCJ,mBAAmB,CAACK,aAPc,EAQlCL,mBAAmB,CAAC7I,SARc,EASlC6I,mBAAmB,CAACO,mBATc,EAUlCP,mBAAmB,CAACC,OAVc,EAWlCD,mBAAmB,CAACQ,OAXc,EAYlCR,mBAAmB,CAACS,UAZc,EAalCT,mBAAmB,CAACrF,KAbc,EAclCqF,mBAAmB,CAACC,OAdc,EAelCD,mBAAmB,CAACla,SAfc,EAgBlCka,mBAAmB,CAAChM,QAhBc,EAiBlCgM,mBAAmB,CAAChN,UAjBc,EAkBlCgN,mBAAmB,CAACvM,SAlBc,EAmBlCuM,mBAAmB,CAACC,OAnBc,EAoBlCD,mBAAmB,CAACU,aApBc,EAqBlCV,mBAAmB,CAACW,WArBc,CAA/B;AAwBP,IAAM9K,MAAM,GAAG,CACX;AAAE/T,EAAAA,IAAI,EAAE,OAAR;AAAiB0L,EAAAA,KAAK,EAAE;AAAxB,CADW,EAEX;AAAE1L,EAAAA,IAAI,EAAE,aAAR;AAAuB0L,EAAAA,KAAK,EAAE;AAA9B,CAFW,EAGX;AAAE1L,EAAAA,IAAI,EAAE,aAAR;AAAuB0L,EAAAA,KAAK,EAAE;AAA9B,CAHW,EAIX;AAAE1L,EAAAA,IAAI,EAAE,aAAR;AAAuB0L,EAAAA,KAAK,EAAE;AAA9B,CAJW,EAKX;AAAE1L,EAAAA,IAAI,EAAE,aAAR;AAAuB0L,EAAAA,KAAK,EAAE;AAA9B,CALW,EAMX;AAAE1L,EAAAA,IAAI,EAAE,MAAR;AAAgB0L,EAAAA,KAAK,EAAE;AAAvB,CANW,EAOX;AAAE1L,EAAAA,IAAI,EAAE,cAAR;AAAwB0L,EAAAA,KAAK,EAAE;AAA/B,CAPW,EAQX;AAAE1L,EAAAA,IAAI,EAAE,cAAR;AAAwB0L,EAAAA,KAAK,EAAE;AAA/B,CARW,EASX;AAAE1L,EAAAA,IAAI,EAAE,cAAR;AAAwB0L,EAAAA,KAAK,EAAE;AAA/B,CATW,EAUX;AAAE1L,EAAAA,IAAI,EAAE,OAAR;AAAiB0L,EAAAA,KAAK,EAAE;AAAxB,CAVW,EAWX;AAAE1L,EAAAA,IAAI,EAAE,WAAR;AAAqB0L,EAAAA,KAAK,EAAE;AAA5B,CAXW,EAYX;AAAE1L,EAAAA,IAAI,EAAE,KAAR;AAAe0L,EAAAA,KAAK,EAAE;AAAtB,CAZW,EAaX;AAAE1L,EAAAA,IAAI,EAAE,QAAR;AAAkB0L,EAAAA,KAAK,EAAE;AAAzB,CAbW,EAcX;AAAE1L,EAAAA,IAAI,EAAE,QAAR;AAAkB0L,EAAAA,KAAK,EAAE;AAAzB,CAdW,EAeX;AAAE1L,EAAAA,IAAI,EAAE,OAAR;AAAiB0L,EAAAA,KAAK,EAAE;AAAxB,CAfW,EAgBX;AAAE1L,EAAAA,IAAI,EAAE,MAAR;AAAgB0L,EAAAA,KAAK,EAAE;AAAvB,CAhBW,EAiBX;AAAE1L,EAAAA,IAAI,EAAE,iBAAR;AAA2B0L,EAAAA,KAAK,EAAE;AAAlC,CAjBW,EAkBX;AAAE1L,EAAAA,IAAI,EAAE,MAAR;AAAgB0L,EAAAA,KAAK,EAAE;AAAvB,CAlBW,EAmBX;AAAE1L,EAAAA,IAAI,EAAE,QAAR;AAAkB0L,EAAAA,KAAK,EAAE;AAAzB,CAnBW,EAoBX;AAAE1L,EAAAA,IAAI,EAAE,SAAR;AAAmB0L,EAAAA,KAAK,EAAE;AAA1B,CApBW,EAqBX;AAAE1L,EAAAA,IAAI,EAAE,mBAAR;AAA6B0L,EAAAA,KAAK,EAAE;AAApC,CArBW,EAsBX;AAAE1L,EAAAA,IAAI,EAAE,aAAR;AAAuB0L,EAAAA,KAAK,EAAE;AAA9B,CAtBW,EAuBX;AAAE1L,EAAAA,IAAI,EAAE,gBAAR;AAA0B0L,EAAAA,KAAK,EAAE;AAAjC,CAvBW,EAwBX;AAAE1L,EAAAA,IAAI,EAAE,gBAAR;AAA0B0L,EAAAA,KAAK,EAAE;AAAjC,CAxBW,EAyBX;AAAE1L,EAAAA,IAAI,EAAE,eAAR;AAAyB0L,EAAAA,KAAK,EAAE;AAAhC,CAzBW,EA0BX;AAAE1L,EAAAA,IAAI,EAAE,cAAR;AAAwB0L,EAAAA,KAAK,EAAE;AAA/B,CA1BW,EA2BX;AAAE1L,EAAAA,IAAI,EAAE,yBAAR;AAAmC0L,EAAAA,KAAK,EAAE;AAA1C,CA3BW,EA4BX;AAAE1L,EAAAA,IAAI,EAAE,cAAR;AAAwB0L,EAAAA,KAAK,EAAE;AAA/B,CA5BW,EA6BX;AAAE1L,EAAAA,IAAI,EAAE,gBAAR;AAA0B0L,EAAAA,KAAK,EAAE;AAAjC,CA7BW,EA8BX;AAAE1L,EAAAA,IAAI,EAAE,iBAAR;AAA2B0L,EAAAA,KAAK,EAAE;AAAlC,CA9BW,EA+BX;AAAE1L,EAAAA,IAAI,EAAE,mBAAR;AAA6B0L,EAAAA,KAAK,EAAE;AAApC,CA/BW,EAgCX;AAAE1L,EAAAA,IAAI,EAAE,aAAR;AAAuB0L,EAAAA,KAAK,EAAE;AAA9B,CAhCW,EAiCX;AAAE1L,EAAAA,IAAI,EAAE,gBAAR;AAA0B0L,EAAAA,KAAK,EAAE;AAAjC,CAjCW,EAkCX;AAAE1L,EAAAA,IAAI,EAAE,gBAAR;AAA0B0L,EAAAA,KAAK,EAAE;AAAjC,CAlCW,EAmCX;AAAE1L,EAAAA,IAAI,EAAE,eAAR;AAAyB0L,EAAAA,KAAK,EAAE;AAAhC,CAnCW,EAoCX;AAAE1L,EAAAA,IAAI,EAAE,cAAR;AAAwB0L,EAAAA,KAAK,EAAE;AAA/B,CApCW,EAqCX;AAAE1L,EAAAA,IAAI,EAAE,yBAAR;AAAmC0L,EAAAA,KAAK,EAAE;AAA1C,CArCW,EAsCX;AAAE1L,EAAAA,IAAI,EAAE,cAAR;AAAwB0L,EAAAA,KAAK,EAAE;AAA/B,CAtCW,EAuCX;AAAE1L,EAAAA,IAAI,EAAE,gBAAR;AAA0B0L,EAAAA,KAAK,EAAE;AAAjC,CAvCW,EAwCX;AAAE1L,EAAAA,IAAI,EAAE,iBAAR;AAA2B0L,EAAAA,KAAK,EAAE;AAAlC,CAxCW,EAyCX;AAAE1L,EAAAA,IAAI,EAAE,mBAAR;AAA6B0L,EAAAA,KAAK,EAAE;AAApC,CAzCW,EA0CX;AAAE1L,EAAAA,IAAI,EAAE,aAAR;AAAuB0L,EAAAA,KAAK,EAAE;AAA9B,CA1CW,EA2CX;AAAE1L,EAAAA,IAAI,EAAE,gBAAR;AAA0B0L,EAAAA,KAAK,EAAE;AAAjC,CA3CW,EA4CX;AAAE1L,EAAAA,IAAI,EAAE,gBAAR;AAA0B0L,EAAAA,KAAK,EAAE;AAAjC,CA5CW,EA6CX;AAAE1L,EAAAA,IAAI,EAAE,eAAR;AAAyB0L,EAAAA,KAAK,EAAE;AAAhC,CA7CW,EA8CX;AAAE1L,EAAAA,IAAI,EAAE,cAAR;AAAwB0L,EAAAA,KAAK,EAAE;AAA/B,CA9CW,EA+CX;AAAE1L,EAAAA,IAAI,EAAE,yBAAR;AAAmC0L,EAAAA,KAAK,EAAE;AAA1C,CA/CW,EAgDX;AAAE1L,EAAAA,IAAI,EAAE,cAAR;AAAwB0L,EAAAA,KAAK,EAAE;AAA/B,CAhDW,EAiDX;AAAE1L,EAAAA,IAAI,EAAE,gBAAR;AAA0B0L,EAAAA,KAAK,EAAE;AAAjC,CAjDW,EAkDX;AAAE1L,EAAAA,IAAI,EAAE,iBAAR;AAA2B0L,EAAAA,KAAK,EAAE;AAAlC,CAlDW,EAmDX;AAAE1L,EAAAA,IAAI,EAAE,kBAAR;AAA4B0L,EAAAA,KAAK,EAAE;AAAnC,CAnDW,EAoDX;AAAE1L,EAAAA,IAAI,EAAE,YAAR;AAAsB0L,EAAAA,KAAK,EAAE;AAA7B,CApDW,EAqDX;AAAE1L,EAAAA,IAAI,EAAE,eAAR;AAAyB0L,EAAAA,KAAK,EAAE;AAAhC,CArDW,EAsDX;AAAE1L,EAAAA,IAAI,EAAE,eAAR;AAAyB0L,EAAAA,KAAK,EAAE;AAAhC,CAtDW,EAuDX;AAAE1L,EAAAA,IAAI,EAAE,cAAR;AAAwB0L,EAAAA,KAAK,EAAE;AAA/B,CAvDW,EAwDX;AAAE1L,EAAAA,IAAI,EAAE,aAAR;AAAuB0L,EAAAA,KAAK,EAAE;AAA9B,CAxDW,EAyDX;AAAE1L,EAAAA,IAAI,EAAE,wBAAR;AAAkC0L,EAAAA,KAAK,EAAE;AAAzC,CAzDW,EA0DX;AAAE1L,EAAAA,IAAI,EAAE,aAAR;AAAuB0L,EAAAA,KAAK,EAAE;AAA9B,CA1DW,EA2DX;AAAE1L,EAAAA,IAAI,EAAE,eAAR;AAAyB0L,EAAAA,KAAK,EAAE;AAAhC,CA3DW,EA4DX;AAAE1L,EAAAA,IAAI,EAAE,gBAAR;AAA0B0L,EAAAA,KAAK,EAAE;AAAjC,CA5DW,EA6DX;AAAE1L,EAAAA,IAAI,EAAE,kBAAR;AAA4B0L,EAAAA,KAAK,EAAE;AAAnC,CA7DW,EA8DX;AAAE1L,EAAAA,IAAI,EAAE,YAAR;AAAsB0L,EAAAA,KAAK,EAAE;AAA7B,CA9DW,EA+DX;AAAE1L,EAAAA,IAAI,EAAE,eAAR;AAAyB0L,EAAAA,KAAK,EAAE;AAAhC,CA/DW,EAgEX;AAAE1L,EAAAA,IAAI,EAAE,eAAR;AAAyB0L,EAAAA,KAAK,EAAE;AAAhC,CAhEW,EAiEX;AAAE1L,EAAAA,IAAI,EAAE,cAAR;AAAwB0L,EAAAA,KAAK,EAAE;AAA/B,CAjEW,EAkEX;AAAE1L,EAAAA,IAAI,EAAE,aAAR;AAAuB0L,EAAAA,KAAK,EAAE;AAA9B,CAlEW,EAmEX;AAAE1L,EAAAA,IAAI,EAAE,wBAAR;AAAkC0L,EAAAA,KAAK,EAAE;AAAzC,CAnEW,EAoEX;AAAE1L,EAAAA,IAAI,EAAE,aAAR;AAAuB0L,EAAAA,KAAK,EAAE;AAA9B,CApEW,EAqEX;AAAE1L,EAAAA,IAAI,EAAE,eAAR;AAAyB0L,EAAAA,KAAK,EAAE;AAAhC,CArEW,EAsEX;AAAE1L,EAAAA,IAAI,EAAE,gBAAR;AAA0B0L,EAAAA,KAAK,EAAE;AAAjC,CAtEW,EAuEX;AAAE1L,EAAAA,IAAI,EAAE,kBAAR;AAA4B0L,EAAAA,KAAK,EAAE;AAAnC,CAvEW,EAwEX;AAAE1L,EAAAA,IAAI,EAAE,YAAR;AAAsB0L,EAAAA,KAAK,EAAE;AAA7B,CAxEW,EAyEX;AAAE1L,EAAAA,IAAI,EAAE,eAAR;AAAyB0L,EAAAA,KAAK,EAAE;AAAhC,CAzEW,EA0EX;AAAE1L,EAAAA,IAAI,EAAE,eAAR;AAAyB0L,EAAAA,KAAK,EAAE;AAAhC,CA1EW,EA2EX;AAAE1L,EAAAA,IAAI,EAAE,cAAR;AAAwB0L,EAAAA,KAAK,EAAE;AAA/B,CA3EW,EA4EX;AAAE1L,EAAAA,IAAI,EAAE,aAAR;AAAuB0L,EAAAA,KAAK,EAAE;AAA9B,CA5EW,EA6EX;AAAE1L,EAAAA,IAAI,EAAE,wBAAR;AAAkC0L,EAAAA,KAAK,EAAE;AAAzC,CA7EW,EA8EX;AAAE1L,EAAAA,IAAI,EAAE,aAAR;AAAuB0L,EAAAA,KAAK,EAAE;AAA9B,CA9EW,EA+EX;AAAE1L,EAAAA,IAAI,EAAE,eAAR;AAAyB0L,EAAAA,KAAK,EAAE;AAAhC,CA/EW,EAgFX;AAAE1L,EAAAA,IAAI,EAAE,gBAAR;AAA0B0L,EAAAA,KAAK,EAAE;AAAjC,CAhFW,CAAf;AAmFA,AAAO,IAAMqT,mCAAmC,GAAG;AAC/C/a,EAAAA,SAAS,EAAE;AACPgL,IAAAA,OAAO,EAAE,CACL;AACItD,MAAAA,KAAK,EAAE,SADX;AAEI1L,MAAAA,IAAI,EAAEoO,WAAW,GAAG;AAFxB,KADK,EAKL;AACI1C,MAAAA,KAAK,EAAE,YADX;AAEI1L,MAAAA,IAAI,EAAEoO,WAAW,GAAG;AAFxB,KALK,EASL;AACI1C,MAAAA,KAAK,EAAE,YADX;AAEI1L,MAAAA,IAAI,EAAEoO,WAAW,GAAG;AAFxB,KATK,EAaL;AACI1C,MAAAA,KAAK,EAAE,cADX;AAEI1L,MAAAA,IAAI,EAAEoO,WAAW,GAAG;AAFxB,KAbK,EAiBL;AACI1C,MAAAA,KAAK,EAAE,aADX;AAEI1L,MAAAA,IAAI,EAAEoO,WAAW,GAAG;AAFxB,KAjBK,EAqBL;AACI1C,MAAAA,KAAK,EAAE,aADX;AAEI1L,MAAAA,IAAI,EAAEoO,WAAW,GAAG;AAFxB,KArBK,EAyBL;AACI1C,MAAAA,KAAK,EAAE,YADX;AAEI1L,MAAAA,IAAI,EAAEoO,WAAW,GAAG;AAFxB,KAzBK;AADF,GADoC;AAiC/CyK,EAAAA,KAAK,EAAE;AACHc,IAAAA,cAAc,EAAE8D;AADb,GAjCwC;AAoC/CpI,EAAAA,SAAS,EAAE;AACPrB,IAAAA,YAAY,EAAE,EADP;AAEPhF,IAAAA,OAAO,EAAE+E;AAFF,GApCoC;AAwC/C0K,EAAAA,mBAAmB,EAAE;AACjBzK,IAAAA,YAAY,EAAE,EADG;AAEjBhF,IAAAA,OAAO,EAAE+E;AAFQ,GAxC0B;AA4C/C7B,EAAAA,QAAQ,EAAE;AACNlD,IAAAA,OAAO,EAAE,CACL,SADK,EAEL,KAFK,EAGL,KAHK,EAIL,MAJK,EAKL,MALK,EAML,MANK,EAOL,MAPK,EAQL,MARK,EASL,MATK,EAUL,MAVK,EAWL,MAXK,EAYL,MAZK,EAaL,MAbK,EAcL,MAdK,EAeL,MAfK;AADH,GA5CqC;AA+D/CkC,EAAAA,UAAU,EAAE;AACRlC,IAAAA,OAAO,EAAE,CACL,SADK,EAEL,OAFK,EAGL,SAHK,EAIL,iBAJK,EAKL,SALK,EAML,aANK,EAOL,gBAPK;AADD;AA/DmC,CAA5C;;ACnNA,IAAMgQ,aAAa,GAAG;AACzBC,EAAAA,IAAI,EAAE,IADmB;AAEzBC,EAAAA,YAAY,EAAE,EAFW;AAGzBC,EAAAA,WAAW,EAAE,EAHY;AAIzBlW,EAAAA,MAAM,EAAE;AACJmW,IAAAA,cAAc,EAAEC,KADZ;AAEJC,IAAAA,SAAS,EAAE,EAFP;AAGJnN,IAAAA,KAAK,EAAE;AAHH,GAJiB;AASzBoN,EAAAA,OAAO,EAAE;AACLD,IAAAA,SAAS,EAAE,EADN;AAELnN,IAAAA,KAAK,EAAE,EAFF;AAGLqN,IAAAA,OAAO,EAAE,IAHJ;AAILC,IAAAA,QAAQ,EAAE,KAJL;AAKLC,IAAAA,QAAQ,EAAEZ,sBALL;AAMLa,IAAAA,cAAc,EAAEZ;AANX;AATgB,CAAtB;;ACDA,SAASa,QAAT,CAAkBC,IAAlB,EAAwB;AAC3B,SAAOA,IAAI,IAAI,OAAOA,IAAP,KAAgB,QAAxB,IAAoC,CAACC,KAAK,CAACC,OAAN,CAAcF,IAAd,CAA5C;AACH;AAOD,AAAO,SAASG,SAAT,CAAmB9Q,MAAnB,EAAuC;AAAA,oCAAT+Q,OAAS;AAATA,IAAAA,OAAS;AAAA;;AAC1C,MAAI,CAACA,OAAO,CAACvR,MAAb,EAAqB,OAAOQ,MAAP;AACrB,MAAMgR,MAAM,GAAGD,OAAO,CAACE,KAAR,EAAf;;AAEA,MAAIP,QAAQ,CAAC1Q,MAAD,CAAR,IAAoB0Q,QAAQ,CAACM,MAAD,CAAhC,EAA0C;AACtC,SAAK,IAAM1e,GAAX,IAAkB0e,MAAlB,EAA0B;AAEtB,UAAIN,QAAQ,CAACM,MAAM,CAAC1e,GAAD,CAAP,CAAZ,EAA2B;AAEvB,YAAI,CAAC0N,MAAM,CAAC1N,GAAD,CAAX,EAAkB;AAAA;;AAEd2D,UAAAA,MAAM,CAACib,MAAP,CAAclR,MAAd,uCAAyB1N,GAAzB,IAA+B,EAA/B;AACH;;AAEDwe,QAAAA,SAAS,CAAC9Q,MAAM,CAAC1N,GAAD,CAAP,EAAc0e,MAAM,CAAC1e,GAAD,CAApB,CAAT;AACH,OARD,MAQO;AAAA;;AAEH2D,QAAAA,MAAM,CAACib,MAAP,CAAclR,MAAd,yCAAyB1N,GAAzB,IAA+B0e,MAAM,CAAC1e,GAAD,CAArC;AACH;AACJ;AACJ;;AAED,SAAOwe,SAAS,MAAT,UAAU9Q,MAAV,SAAqB+Q,OAArB,EAAP;AACH;;ACrCD,SAAe;AACXP,EAAAA,QAAQ,EAAE;AACNjY,IAAAA,IAAI,EAAE;AACF4Y,MAAAA,KAAK,EAAE;AADL,KADA;AAINzY,IAAAA,IAAI,EAAE;AACFyY,MAAAA,KAAK,EAAE;AADL,KAJA;AAONjC,IAAAA,IAAI,EAAE;AACFiC,MAAAA,KAAK,EAAE;AADL,KAPA;AAUNhC,IAAAA,MAAM,EAAE;AACJgC,MAAAA,KAAK,EAAE;AADH,KAVF;AAaN/B,IAAAA,SAAS,EAAE;AACP+B,MAAAA,KAAK,EAAE;AADA,KAbL;AAgBN9B,IAAAA,aAAa,EAAE;AACX8B,MAAAA,KAAK,EAAE;AADI,KAhBT;AAmBNC,IAAAA,IAAI,EAAE;AACFD,MAAAA,KAAK,EAAE;AADL,KAnBA;AAsBNhL,IAAAA,SAAS,EAAE;AACPgL,MAAAA,KAAK,EAAE,eADA;AAEPE,MAAAA,MAAM,EAAE;AACJC,QAAAA,OAAO,EAAE;AADL;AAFD,KAtBL;AA4BN/B,IAAAA,mBAAmB,EAAE;AACjB4B,MAAAA,KAAK,EAAE,4BADU;AAEjBE,MAAAA,MAAM,EAAE;AACJC,QAAAA,OAAO,EAAE;AADL;AAFS,KA5Bf;AAkCN9B,IAAAA,OAAO,EAAE;AACL2B,MAAAA,KAAK,EAAE,eADF;AAELE,MAAAA,MAAM,EAAE;AACJrV,QAAAA,IAAI,EAAE;AADF,OAFH;AAKLuV,MAAAA,OAAO,EAAE;AACLC,QAAAA,GAAG,EAAE,QADA;AAELC,QAAAA,MAAM,EAAE;AAFH;AALJ,KAlCH;AA4CNhC,IAAAA,UAAU,EAAE;AACR0B,MAAAA,KAAK,EAAE;AADC,KA5CN;AA+CNxH,IAAAA,KAAK,EAAE;AACHwH,MAAAA,KAAK,EAAE,eADJ;AAEHI,MAAAA,OAAO,EAAE;AACLG,QAAAA,MAAM,EAAE,cADH;AAEL9U,QAAAA,GAAG,EAAE,YAFA;AAGL4U,QAAAA,GAAG,EAAE,QAHA;AAILC,QAAAA,MAAM,EAAE,YAJH;AAKLE,QAAAA,SAAS,EAAE,sBALN;AAMLC,QAAAA,WAAW,EAAE,SANR;AAOLC,QAAAA,UAAU,EAAE,oBAPP;AAQLC,QAAAA,MAAM,EAAE,iBARH;AASLC,QAAAA,MAAM,EAAE;AATH,OAFN;AAaHV,MAAAA,MAAM,EAAE;AACJW,QAAAA,aAAa,EAAE,uDADX;AAEJ1N,QAAAA,KAAK,EAAE,OAFH;AAGJD,QAAAA,MAAM,EAAE,KAHJ;AAIJzH,QAAAA,GAAG,EAAE,KAJD;AAKJqV,QAAAA,aAAa,EAAE,0BALX;AAMJC,QAAAA,WAAW,EAAE;AANT,OAbL;AAqBHC,MAAAA,aAAa,EAAE;AACXC,QAAAA,aAAa,EAAE;AADJ;AArBZ,KA/CD;AAwENtd,IAAAA,SAAS,EAAE;AACPqc,MAAAA,KAAK,EAAE,gBADA;AAEPE,MAAAA,MAAM,EAAE;AACJgB,QAAAA,MAAM,EAAE,QADJ;AAEJC,QAAAA,OAAO,EAAE,SAFL;AAGJC,QAAAA,OAAO,EAAE,SAHL;AAIJC,QAAAA,OAAO,EAAE,SAJL;AAKJC,QAAAA,OAAO,EAAE,SALL;AAMJC,QAAAA,OAAO,EAAE,SANL;AAOJC,QAAAA,OAAO,EAAE;AAPL;AAFD,KAxEL;AAoFN3P,IAAAA,QAAQ,EAAE;AACNmO,MAAAA,KAAK,EAAE,mBADD;AAENE,MAAAA,MAAM,EAAE;AACJ,mBAAS;AADL;AAFF,KApFJ;AA0FNrP,IAAAA,UAAU,EAAE;AACRmP,MAAAA,KAAK,EAAE,MADC;AAERE,MAAAA,MAAM,EAAE;AACJ,mBAAS;AADL;AAFA,KA1FN;AAgGN5O,IAAAA,SAAS,EAAE;AACP0O,MAAAA,KAAK,EAAE,cADA;AAEPI,MAAAA,OAAO,EAAE;AACLI,QAAAA,SAAS,EAAE,UADN;AAELC,QAAAA,WAAW,EAAE,QAFR;AAGLC,QAAAA,UAAU,EAAE,OAHP;AAILe,QAAAA,OAAO,EAAE;AAJJ;AAFF,KAhGL;AAyGNlD,IAAAA,aAAa,EAAE;AACXyB,MAAAA,KAAK,EAAE;AADI,KAzGT;AA4GNxB,IAAAA,WAAW,EAAE;AACTwB,MAAAA,KAAK,EAAE;AADE;AA5GP;AADC,CAAf;;ACAA,SAAe;AACXX,EAAAA,QAAQ,EAAE;AACNjY,IAAAA,IAAI,EAAE;AACF4Y,MAAAA,KAAK,EAAE;AADL,KADA;AAINzY,IAAAA,IAAI,EAAE;AACFyY,MAAAA,KAAK,EAAE;AADL,KAJA;AAONjC,IAAAA,IAAI,EAAE;AACFiC,MAAAA,KAAK,EAAE;AADL,KAPA;AAUNhC,IAAAA,MAAM,EAAE;AACJgC,MAAAA,KAAK,EAAE;AADH,KAVF;AAaN/B,IAAAA,SAAS,EAAE;AACP+B,MAAAA,KAAK,EAAE;AADA,KAbL;AAgBN9B,IAAAA,aAAa,EAAE;AACX8B,MAAAA,KAAK,EAAE;AADI,KAhBT;AAmBNC,IAAAA,IAAI,EAAE;AACFD,MAAAA,KAAK,EAAE;AADL,KAnBA;AAsBNhL,IAAAA,SAAS,EAAE;AACPgL,MAAAA,KAAK,EAAE,YADA;AAEPE,MAAAA,MAAM,EAAE;AACJC,QAAAA,OAAO,EAAE;AADL;AAFD,KAtBL;AA4BN/B,IAAAA,mBAAmB,EAAE;AACjB4B,MAAAA,KAAK,EAAE,iBADU;AAEjBE,MAAAA,MAAM,EAAE;AACJC,QAAAA,OAAO,EAAE;AADL;AAFS,KA5Bf;AAkCN9B,IAAAA,OAAO,EAAE;AACL2B,MAAAA,KAAK,EAAE,UADF;AAELE,MAAAA,MAAM,EAAE;AACJrV,QAAAA,IAAI,EAAE;AADF,OAFH;AAKLuV,MAAAA,OAAO,EAAE;AACLC,QAAAA,GAAG,EAAE,KADA;AAELC,QAAAA,MAAM,EAAE;AAFH;AALJ,KAlCH;AA4CNhC,IAAAA,UAAU,EAAE;AACR0B,MAAAA,KAAK,EAAE;AADC,KA5CN;AA+CNxH,IAAAA,KAAK,EAAE;AACHwH,MAAAA,KAAK,EAAE,cADJ;AAEHI,MAAAA,OAAO,EAAE;AACLG,QAAAA,MAAM,EAAE,cADH;AAEL9U,QAAAA,GAAG,EAAE,QAFA;AAGL4U,QAAAA,GAAG,EAAE,KAHA;AAILC,QAAAA,MAAM,EAAE,QAJH;AAKLE,QAAAA,SAAS,EAAE,YALN;AAMLC,QAAAA,WAAW,EAAE,cANR;AAOLC,QAAAA,UAAU,EAAE,aAPP;AAQLC,QAAAA,MAAM,EAAE,cARH;AASLC,QAAAA,MAAM,EAAE;AATH,OAFN;AAaHV,MAAAA,MAAM,EAAE;AACJW,QAAAA,aAAa,EAAE,oCADX;AAEJ1N,QAAAA,KAAK,EAAE,OAFH;AAGJD,QAAAA,MAAM,EAAE,QAHJ;AAIJzH,QAAAA,GAAG,EAAE,KAJD;AAKJqV,QAAAA,aAAa,EAAE,sBALX;AAMJC,QAAAA,WAAW,EAAE;AANT,OAbL;AAqBHC,MAAAA,aAAa,EAAE;AACXC,QAAAA,aAAa,EAAE;AADJ;AArBZ,KA/CD;AAwENtd,IAAAA,SAAS,EAAE;AACPqc,MAAAA,KAAK,EAAE,cADA;AAEPE,MAAAA,MAAM,EAAE;AACJgB,QAAAA,MAAM,EAAE,QADJ;AAEJC,QAAAA,OAAO,EAAE,UAFL;AAGJC,QAAAA,OAAO,EAAE,UAHL;AAIJC,QAAAA,OAAO,EAAE,UAJL;AAKJC,QAAAA,OAAO,EAAE,UALL;AAMJC,QAAAA,OAAO,EAAE,UANL;AAOJC,QAAAA,OAAO,EAAE;AAPL;AAFD,KAxEL;AAoFN3P,IAAAA,QAAQ,EAAE;AACNmO,MAAAA,KAAK,EAAE,WADD;AAENE,MAAAA,MAAM,EAAE;AACJ,mBAAS;AADL;AAFF,KApFJ;AA0FNrP,IAAAA,UAAU,EAAE;AACRmP,MAAAA,KAAK,EAAE,WADC;AAERE,MAAAA,MAAM,EAAE;AACJ,mBAAS;AADL;AAFA,KA1FN;AAgGN5O,IAAAA,SAAS,EAAE;AACP0O,MAAAA,KAAK,EAAE,YADA;AAEPI,MAAAA,OAAO,EAAE;AACLI,QAAAA,SAAS,EAAE,MADN;AAELC,QAAAA,WAAW,EAAE,QAFR;AAGLC,QAAAA,UAAU,EAAE,OAHP;AAILe,QAAAA,OAAO,EAAE;AAJJ;AAFF,KAhGL;AAyGNlD,IAAAA,aAAa,EAAE;AACXyB,MAAAA,KAAK,EAAE;AADI,KAzGT;AA4GNxB,IAAAA,WAAW,EAAE;AACTwB,MAAAA,KAAK,EAAE;AADE;AA5GP;AADC,CAAf;;ACAA,SAAe;AACXX,EAAAA,QAAQ,EAAE;AACNjY,IAAAA,IAAI,EAAE;AACF4Y,MAAAA,KAAK,EAAE;AADL,KADA;AAINzY,IAAAA,IAAI,EAAE;AACFyY,MAAAA,KAAK,EAAE;AADL,KAJA;AAONjC,IAAAA,IAAI,EAAE;AACFiC,MAAAA,KAAK,EAAE;AADL,KAPA;AAUNhC,IAAAA,MAAM,EAAE;AACJgC,MAAAA,KAAK,EAAE;AADH,KAVF;AAaN/B,IAAAA,SAAS,EAAE;AACP+B,MAAAA,KAAK,EAAE;AADA,KAbL;AAgBN9B,IAAAA,aAAa,EAAE;AACX8B,MAAAA,KAAK,EAAE;AADI,KAhBT;AAmBNC,IAAAA,IAAI,EAAE;AACFD,MAAAA,KAAK,EAAE;AADL,KAnBA;AAsBNhL,IAAAA,SAAS,EAAE;AACPgL,MAAAA,KAAK,EAAE,iBADA;AAEPE,MAAAA,MAAM,EAAE;AACJC,QAAAA,OAAO,EAAE;AADL;AAFD,KAtBL;AA4BN/B,IAAAA,mBAAmB,EAAE;AACjB4B,MAAAA,KAAK,EAAE,6BADU;AAEjBE,MAAAA,MAAM,EAAE;AACJC,QAAAA,OAAO,EAAE;AADL;AAFS,KA5Bf;AAkCN9B,IAAAA,OAAO,EAAE;AACL2B,MAAAA,KAAK,EAAE,eADF;AAELE,MAAAA,MAAM,EAAE;AACJrV,QAAAA,IAAI,EAAE;AADF,OAFH;AAKLuV,MAAAA,OAAO,EAAE;AACLC,QAAAA,GAAG,EAAE,QADA;AAELC,QAAAA,MAAM,EAAE;AAFH;AALJ,KAlCH;AA4CNhC,IAAAA,UAAU,EAAE;AACR0B,MAAAA,KAAK,EAAE;AADC,KA5CN;AA+CNxH,IAAAA,KAAK,EAAE;AACHwH,MAAAA,KAAK,EAAE,iBADJ;AAEHI,MAAAA,OAAO,EAAE;AACLG,QAAAA,MAAM,EAAE,cADH;AAEL9U,QAAAA,GAAG,EAAE,WAFA;AAGL4U,QAAAA,GAAG,EAAE,QAHA;AAILC,QAAAA,MAAM,EAAE,UAJH;AAKLE,QAAAA,SAAS,EAAE,wBALN;AAMLC,QAAAA,WAAW,EAAE,SANR;AAOLC,QAAAA,UAAU,EAAE,sBAPP;AAQLC,QAAAA,MAAM,EAAE,iBARH;AASLC,QAAAA,MAAM,EAAE;AATH,OAFN;AAaHV,MAAAA,MAAM,EAAE;AACJW,QAAAA,aAAa,EAAE,qDADX;AAEJ1N,QAAAA,KAAK,EAAE,OAFH;AAGJD,QAAAA,MAAM,EAAE,MAHJ;AAIJzH,QAAAA,GAAG,EAAE,KAJD;AAKJqV,QAAAA,aAAa,EAAE,6BALX;AAMJC,QAAAA,WAAW,EAAE;AANT,OAbL;AAqBHC,MAAAA,aAAa,EAAE;AACXC,QAAAA,aAAa,EAAE;AADJ;AArBZ,KA/CD;AAwENtd,IAAAA,SAAS,EAAE;AACPqc,MAAAA,KAAK,EAAE,mBADA;AAEPE,MAAAA,MAAM,EAAE;AACJgB,QAAAA,MAAM,EAAE,QADJ;AAEJC,QAAAA,OAAO,EAAE,cAFL;AAGJC,QAAAA,OAAO,EAAE,cAHL;AAIJC,QAAAA,OAAO,EAAE,cAJL;AAKJC,QAAAA,OAAO,EAAE,cALL;AAMJC,QAAAA,OAAO,EAAE,cANL;AAOJC,QAAAA,OAAO,EAAE;AAPL;AAFD,KAxEL;AAoFN3P,IAAAA,QAAQ,EAAE;AACNmO,MAAAA,KAAK,EAAE,kBADD;AAENE,MAAAA,MAAM,EAAE;AACJ,mBAAS;AADL;AAFF,KApFJ;AA0FNrP,IAAAA,UAAU,EAAE;AACRmP,MAAAA,KAAK,EAAE,QADC;AAERE,MAAAA,MAAM,EAAE;AACJ,mBAAS;AADL;AAFA,KA1FN;AAgGN5O,IAAAA,SAAS,EAAE;AACP0O,MAAAA,KAAK,EAAE,eADA;AAEPI,MAAAA,OAAO,EAAE;AACLI,QAAAA,SAAS,EAAE,WADN;AAELC,QAAAA,WAAW,EAAE,QAFR;AAGLC,QAAAA,UAAU,EAAE,SAHP;AAILe,QAAAA,OAAO,EAAE;AAJJ;AAFF,KAhGL;AAyGNlD,IAAAA,aAAa,EAAE;AACXyB,MAAAA,KAAK,EAAE;AADI,KAzGT;AA4GNxB,IAAAA,WAAW,EAAE;AACTwB,MAAAA,KAAK,EAAE;AADE;AA5GP;AADC,CAAf;;ACIA,gBAAe;AAAE0B,EAAAA,EAAE,EAAFA,EAAF;AAAMC,EAAAA,EAAE,EAAFA,EAAN;AAAUC,EAAAA,EAAE,EAAFA;AAAV,CAAf;;ACGA,IAAMlD,qCAAmC,GAAGC,aAAa,CAACO,OAAd,CAAsBI,cAAlE;;IAEMuC;AACF,2BAAYC,MAAZ,EAAoB;AAChB,SAAKA,MAAL,GAAcA,MAAM,IAAInD,aAAxB;AACH;;;;SAEDoD,wBAAA,iCAAwB;AACpB,QAAIpU,UAAU,GAAG,EAAjB;;AACA,yDAAsB,KAAKqU,kBAAL,EAAtB,wCAAiD;AAAA,UAAtCC,OAAsC;AAC7C,UAAMzR,UAAU,GAAG,KAAK0R,aAAL,CAAmBD,OAAnB,CAAnB;;AACA,UAAIzR,UAAU,IAAIA,UAAU,CAAC7C,UAA7B,EAAyC;AACrCA,QAAAA,UAAU,GAAGA,UAAU,CAACwU,MAAX,CAAkB3R,UAAU,CAAC7C,UAA7B,CAAb;AACH;AACJ;;AACD,WAAOA,UAAU,CAACU,MAAX,GAAoB,CAApB,GAAwB,IAAI+T,0BAAJ,CAAuBzU,UAAvB,CAAxB,GAA6D,IAApE;AACH;;SAED0U,oBAAA,6BAAoB;AAChB,QAAIzR,cAAc,GAAG,EAArB;;AACA,0DAAsB,KAAKoR,kBAAL,EAAtB,2CAAiD;AAAA,UAAtCC,OAAsC;AAC7C,UAAMzR,UAAU,GAAG,KAAK0R,aAAL,CAAmBD,OAAnB,CAAnB;;AACA,UAAIzR,UAAU,IAAIA,UAAU,CAACI,cAA7B,EAA6C;AACzCA,QAAAA,cAAc,gBACPA,cADO,EAEPJ,UAAU,CAACI,cAFJ,CAAd;AAIH;AACJ;;AACD,WAAOA,cAAP;AACH;;SAED0R,oBAAA,6BAAoB;AAChB,QAAIC,SAAS,GAAGC,kCAAhB;;AACA,0DAAsB,KAAKR,kBAAL,EAAtB,2CAAiD;AAAA,UAAtCC,OAAsC;AAC7C,UAAMzR,UAAU,GAAG,KAAK0R,aAAL,CAAmBD,OAAnB,CAAnB;;AACA,UAAIzR,UAAU,IAAIA,UAAU,CAACiS,cAA7B,EAA6C;AACzCF,QAAAA,SAAS,GAAGA,SAAS,CAACtV,KAAV,CAAgBuD,UAAU,CAACiS,cAA3B,CAAZ;AACH;AACJ;;AAED,WAAOF,SAAP;AACH;;SAEDG,kBAAA,2BAAkB;AAAA;;AACd,WAAO,UAAC/W,YAAD,EAAkB;AACrB,UAAIgX,UAAU,GAAG,EAAjB;;AACA,4DAAsB,KAAI,CAACX,kBAAL,EAAtB,2CAAiD;AAAA,YAAtCC,OAAsC;;AAC7C,YAAMzR,UAAU,GAAG,KAAI,CAAC0R,aAAL,CAAmBD,OAAnB,CAAnB;;AACA,YAAIzR,UAAU,IAAIA,UAAU,CAACiB,YAA7B,EAA2C;AACvC,cAAMiM,MAAM,GAAGlN,UAAU,CAACiB,YAAX,CAAwB9F,YAAxB,CAAf;AACA,cAAI+R,MAAJ,EAAYiF,UAAU,IAAI,MAAMjF,MAApB;AACf;AACJ;;AACD,aAAOiF,UAAU,CAACC,IAAX,EAAP;AACH,KAVD;AAWH;;SAEDC,qBAAA,8BAAqB;AAAA;;AACjB,WAAO,UAAClX,YAAD,EAAkB;AACrB,4DAAsB,MAAI,CAACqW,kBAAL,EAAtB,2CAAiD;AAAA,YAAtCC,OAAsC;;AAC7C,YAAMzR,UAAU,GAAG,MAAI,CAAC0R,aAAL,CAAmBD,OAAnB,CAAnB;;AACA,YAAI,CAACzR,UAAD,IAAe,CAACA,UAAU,CAAC0M,eAA/B,EAAgD;AAChD,YAAMQ,MAAM,GAAGlN,UAAU,CAAC0M,eAAX,CAA2BvR,YAA3B,CAAf;AACA,YAAI+R,MAAJ,EAAY,OAAOA,MAAP;AACf;AACJ,KAPD;AAQH;;SAEDsE,qBAAA,8BAAqB;AACjB,WAAO,KAAKc,aAAL,CAAmB,SAAnB,EAA8B,UAA9B,CAAP;AACH;;SAEDC,8BAAA,uCAA8B;AAAA;;AAC1B,QAAMC,UAAU,GAAG,EAAnB;AACA,WAAO,KAAKhB,kBAAL,GAA0BlT,GAA1B,CAA8B,UAACmT,OAAD,EAAa;AAC9C,UAAI,CAACe,UAAU,CAACf,OAAO,CAACjd,IAAT,CAAf,EAA+Bge,UAAU,CAACf,OAAO,CAACjd,IAAT,CAAV,GAA2B,CAA3B;AAC/Bge,MAAAA,UAAU,CAACf,OAAO,CAACjd,IAAT,CAAV;AAEA,aAAOrC,KAAK,CAACsgB,aAAN,CAAoBhB,OAAO,CAACpU,SAA5B,EAAuC;AAC1C1M,QAAAA,GAAG,OAAK8gB,OAAO,CAACjd,IAAb,GAAoBge,UAAU,CAACf,OAAO,CAACjd,IAAT,CADS;AAE1CkK,QAAAA,aAAa,EAAE,MAAI,CAACgU,8BAAL,CAAoCjB,OAAO,CAACjd,IAA5C,CAF2B;AAG1CmK,QAAAA,oBAAoB,EAAEuP,qCAAmC,CAACuD,OAAO,CAACjd,IAAT,CAHf;AAI1CwL,QAAAA,UAAU,EAAE,MAAI,CAAC0R,aAAL,CAAmBD,OAAnB;AAJ8B,OAAvC,CAAP;AAMH,KAVM,CAAP;AAWH;;SAEDiB,iCAAA,wCAA+BC,WAA/B,EAA4C;AACxC,QACI,KAAKrB,MAAL,IACA,KAAKA,MAAL,CAAY5C,OADZ,IAEA,KAAK4C,MAAL,CAAY5C,OAAZ,CAAoBI,cAFpB,IAGA,KAAKwC,MAAL,CAAY5C,OAAZ,CAAoBI,cAApB,CAAmC6D,WAAnC,CAJJ,EAMI,OAAO,KAAKrB,MAAL,CAAY5C,OAAZ,CAAoBI,cAApB,CAAmC6D,WAAnC,CAAP,CANJ,KAOK,IAAIzE,qCAAmC,CAACyE,WAAD,CAAvC,EACD,OAAOzE,qCAAmC,CAACyE,WAAD,CAA1C;AAEJ,WAAO,IAAP;AACH;;SAEDjB,gBAAA,uBAAcD,OAAd,EAAuB;AACnB,QAAI,CAACA,OAAO,CAAC9D,MAAb,EAAqB,OAAO,IAAP;AACrB,WAAO8D,OAAO,CAAC9D,MAAR,CACH,KAAK+E,8BAAL,CAAoCjB,OAAO,CAACjd,IAA5C,CADG,EAEH0Z,qCAAmC,CAACuD,OAAO,CAACjd,IAAT,CAFhC,CAAP;AAIH;;SAEDoe,kBAAA,2BAAkB;AACd,QAAMxE,IAAI,GAAG,KAAKkE,aAAL,CAAmB,MAAnB,CAAb;AACA,QAAMO,gBAAgB,GAAGC,SAAS,CAAC1E,IAAD,CAAlC;AACA,QAAM2E,kBAAkB,GAAG,KAAKzB,MAAL,CAAYjD,YAAZ,IAA4B,EAAvD;AACA,WAAOc,SAAS,CAAC0D,gBAAD,EAAmBE,kBAAnB,CAAhB;AACH;;SAEDC,qBAAA,8BAAqB;AACjB,WAAO,KAAKV,aAAL,CAAmB,SAAnB,EAA8B,UAA9B,EAA0CW,WAA1C,EAAP;AACH;;SAEDX,gBAAA,yBAAuB;AACnB,QAAItD,IAAI,gBAAQ,KAAKsC,MAAb,CAAR;;AADmB,sCAANnR,IAAM;AAANA,MAAAA,IAAM;AAAA;;AAEnB,6BAAkBA,IAAlB,2BAAwB;AAAnB,UAAMxP,GAAG,YAAT;AACDqe,MAAAA,IAAI,GAAGA,IAAI,CAACre,GAAD,CAAX;AACA,UAAIqe,IAAI,KAAKtc,SAAb,EAAwB;AAC3B;;AAED,QAAIsc,IAAI,KAAKtc,SAAb,EAAwB,OAAOsc,IAAP;AAExBA,IAAAA,IAAI,gBAAQb,aAAR,CAAJ;;AACA,+BAAkBhO,IAAlB,8BAAwB;AAAnB,UAAMxP,KAAG,cAAT;AACDqe,MAAAA,IAAI,GAAGA,IAAI,CAACre,KAAD,CAAX;AACH;;AAED,WAAOqe,IAAP;AACH;;;;;;AC/IL;AAKA,SAASkE,aAAT,OAA8D;AAAA,MAArCnkB,QAAqC,QAArCA,QAAqC;AAAA,0BAA3B4f,OAA2B;AAAA,MAA3BA,OAA2B,6BAAjB,IAAiB;AAAA,MAARvf,IAAQ;;AAC1D,sBACI,oBAAC,KAAD;AAAO,IAAA,MAAM,EAAE,CAACuf;AAAhB,KAA6Bvf,IAA7B,gBACI,oBAAC,IAAD;AAAM,IAAA,SAAS,MAAf;AAAgB,IAAA,UAAU,EAAC;AAA3B,KACKL,QADL,CADJ,CADJ;AAOH;;AAEDmkB,aAAa,CAAC1jB,SAAd,GAA0B;AACtBT,EAAAA,QAAQ,EAAEU,SAAS,CAACC,GADE;AAEtBif,EAAAA,OAAO,EAAElf,SAAS,CAACI;AAFG,CAA1B;;ICfqBsjB;AACjB,sBAAY9E,YAAZ,EAA0B;AACtB,SAAKA,YAAL,GAAoBA,YAApB;AACH;;;;SAEDpe,MAAA,aAAImjB,EAAJ,EAAQ;AACJ,QAAI,CAACA,EAAL,EAAS,OAAO,EAAP;AACT,QAAMjT,IAAI,GAAGiT,EAAE,CAACC,KAAH,CAAS,GAAT,CAAb;AACA,QAAIrE,IAAI,GAAG,KAAKX,YAAhB;;AACA,yDAAkBlO,IAAlB,wCAAwB;AAAA,UAAbxP,GAAa;AACpBqe,MAAAA,IAAI,GAAGA,IAAI,CAACre,GAAD,CAAX;AACA,UAAIqe,IAAI,KAAKtc,SAAb,EAAwB,OAAO,EAAP;AAC3B;;AACD,WAAOsc,IAAI,IAAI,EAAf;AACH;;;;;;ACZE,IAAMsE,YAAY,sCACpBxT,WAAW,CAACb,EADQ,IACH,IADG,gBAEpBa,WAAW,CAACZ,EAFQ,IAEH,IAFG,gBAGpBY,WAAW,CAACX,EAHQ,IAGH,IAHG,gBAIpBW,WAAW,CAACV,EAJQ,IAIH,IAJG,gBAKpBU,WAAW,CAACT,EALQ,IAKH,IALG,gBAMpBS,WAAW,CAACR,EANQ,IAMH,IANG,gBAOpBQ,WAAW,CAACL,UAPQ,IAOK,YAPL,gBAQpBK,WAAW,CAACJ,UARQ,IAQK,MARL,gBASpBI,WAAW,CAACH,QATQ,IASG,GATH,gBAUpBG,WAAW,CAACF,MAVQ,IAUC,QAVD,gBAWpBE,WAAW,CAACP,EAXQ,IAWH,IAXG,gBAYpBO,WAAW,CAACN,EAZQ,IAYH,IAZG,gBAAlB;;;ACAA,IAAM+T,aAAa,wCACrBvY,QAAQ,CAAClC,IADY,IACL,UAACsS,MAAD;AAAA,SAAY,gBAAaA,MAAM,CAACtP,OAAP,GAAiBb,GAA9B,4BAAuD,MAAvD,CAAZ;AAAA,CADK,iBAErBD,QAAQ,CAACjC,KAFY,IAEJ,UAACqS,MAAD;AAAA,SAAY,iBACbA,MAAM,CAAC7a,IAAP,CAAY6U,GADC,4BACqBgG,MAAM,CAACtP,OAAP,GAAiB6G,KADtC,oBAEtByI,MAAM,CAACtP,OAAP,GAAiB4G,MAFK,UAI1B,EAJ0B,CAAZ;AAAA,CAFI,iBAAnB;;ACAP,IAAM8Q,uBAAuB,GAAG,SAA1BA,uBAA0B,CAAC3e,WAAD,EAAcyM,KAAd;AAAA,SAC5BzM,WAAW,CAAC+I,MAAZ,CAAmB,CAAnB,EAAsB0D,KAAK,CAACzD,MAA5B,MAAwCyD,KADZ;AAAA,CAAhC;;AAEA,IAAMmS,6BAA6B,GAAG,SAAhCA,6BAAgC,CAAC5e,WAAD,EAAcyM,KAAd;AAAA,SAAwBzM,WAAW,CAAC+I,MAAZ,CAAmB0D,KAAK,CAACzD,MAAN,GAAe,CAAlC,CAAxB;AAAA,CAAtC;;AACA,AAAO,IAAM6V,kBAAkB,GAAG,SAArBA,kBAAqB,CAAC7e,WAAD,EAAiB;AAC/C,UAAQA,WAAR;AACI,SAAKqD,YAAY,CAACV,IAAlB;AACI,aAAO,oBAAP;;AACJ,SAAKU,YAAY,CAACT,MAAlB;AACI,aAAO,qBAAP;;AACJ,SAAKS,YAAY,CAACR,SAAlB;AACI,aAAO,6BAAP;;AACJ,SAAKQ,YAAY,CAACP,aAAlB;AACI,aAAO,gCAAP;;AACJ,SAAKO,YAAY,CAACN,IAAlB;AACI,aAAO,yBAAP;;AACJ;AACI,UAAI4b,uBAAuB,CAAC3e,WAAD,EAAcqD,YAAY,CAACL,WAA3B,CAA3B,EAAoE;AAChE,kCAAwB4b,6BAA6B,CACjD5e,WADiD,EAEjDqD,YAAY,CAACL,WAFoC,CAArD;AAIH;;AAED,UAAI2b,uBAAuB,CAAC3e,WAAD,EAAcqD,YAAY,CAACJ,SAA3B,CAA3B,EAAkE;AAC9D,+BAAqB2b,6BAA6B,CAC9C5e,WAD8C,EAE9CqD,YAAY,CAACJ,SAFiC,CAAlD;AAIH;;AAED,UAAI0b,uBAAuB,CAAC3e,WAAD,EAAcqD,YAAY,CAACH,UAA3B,CAA3B,EAAmE;AAC/D,2BAAiB0b,6BAA6B,CAC1C5e,WAD0C,EAE1CqD,YAAY,CAACH,UAF6B,CAA9C;AAIH;;AAED,UAAIyb,uBAAuB,CAAC3e,WAAD,EAAcqD,YAAY,CAACF,eAA3B,CAA3B,EAAwE;AACpE,sCAA4Byb,6BAA6B,CACrD5e,WADqD,EAErDqD,YAAY,CAACF,eAFwC,CAAzD;AAIH;;AAED,aAAO,EAAP;AAxCR;AA0CH,CA3CM;;ACAP,IAAM2b,MAAM,GAAG,SAATA,MAAS,CAAC5d,YAAD,EAAkB;AAC7B,MAAI6d,IAAI,GAAG,EAAX;AACA,MAAIC,WAAW,GAAG,KAAlB;AACA,MAAM5H,QAAQ,GAAGlW,YAAY,CAACmW,WAAb,EAAjB;AACA,MAAI4H,UAAU,GAAG,CAAjB;;AACA,uDAAwB7H,QAAxB,wCAAkC;AAAA,QAAvBrL,SAAuB;AAC9B,QAAMxM,KAAK,GAAGwM,SAAS,CAAC,CAAD,CAAvB;AAEA,QAAMmT,QAAQ,GAAGT,YAAY,CAAClf,KAAK,CAACmH,OAAN,EAAD,CAA7B;AACA,QAAMyY,UAAU,GAAG5f,KAAK,CAAC0H,OAAN,GAAgBtF,GAAhB,CAAoB,WAApB,oBACCpC,KAAK,CAAC0H,OAAN,GAAgB7L,GAAhB,CAAoB,WAApB,CADD,SAEb,IAFN;AAGA,QAAIgkB,YAAY,GAAGF,QAAQ,SACjBA,QADiB,IACNC,UAAU,iBAAcA,UAAd,UAA8B,EADlC,UAErB,EAFN;AAGA,QAAIE,aAAa,GAAGH,QAAQ,UAAQA,QAAR,SAAsB,EAAlD;;AAEA,QAAI3f,KAAK,CAACmH,OAAN,OAAoBuE,WAAW,CAACP,EAAhC,IAAsCnL,KAAK,CAACmH,OAAN,OAAoBuE,WAAW,CAACN,EAA1E,EAA8E;AAC1E,UAAI,CAACqU,WAAL,EAAkB;AACdI,QAAAA,YAAY,SACR7f,KAAK,CAACmH,OAAN,OAAoBuE,WAAW,CAACP,EAAhC,GAAqC,MAArC,GAA8C,MADtC,IAET0U,YAFH;AAGH;;AAED,UAAIH,UAAU,KAAK7H,QAAQ,CAACpO,MAAT,GAAkB,CAArC,EAAwC;AACpCqW,QAAAA,aAAa,QAAMA,aAAN,IACT9f,KAAK,CAACmH,OAAN,OAAoBuE,WAAW,CAACP,EAAhC,GAAqC,OAArC,GAA+C,OADtC,CAAb;AAGH;;AACDsU,MAAAA,WAAW,GAAG,IAAd;AACH,KAbD,MAaO;AAEH,UAAIA,WAAJ,EAAiB;AACbI,QAAAA,YAAY,SACR7f,KAAK,CAACmH,OAAN,OAAoBuE,WAAW,CAACP,EAAhC,GAAqC,OAArC,GAA+C,OADvC,IAET0U,YAFH;AAGH;;AACDJ,MAAAA,WAAW,GAAG,KAAd;AACH;;AAED,QAAIzf,KAAK,CAACgB,SAAN,OAAsB,CAA1B,EAA6B;AACzBwe,MAAAA,IAAI,IAAIK,YAAY,GAAGC,aAAvB;AACA;AACH;;AAEDN,IAAAA,IAAI,IAAIK,YAAR;AACA,QAAIE,aAAa,GAAG,IAApB;AACA,QAAMC,sBAAsB,GAAG,EAA/B;;AACA,SAAK,IAAMC,SAAX,IAAwBjgB,KAAK,CAACkgB,OAAN,EAAxB,EAAyC;AACrC,UAAMC,UAAU,GAAGvO,QAAQ,CAACqO,SAAD,CAAR,KAAwBjgB,KAAK,CAACgB,SAAN,KAAoB,CAA/D;AAEA,UAAIof,aAAa,GAAG,EAApB;AACA,UAAIC,cAAc,GAAG,EAArB;AACA,UAAMC,gBAAgB,GAAGtgB,KAAK,CAACiX,WAAN,CAAkBgJ,SAAlB,CAAzB;;AACA,UAAIK,gBAAgB,KAAKP,aAAzB,EAAwC;AACpC,YAAIA,aAAa,KAAK,IAAtB,EAA4B;AACxB,cAAM/I,MAAM,GAAGrV,YAAY,CAACuF,SAAb,CAAuBoZ,gBAAvB,CAAf;AACAF,UAAAA,aAAa,GAAGjB,aAAa,CAACnI,MAAM,CAAC7P,OAAP,EAAD,CAAb,CAAgC6P,MAAhC,EAAwC,CAAxC,CAAhB;AACH,SAHD,MAGO,IAAIsJ,gBAAgB,KAAK,IAAzB,EAA+B;AAClC,cAAMtJ,OAAM,GAAGrV,YAAY,CAACuF,SAAb,CAAuB6Y,aAAvB,CAAf;;AACAM,UAAAA,cAAc,GAAGlB,aAAa,CAACnI,OAAM,CAAC7P,OAAP,EAAD,CAAb,CAAgC6P,OAAhC,EAAwC,CAAxC,CAAjB;AACH,SAHM,MAGA;AACH,cAAMuJ,iBAAiB,GAAG5e,YAAY,CAACuF,SAAb,CAAuB6Y,aAAvB,CAA1B;AACA,cAAMS,gBAAgB,GAAG7e,YAAY,CAACuF,SAAb,CAAuBoZ,gBAAvB,CAAzB;AACAF,UAAAA,aAAa,GACTjB,aAAa,CAACoB,iBAAiB,CAACpZ,OAAlB,EAAD,CAAb,CAA2CoZ,iBAA3C,EAA8D,CAA9D,IACApB,aAAa,CAACqB,gBAAgB,CAACrZ,OAAjB,EAAD,CAAb,CAA0CqZ,gBAA1C,EAA4D,CAA5D,CAFJ;AAGH;AACJ,OAdD,MAcO,IAAIF,gBAAgB,KAAK,IAArB,IAA6BH,UAAjC,EAA6C;AAChD,YAAMnJ,QAAM,GAAGrV,YAAY,CAACuF,SAAb,CAAuBoZ,gBAAvB,CAAf;;AACAD,QAAAA,cAAc,GAAGlB,aAAa,CAACnI,QAAM,CAAC7P,OAAP,EAAD,CAAb,CAAgC6P,QAAhC,EAAwC,CAAxC,CAAjB;AACH;;AAGD,UAAMyJ,gBAAgB,GAAGzgB,KAAK,CAAC0gB,gBAAN,CAAuBT,SAAvB,CAAzB;AACA,UAAMU,uBAAuB,GAAG,EAAhC;AACA,UAAMC,gBAAgB,GAAG,EAAzB;AACA,UAAMC,iBAAiB,GAAG,EAA1B;AACA,UAAMC,0BAA0B,GAAG,EAAnC;AACA,UAAMC,gCAAgC,GAAG,EAAzC;;AAEA,4DAA0BN,gBAA1B,2CAA4C;AAAA,YAAjChgB,aAAiC;;AACxC,YAAIuf,sBAAsB,CAACvf,aAAD,CAAtB,KAAwCnC,SAA5C,EAAuD;AACnDsiB,UAAAA,gBAAgB,CAAC5e,IAAjB,CAAsBvB,aAAtB;AACAuf,UAAAA,sBAAsB,CAACvf,aAAD,CAAtB,GAAsCwf,SAAtC;AACH,SAHD,MAGO,IAAIG,aAAa,IAAIC,cAArB,EAAqC;AACxCM,UAAAA,uBAAuB,CAAC3e,IAAxB,CAA6BvB,aAA7B;AACAsgB,UAAAA,gCAAgC,CAAC/e,IAAjC,CAAsCge,sBAAsB,CAACvf,aAAD,CAA5D;AACA,iBAAOuf,sBAAsB,CAACvf,aAAD,CAA7B;AACH,SAJM,MAIA,IAAI0f,UAAJ,EAAgB;AACnBU,UAAAA,iBAAiB,CAAC7e,IAAlB,CAAuBvB,aAAvB;AACAqgB,UAAAA,0BAA0B,CAAC9e,IAA3B,CAAgCge,sBAAsB,CAACvf,aAAD,CAAtD;AACA,iBAAOuf,sBAAsB,CAACvf,aAAD,CAA7B;AACH;AACJ;;AAED,WAAK,IAAMA,WAAX,IAA0Buf,sBAA1B,EAAkD;AAC9C,YACI,CAACS,gBAAgB,CAAC1b,QAAjB,CAA0BtE,WAA1B,CAAD,IACA,CAACogB,iBAAiB,CAAC9b,QAAlB,CAA2BtE,WAA3B,CADD,IAEA,CAACkgB,uBAAuB,CAAC5b,QAAxB,CAAiCtE,WAAjC,CAHL,EAIE;AACEkgB,UAAAA,uBAAuB,CAAC3e,IAAxB,CAA6BvB,WAA7B;AACAsgB,UAAAA,gCAAgC,CAAC/e,IAAjC,CAAsCge,sBAAsB,CAACvf,WAAD,CAA5D;AACA,iBAAOuf,sBAAsB,CAACvf,WAAD,CAA7B;AACH,SARD,MAQO,IAAI0f,UAAJ,EAAgB;AACnBU,UAAAA,iBAAiB,CAAC7e,IAAlB,CAAuBvB,WAAvB;AACAqgB,UAAAA,0BAA0B,CAAC9e,IAA3B,CAAgCge,sBAAsB,CAACvf,WAAD,CAAtD;AACA,iBAAOuf,sBAAsB,CAACvf,WAAD,CAA7B;AACH;AACJ;;AAED,+CAA0BqgB,0BAA1B,2CAAsD;AAAjD,YAAME,WAAW,4BAAjB;;AACD,aAAK,IAAMvgB,YAAX,IAA0Buf,sBAA1B,EAAkD;AAC9C,cAAIA,sBAAsB,CAACvf,YAAD,CAAtB,GAAsCugB,WAA1C,EAAuD;AACnDH,YAAAA,iBAAiB,CAAC7e,IAAlB,CAAuBvB,YAAvB;AACAqgB,YAAAA,0BAA0B,CAAC9e,IAA3B,CAAgCge,sBAAsB,CAACvf,YAAD,CAAtD;AACA,mBAAOuf,sBAAsB,CAACvf,YAAD,CAA7B;AACH;AACJ;AACJ;;AAED,gDAA0BsgB,gCAA1B,6CAA4D;AAAvD,YAAMC,YAAW,6BAAjB;;AACD,aAAK,IAAMvgB,aAAX,IAA0Buf,sBAA1B,EAAkD;AAC9C,cACIA,sBAAsB,CAACvf,aAAD,CAAtB,GAAsCwf,SAAtC,IACAD,sBAAsB,CAACvf,aAAD,CAAtB,GAAsCugB,YAF1C,EAGE;AACEL,YAAAA,uBAAuB,CAAC3e,IAAxB,CAA6BvB,aAA7B;AACAsgB,YAAAA,gCAAgC,CAAC/e,IAAjC,CAAsCge,sBAAsB,CAACvf,aAAD,CAA5D;AACA,mBAAOuf,sBAAsB,CAACvf,aAAD,CAA7B;;AACA,gBAAIggB,gBAAgB,CAAC1b,QAAjB,CAA0BtE,aAA1B,CAAJ,EAA4C;AACxCmgB,cAAAA,gBAAgB,CAAC5e,IAAjB,CAAsBvB,aAAtB;AACAuf,cAAAA,sBAAsB,CAACvf,aAAD,CAAtB,GAAsCwf,SAAtC;AACH;AACJ;AACJ;AACJ;;AAGD,UAAIgB,CAAC,GAAG,CAAR;;AACA,aAAOA,CAAC,GAAGN,uBAAuB,CAAClX,MAAnC,EAA2C;AACvC+V,QAAAA,IAAI,IAAI,SAAR;AACAyB,QAAAA,CAAC;AACJ;;AACDzB,MAAAA,IAAI,IAAIY,aAAR;;AACA,4CAAoBQ,gBAApB,yCAAsC;AAAjC,YAAM1T,KAAK,yBAAX;AACDsS,QAAAA,IAAI,IAAI,kBAAkBF,kBAAkB,CAACpS,KAAD,CAApC,GAA8C,IAAtD;AACH;;AACDsS,MAAAA,IAAI,IAAIxf,KAAK,CAACkgB,OAAN,GAAgBD,SAAhB,CAAR;AACA,UAAIiB,CAAC,GAAG,CAAR;;AACA,aAAOA,CAAC,GAAGL,iBAAiB,CAACpX,MAA7B,EAAqC;AACjC+V,QAAAA,IAAI,IAAI,SAAR;AACA0B,QAAAA,CAAC;AACJ;;AACD1B,MAAAA,IAAI,IAAIa,cAAR;AAEAN,MAAAA,aAAa,GAAGO,gBAAhB;AACH;;AACDd,IAAAA,IAAI,IAAIM,aAAR;AACAJ,IAAAA,UAAU;AACb;;AACD,SAAOF,IAAP;AACH,CAnKD;;ICWa1c,aAAa,GAAG/E,KAAK,CAACojB,aAAN,CAAoB,EAApB,CAAtB;AAEP,IAAaC,kBAAkB,GAAGrjB,KAAK,CAACojB,aAAN,CAAoB,IAApB,CAA3B;AAEP,IAAaplB,cAAc,GAAG;AAC1BqM,EAAAA,WAAW,EAAE,qBAAC8U,MAAD,EAAY;AACrB,QAAMmE,eAAe,GAAG,IAAIpE,eAAJ,CAAoBC,MAApB,CAAxB;AACA,WAAOnb,mBAAW,CAACqG,WAAZ,CAAwBiZ,eAAe,CAAClE,qBAAhB,EAAxB,CAAP;AACH,GAJyB;AAK1BnhB,EAAAA,iBAAiB,EAAE,2BAACkhB,MAAD,EAASvb,YAAT,EAA0B;AACzC,QAAM0f,eAAe,GAAG,IAAIpE,eAAJ,CAAoBC,MAApB,CAAxB;AACA,WAAOnb,mBAAW,CAAC/F,iBAAZ,CAA8B2F,YAA9B,EAA4C0f,eAAe,CAAClE,qBAAhB,EAA5C,CAAP;AACH;AARyB,CAAvB;AAWP,IAAM/iB,WAAS,GAAGC,UAAU,CAAC,UAACqP,KAAD;AAAA,SAAY;AACrC,eAAW;AACP,wCAAkC;AAC9BgD,QAAAA,SAAS,EAAE,iBADmB;AAE9B,mBAAW;AACPA,UAAAA,SAAS,EAAE;AADJ;AAFmB,OAD3B;AAOP,0CAAoC;AAChCA,QAAAA,SAAS,EAAE,mBADqB;AAEhC,mBAAW;AACPA,UAAAA,SAAS,EAAE;AADJ;AAFqB,OAP7B;AAaP,yCAAmC;AAC/BA,QAAAA,SAAS,EAAE,kBADoB;AAE/B,mBAAW;AACPA,UAAAA,SAAS,EAAE;AADJ;AAFoB,OAb5B;AAmBP,2CAAqC;AACjCA,QAAAA,SAAS,EAAE,oBADsB;AAEjC,mBAAW;AACPA,UAAAA,SAAS,EAAE;AADJ;AAFsB;AAnB9B,KAD0B;AA2BrC4U,IAAAA,aAAa,EAAE;AACXzQ,MAAAA,SAAS,EAAEnH,KAAK,CAACG,OAAN,CAAc,CAAd,CADA;AAEXiH,MAAAA,YAAY,EAAEpH,KAAK,CAACG,OAAN,CAAc,CAAd,CAFH;AAGXuE,MAAAA,OAAO,EAAE1E,KAAK,CAACG,OAAN,CAAc,CAAd;AAHE;AA3BsB,GAAZ;AAAA,CAAD,CAA5B;;AAyCC,IAAM0X,mBAAmB,GAAG,SAAtBA,mBAAsB,CAACF,eAAD,EAAkBnK,IAAlB,EAAwB3a,GAAxB,EAAgC;AACzD,SAAOwB,KAAK,CAACyjB,OAAN,CAAc;AAAA,WAAMH,eAAe,CAACnD,aAAhB,CAA8BhH,IAA9B,EAAoC3a,GAApC,CAAN;AAAA,GAAd,EAA8D,CAAC8kB,eAAD,CAA9D,CAAP;AACH,CAFA;;AAID,IAAMI,iBAAiB,GAAG1jB,KAAK,CAAC2jB,IAAN,CAAW,UAACnnB,KAAD;AAAA,sBAAW,iCAAMA,KAAK,CAAC8mB,eAAN,CAAsBlD,2BAAtB,EAAN,CAAX;AAAA,CAAX,CAA1B;AAGA,IAAMwD,OAAO,GAAG5jB,KAAK,CAAC2jB,IAAN,CAAW,UAACnnB,KAAD,EAAW;AACtC,MAAOqnB,gBAAP,GAA4CrnB,KAA5C,CAAOqnB,gBAAP;AAAA,MAAyBP,eAAzB,GAA4C9mB,KAA5C,CAAyB8mB,eAAzB;AACA,sBACA,oBAAC,aAAD;AACI,IAAA,OAAO,EAAEO,gBADb;AAEI,IAAA,KAAK,EAAEL,mBAAmB,CAACF,eAAD,EAAkB,SAAlB,EAA6B,OAA7B,CAF9B;AAGI,IAAA,SAAS,EAAEE,mBAAmB,CAACF,eAAD,EAAkB,SAAlB,EAA6B,WAA7B;AAHlC,kBAII,oBAAC,iBAAD;AAAmB,IAAA,eAAe,EAAEA;AAApC,IAJJ,CADA;AAQC,CAVe,CAAhB;AAYA,IAAIA,eAAJ;AAEA,IAAIlJ,qBAAJ;AACA,IAAIvB,qBAAJ;AAEA,IAAI/J,YAAJ;AACA,IAAIb,cAAJ;AACA,IAAI6R,cAAJ;AACA,IAAIvF,eAAJ;;AAeA,SAASuJ,SAAT,OAKG;AAAA,2BAJCnlB,QAID;AAAA,MAJCA,QAID,8BAJY,YAAU,EAItB;AAAA,0BAHColB,OAGD;AAAA,MAHCA,OAGD,6BAHW,YAAU,EAGrB;AAAA,yBAFCC,MAED;AAAA,MAFCA,MAED,4BAFU,YAAU,EAEpB;AAAA,yBADC7E,MACD;AAAA,MADCA,MACD,4BADUnD,aACV;AAEC,MAAMiI,cAAc,GAAGrkB,iBAAiB,CAAC,UAAAR,KAAK;AAAA,WAAIA,KAAK,CAACrB,WAAV;AAAA,GAAN,EAA6B,KAA7B,CAAxC;AACA,MAAMsI,QAAQ,GAAG1I,QAAQ,CAAC,UAAAyB,KAAK;AAAA,WAAIA,KAAK,CAACiH,QAAV;AAAA,GAAN,CAAzB;AACA,MAAMnH,QAAQ,GAAGvB,QAAQ,CAAC,UAAAyB,KAAK;AAAA,WAAIA,KAAK,CAACF,QAAV;AAAA,GAAN,CAAzB;AAEAokB,EAAAA,eAAe,GAAGA,eAAe,IAAI,IAAIpE,eAAJ,CAAoBC,MAApB,CAArC;AACA,MAAM3a,SAAS,GAAGxE,KAAK,CAACC,MAAN,CAAa,IAAb,CAAlB;AACA,MAAMikB,YAAY,GAAGlkB,KAAK,CAACC,MAAN,CAAa,YAAY,EAAzB,CAArB;AACA,MAAMkkB,oBAAoB,GAAGX,mBAAmB,CAACF,eAAD,EAAkB,SAAlB,EAA6B,SAA7B,CAAhD;;AACA,wBAAgDtjB,KAAK,CAACkF,QAAN,CAAeif,oBAAf,CAAhD;AAAA,MAAON,gBAAP;AAAA,MAAyBO,mBAAzB;;AACA,yBAAoEpkB,KAAK,CAACkF,QAAN,CAAe,KAAf,CAApE;AAAA,MAAO6T,0BAAP;AAAA,MAAmCsL,6BAAnC;;AACA,yBAAwDrkB,KAAK,CAACkF,QAAN,CAAe,IAAf,CAAxD;AAAA,MAAOsT,oBAAP;AAAA,MAA6B8L,uBAA7B;;AAEAlK,EAAAA,qBAAqB,GAAGA,qBAAqB,IAAI,UAASiK,6BAAT,EAAwCC,uBAAxC,EAAiE5c,SAAjE,EAA4E;AACzH2c,IAAAA,6BAA6B,CAAC,IAAD,CAA7B;AACAC,IAAAA,uBAAuB,CAAC5c,SAAD,CAAvB;AACH,GAHgD,CAG/CmC,IAH+C,CAG1C,IAH0C,EAGpCwa,6BAHoC,EAGLC,uBAHK,CAAjD;;AAKAzL,EAAAA,qBAAqB,GAAGA,qBAAqB,IAAI,UAASwL,6BAAT,EAAwCC,uBAAxC,EAAgE;AAC7GD,IAAAA,6BAA6B,CAAC,KAAD,CAA7B;AACAC,IAAAA,uBAAuB,CAAC,IAAD,CAAvB;AACH,GAHgD,CAG/Cza,IAH+C,CAG1C,IAH0C,EAGpCwa,6BAHoC,EAGLC,uBAHK,CAAjD;;AAMAJ,EAAAA,YAAY,CAAC7jB,OAAb,GAAuBL,KAAK,CAAC2M,WAAN,CAAkB,UAASuP,YAAT,EAAuB+E,EAAvB,EAA2B;AAChE,QAAMsD,UAAU,GAAG,IAAIvD,UAAJ,CAAe9E,YAAf,CAAnB;AACA,WAAOqI,UAAU,CAACzmB,GAAX,CAAemjB,EAAf,CAAP;AACH,GAHwC,CAGvCpX,IAHuC,CAGlC,IAHkC,EAG5ByZ,eAAe,CAAC7C,eAAhB,EAH4B,CAAlB,EAG0B,EAH1B,CAAvB;AAKAvhB,EAAAA,QAAQ,CAAC;AAACR,IAAAA,GAAG,EAAC8F,SAAL;AAAgB7F,IAAAA,QAAQ,EAARA,QAAhB;AAA0BC,IAAAA,SAAS,EAAEoB,KAAK,CAAC2M,WAAN,CAAkB,UAASuP,YAAT,EAAuB+E,EAAvB,EAA2B;AACvF,UAAMsD,UAAU,GAAG,IAAIvD,UAAJ,CAAe9E,YAAf,CAAnB;AACA,aAAOqI,UAAU,CAACzmB,GAAX,CAAemjB,EAAf,CAAP;AACH,KAH+D,CAG9DpX,IAH8D,CAGzD,IAHyD,EAGnDyZ,eAAe,CAAC7C,eAAhB,EAHmD,CAAlB,EAGG,EAHH;AAArC,GAAD,CAAR;AAMA,MAAMvjB,OAAO,GAAGb,WAAS,EAAzB;AAEA2D,EAAAA,KAAK,CAACE,SAAN,CAAgB,YAAM;AAClBkkB,IAAAA,mBAAmB,CAACD,oBAAD,CAAnB;AACH,GAFD,EAEG,CAACA,oBAAD,CAFH;AAIA,MAAM5H,OAAO,gBAAG,oBAAC,OAAD;AAAS,IAAA,gBAAgB,EAAEsH,gBAA3B;AAA6C,IAAA,eAAe,EAAEP;AAA9D,IAAhB;AAGA,MAAMkB,GAAG,GAAGlB,eAAe,CAACzC,kBAAhB,OAAyC,KAAzC,GAAiDtE,OAAjD,GAA2D,IAAvE;AACA,MAAMkI,MAAM,GAAGnB,eAAe,CAACzC,kBAAhB,OAAyC,QAAzC,GAAoDtE,OAApD,GAA8D,IAA7E;AAGA,MAAMmI,cAAc,GAAG1kB,KAAK,CAAC2M,WAAN,CAAkB,UAACjO,GAAD,EAAS;AAC9CA,IAAAA,GAAG,CAAC2B,OAAJ,CAAYqE,KAAZ;AACH,GAFsB,EAEpB,EAFoB,CAAvB;AAIA,MAAMigB,kBAAkB,GAAG3kB,KAAK,CAACC,MAAN,CAAa;AACpCkP,IAAAA,KAAK,EAAEqU,mBAAmB,CAACF,eAAD,EAAkB,QAAlB,EAA4B,OAA5B,CADU;AAEpChH,IAAAA,SAAS,EAAKpf,OAAO,CAACqmB,aAAb,SAA8BC,mBAAmB,CAACF,eAAD,EAAkB,QAAlB,EAA4B,WAA5B,CAFtB;AAGpCzmB,IAAAA,OAAO,EAAE6nB;AAH2B,GAAb,CAA3B;AAMA,MAAME,oBAAoB,GAAGpB,mBAAmB,CAACF,eAAD,EAAkB,QAAlB,EAA4B,gBAA5B,CAAhD;AAEA,MAAMuB,gBAAgB,GAAG7kB,KAAK,CAAC2M,WAAN,CAAkB,UAAS5M,QAAT,EAAmB+kB,OAAnB,EAA4B;AAEnEC,IAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ,EAA2BF,OAA3B;AACA,QAAMG,QAAQ,GAAGhkB,iBAAS,CAAC4jB,gBAAV,CAA2B9kB,QAAQ,CAACM,OAApC,EAA6CykB,OAA7C,CAAjB;;AACA,QAAIG,QAAJ,EAAc;AACVtmB,MAAAA,QAAQ,CAACsmB,QAAD,CAAR;AACA,aAAO,SAAP;AACH;;AACD,WAAO,aAAP;AAEH,GAV0C,CAUzCpb,IAVyC,CAUpC,IAVoC,EAU9Boa,cAV8B,CAAlB,EAUK,EAVL,CAAzB;;AAYA,MAAIW,oBAAoB,KAAKvI,KAA7B,EAAoC;AAChCsI,IAAAA,kBAAkB,CAACO,SAAnB,GAA+B,CAA/B;AACH;;AAEDpW,EAAAA,YAAY,GAAGA,YAAY,IAAIwU,eAAe,CAACvD,eAAhB,EAA/B;AACA9R,EAAAA,cAAc,GAAGA,cAAc,IAAIqV,eAAe,CAAC5D,iBAAhB,EAAnC;AACAI,EAAAA,cAAc,GAAGA,cAAc,IAAIwD,eAAe,CAAC3D,iBAAhB,EAAnC;AACApF,EAAAA,eAAe,GAAGA,eAAe,IAAI+I,eAAe,CAACpD,kBAAhB,EAArC;AAEA,MAAMiF,aAAa,GAAGnlB,KAAK,CAACsgB,aAAN,CAClBsE,oBADkB,EAElBD,kBAAkB,CAACtkB,OAFD,eAGlB,oBAAC+kB,cAAD,eACS5B,mBAAmB,CAACF,eAAD,EAAkB,aAAlB,CAAnB,IAAuD,EADhE;AAEI,IAAA,GAAG,EAAE9e,SAFT;AAGI,IAAA,WAAW,EAAEyf,cAAc,CAAC5jB,OAHhC;AAII,IAAA,QAAQ,EAAEgG,QAJd;AAKI,IAAA,OAAO,EAAE0d,OALb;AAMI,IAAA,MAAM,EAAEC,MANZ;AAOI,IAAA,gBAAgB,EAAEa,gBAPtB;AAQI,IAAA,YAAY,EAAE/V,YARlB;AASI,IAAA,cAAc,EAAEb,cATpB;AAUI,IAAA,cAAc,EAAE6R,cAVpB;AAWI,IAAA,eAAe,EAAEvF;AAXrB,KAHkB,CAAtB;AAmBA,MAAM8K,YAAY,GAAGrlB,KAAK,CAACC,MAAN,CAAa;AAC9Bma,IAAAA,qBAAqB,EAArBA,qBAD8B;AAE9BvB,IAAAA,qBAAqB,EAArBA,qBAF8B;AAG9BE,IAAAA,0BAA0B,EAA1BA,0BAH8B;AAI9BP,IAAAA,oBAAoB,EAApBA;AAJ8B,GAAb,CAArB;AAUA,sBACI,oBAAC,aAAD,CAAe,QAAf;AACI,IAAA,KAAK,EAAE6M;AADX,KAEab,GAFb,EAGaW,aAHb,EAIaV,MAJb,CADJ;AAQH;;AAEDX,SAAS,CAACwB,WAAV,GAAwB,WAAxB;AAEAxB,SAAS,CAACzmB,SAAV,GAAsB;AAElBU,EAAAA,WAAW,EAAET,SAAS,CAACuN,MAAV,CAAiBrN,UAFZ;AAIlBmB,EAAAA,QAAQ,EAAErB,SAAS,CAACG,IAAV,CAAeD,UAJP;AAMlBumB,EAAAA,OAAO,EAAEzmB,SAAS,CAACG,IAND;AAQlBumB,EAAAA,MAAM,EAAE1mB,SAAS,CAACG,IARA;AAUlB0hB,EAAAA,MAAM,EAAE7hB,SAAS,CAACuN;AAVA,CAAtB;AAaAiZ,SAAS,CAACyB,YAAV,GAAyB;AACrBpG,EAAAA,MAAM,EAAEnD;AADa,CAAzB;;;;;;;;;;"}